<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Shadow Arena ‚Äî Fighting Game</title>
    <meta name="description" content="Shadow Arena: A free browser-based fighting game with 6 unique fighters, customizable weapons, AI opponents, local & online multiplayer, and a ranked progression system.">
    <link rel="stylesheet" href="style.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>‚öîÔ∏è</text></svg>">
</head>
<body>

<!-- ===== TITLE SCREEN ===== -->
<div id="title-screen" class="screen active">
    <div class="title-bg"></div>
    <div class="title-content">
        <h1 class="game-title">SHADOW<br>ARENA</h1>
        <p class="game-subtitle">Fight for Glory</p>
        <div class="title-buttons">
            <button id="btn-play" class="btn btn-primary">FIGHT</button>
            <button id="btn-scores" class="btn">HIGH SCORES</button>
            <button id="btn-profile" class="btn">PROFILE & RANK</button>
            <button id="btn-controls" class="btn">CONTROLS</button>
        </div>
        <div id="gamepad-status"></div>
    </div>
</div>

<!-- ===== MODE SELECT ===== -->
<div id="mode-screen" class="screen">
    <h2 class="select-header">SELECT MODE</h2>
    <div class="mode-grid">
        <div class="mode-card" id="btn-mode-arcade">
            <div class="mode-icon">ü§ñ</div>
            <div class="mode-name">VS AI</div>
            <div class="mode-desc">Battle against intelligent AI opponents. Choose your difficulty.</div>
        </div>
        <div class="mode-card" id="btn-mode-versus">
            <div class="mode-icon">üë•</div>
            <div class="mode-name">LOCAL VS</div>
            <div class="mode-desc">Fight a friend on the same device. Keyboard or controllers.</div>
        </div>
        <div class="mode-card" id="btn-mode-online">
            <div class="mode-icon">üåê</div>
            <div class="mode-name">ONLINE</div>
            <div class="mode-desc">Challenge players online via peer-to-peer connection.</div>
        </div>
    </div>

    <div class="difficulty-row" id="difficulty-selector">
        <span style="color:#888;margin-right:10px;line-height:36px;">AI Difficulty:</span>
        <button class="diff-btn" data-diff="easy" style="border-color:#4caf50;color:#4caf50;">ROOKIE</button>
        <button class="diff-btn selected" data-diff="medium" style="border-color:#ff9800;color:#ff9800;">WARRIOR</button>
        <button class="diff-btn" data-diff="hard" style="border-color:#f44336;color:#f44336;">CHAMPION</button>
        <button class="diff-btn" data-diff="insane" style="border-color:#9c27b0;color:#9c27b0;">LEGENDARY</button>
    </div>

    <div class="nav-buttons">
        <button id="btn-mode-back" class="btn btn-small">BACK</button>
    </div>
</div>

<!-- ===== CHARACTER SELECT ===== -->
<div id="char-select-screen" class="screen">
    <h2 class="select-header" id="char-select-label">SELECT YOUR FIGHTER</h2>
    <div class="char-grid" id="char-grid"></div>
    <div class="char-preview-area">
        <canvas id="char-preview-canvas" width="200" height="280"></canvas>
        <div id="char-preview-info"></div>
    </div>
    <div class="nav-buttons">
        <button id="btn-char-back" class="btn btn-small">BACK</button>
        <button id="btn-char-confirm" class="btn btn-small btn-gold">CONFIRM</button>
    </div>
</div>

<!-- ===== WEAPON SELECT ===== -->
<div id="weapon-select-screen" class="screen">
    <h2 class="select-header" id="weapon-select-label">CHOOSE YOUR WEAPON</h2>
    <div class="weapon-grid" id="weapon-grid"></div>
    <div class="nav-buttons">
        <button id="btn-weapon-back" class="btn btn-small">BACK</button>
        <button id="btn-weapon-confirm" class="btn btn-small btn-gold">CONFIRM</button>
    </div>
</div>

<!-- ===== STAGE SELECT ===== -->
<div id="stage-select-screen" class="screen">
    <h2 class="select-header">SELECT ARENA</h2>
    <div class="stage-grid" id="stage-grid"></div>
    <div class="nav-buttons">
        <button id="btn-stage-back" class="btn btn-small">BACK</button>
        <button id="btn-stage-confirm" class="btn btn-small btn-primary">START FIGHT!</button>
    </div>
</div>

<!-- ===== GAME SCREEN ===== -->
<div id="game-screen" class="screen">
    <div id="game-container">
        <canvas id="gameCanvas" width="1280" height="720"></canvas>
        <!-- Floating help button -->
        <button id="btn-controls-toggle" class="controls-fab" title="Controls (F1)">?</button>
    </div>
    <!-- Mobile touch controls (auto-shown on touch devices) -->
    <div id="touch-controls" class="touch-controls hidden">
        <div class="touch-dpad">
            <button class="touch-btn touch-up" data-action="up" aria-label="Jump">&#9650;</button>
            <div class="touch-dpad-mid">
                <button class="touch-btn touch-left" data-action="left" aria-label="Left">&#9664;</button>
                <button class="touch-btn touch-down" data-action="down" aria-label="Crouch">&#9660;</button>
                <button class="touch-btn touch-right" data-action="right" aria-label="Right">&#9654;</button>
            </div>
        </div>
        <div class="touch-actions">
            <div class="touch-actions-row">
                <button class="touch-btn touch-atk touch-light" data-action="lightAttack" aria-label="Light Attack">L</button>
                <button class="touch-btn touch-atk touch-heavy" data-action="heavyAttack" aria-label="Heavy Attack">H</button>
                <button class="touch-btn touch-atk touch-special" data-action="special" aria-label="Special">S</button>
            </div>
            <div class="touch-actions-row">
                <button class="touch-btn touch-util touch-grab" data-action="grab" aria-label="Grab">G</button>
                <button class="touch-btn touch-util touch-block" data-action="block" aria-label="Block">B</button>
                <button class="touch-btn touch-util touch-dash" data-action="dash" aria-label="Dash">D</button>
            </div>
        </div>
    </div>
    <!-- Controls overlay (shown over game) -->
    <div id="controls-overlay" class="controls-overlay hidden">
        <div class="controls-overlay-inner">
            <div class="controls-overlay-header">
                <h2>CONTROLS</h2>
                <button id="btn-overlay-close" class="overlay-close-btn">&times;</button>
            </div>
            <div class="controls-overlay-body">
                <div class="controls-overlay-grid">
                    <div class="controls-section">
                        <h3>KEYBOARD ‚Äî P1</h3>
                        <div class="control-row"><span>Move</span><span class="control-key">A / D</span></div>
                        <div class="control-row"><span>Jump</span><span class="control-key">W</span></div>
                        <div class="control-row"><span>Crouch</span><span class="control-key">S</span></div>
                        <div class="control-row"><span>Light Attack</span><span class="control-key">J</span></div>
                        <div class="control-row"><span>Heavy Attack</span><span class="control-key">K</span></div>
                        <div class="control-row"><span>Special</span><span class="control-key">L</span></div>
                        <div class="control-row"><span>Grab</span><span class="control-key">U</span></div>
                        <div class="control-row"><span>Block</span><span class="control-key">I + back</span></div>
                        <div class="control-row"><span>Dash</span><span class="control-key">O</span></div>
                        <div class="control-row"><span>Taunt</span><span class="control-key">H</span></div>
                    </div>
                    <div class="controls-section">
                        <h3>KEYBOARD ‚Äî P2</h3>
                        <div class="control-row"><span>Move</span><span class="control-key">‚Üê / ‚Üí</span></div>
                        <div class="control-row"><span>Jump</span><span class="control-key">‚Üë</span></div>
                        <div class="control-row"><span>Crouch</span><span class="control-key">‚Üì</span></div>
                        <div class="control-row"><span>Light Attack</span><span class="control-key">Num 1</span></div>
                        <div class="control-row"><span>Heavy Attack</span><span class="control-key">Num 2</span></div>
                        <div class="control-row"><span>Special</span><span class="control-key">Num 3</span></div>
                        <div class="control-row"><span>Grab</span><span class="control-key">Num 5</span></div>
                        <div class="control-row"><span>Block</span><span class="control-key">Num 4 + back</span></div>
                        <div class="control-row"><span>Dash</span><span class="control-key">Num 6</span></div>
                        <div class="control-row"><span>Taunt</span><span class="control-key">Num 0</span></div>
                    </div>
                    <div class="controls-section">
                        <h3>XBOX / GAMEPAD</h3>
                        <div class="control-row"><span>Move</span><span class="control-key">Stick / D-Pad</span></div>
                        <div class="control-row"><span>Light Attack</span><span class="control-key">A</span></div>
                        <div class="control-row"><span>Heavy Attack</span><span class="control-key">B</span></div>
                        <div class="control-row"><span>Special</span><span class="control-key">X</span></div>
                        <div class="control-row"><span>Grab</span><span class="control-key">Y</span></div>
                        <div class="control-row"><span>Block</span><span class="control-key">LB</span></div>
                        <div class="control-row"><span>Dash</span><span class="control-key">RB</span></div>
                        <div class="control-row"><span>Taunt</span><span class="control-key">LT</span></div>
                        <div class="control-row"><span>Super</span><span class="control-key">RT</span></div>
                        <div class="control-row"><span>Pause</span><span class="control-key">Start</span></div>
                    </div>
                    <div class="controls-section">
                        <h3>COMBO & DEFENSE</h3>
                        <div style="font-size:13px;color:#999;line-height:1.7;">
                            <p><b style="color:#44bbff">Chain:</b> Light &rarr; Heavy &rarr; Special</p>
                            <p><b style="color:#ffaa00">Launcher:</b> Fwd + Heavy (air combo!)</p>
                            <p><b style="color:#ffaa00">Sweep:</b> Down + Heavy (low hit)</p>
                            <p><b style="color:#ff4444">Super:</b> RT / 2 bars meter</p>
                            <p><b style="color:#9b59b6">Counter-Hit:</b> Hit during startup = 1.5x</p>
                            <p><b style="color:#22dd66">Alpha Counter:</b> Special in blockstun (1 bar)</p>
                            <p><b style="color:#ff4444">Burst:</b> Grab in hitstun (3 bars)</p>
                            <p>Walk forward builds meter!</p>
                        </div>
                        <div style="margin-top:8px;padding-top:8px;border-top:1px solid #333;font-size:12px;color:#666;">
                            <p>F1 or ? button &mdash; toggle overlay</p>
                            <p>ESC &mdash; quit to main menu</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- ===== RESULTS SCREEN ===== -->
<div id="results-screen" class="screen">
    <div id="results-content"></div>
    <div class="nav-buttons" style="margin-top:25px;">
        <button id="btn-results-menu" class="btn btn-small">MAIN MENU</button>
        <button id="btn-rematch" class="btn btn-small btn-primary">REMATCH</button>
    </div>
</div>

<!-- ===== HIGH SCORES ===== -->
<div id="scores-screen" class="screen">
    <h2 class="select-header">HIGH SCORES</h2>
    <div id="scores-content"></div>
    <div class="nav-buttons">
        <button id="btn-scores-back" class="btn btn-small">BACK</button>
    </div>
</div>

<!-- ===== PROFILE & RANK ===== -->
<div id="profile-screen" class="screen">
    <h2 class="select-header">FIGHTER PROFILE</h2>
    <div id="profile-content"></div>
    <div class="nav-buttons">
        <button id="btn-profile-back" class="btn btn-small">BACK</button>
    </div>
</div>

<!-- ===== CONTROLS ===== -->
<div id="controls-screen" class="screen">
    <h2 class="select-header">CONTROLS</h2>
    <div class="controls-grid">
        <div class="controls-section">
            <h3>KEYBOARD ‚Äî PLAYER 1</h3>
            <div class="control-row"><span>Move Left/Right</span><span class="control-key">A / D</span></div>
            <div class="control-row"><span>Jump</span><span class="control-key">W</span></div>
            <div class="control-row"><span>Crouch</span><span class="control-key">S</span></div>
            <div class="control-row"><span>Light Attack</span><span class="control-key">J</span></div>
            <div class="control-row"><span>Heavy Attack</span><span class="control-key">K</span></div>
            <div class="control-row"><span>Special Attack</span><span class="control-key">L</span></div>
            <div class="control-row"><span>Grab</span><span class="control-key">U</span></div>
            <div class="control-row"><span>Block</span><span class="control-key">I + ‚Üê</span></div>
            <div class="control-row"><span>Dash</span><span class="control-key">O</span></div>
            <div class="control-row"><span>Taunt</span><span class="control-key">H</span></div>
        </div>
        <div class="controls-section">
            <h3>KEYBOARD ‚Äî PLAYER 2</h3>
            <div class="control-row"><span>Move Left/Right</span><span class="control-key">‚Üê / ‚Üí</span></div>
            <div class="control-row"><span>Jump</span><span class="control-key">‚Üë</span></div>
            <div class="control-row"><span>Crouch</span><span class="control-key">‚Üì</span></div>
            <div class="control-row"><span>Light Attack</span><span class="control-key">Num 1</span></div>
            <div class="control-row"><span>Heavy Attack</span><span class="control-key">Num 2</span></div>
            <div class="control-row"><span>Special Attack</span><span class="control-key">Num 3</span></div>
            <div class="control-row"><span>Grab</span><span class="control-key">Num 5</span></div>
            <div class="control-row"><span>Block</span><span class="control-key">Num 4 + ‚Üí</span></div>
            <div class="control-row"><span>Dash</span><span class="control-key">Num 6</span></div>
            <div class="control-row"><span>Taunt</span><span class="control-key">Num 0</span></div>
        </div>
        <div class="controls-section">
            <h3>XBOX CONTROLLER</h3>
            <div class="control-row"><span>Move</span><span class="control-key">Left Stick / D-Pad</span></div>
            <div class="control-row"><span>Jump</span><span class="control-key">‚Üë on stick/D-Pad</span></div>
            <div class="control-row"><span>Crouch</span><span class="control-key">‚Üì on stick/D-Pad</span></div>
            <div class="control-row"><span>Light Attack</span><span class="control-key">A Button</span></div>
            <div class="control-row"><span>Heavy Attack</span><span class="control-key">B Button</span></div>
            <div class="control-row"><span>Special Attack</span><span class="control-key">X Button</span></div>
            <div class="control-row"><span>Grab</span><span class="control-key">Y Button</span></div>
            <div class="control-row"><span>Block</span><span class="control-key">LB (Left Bumper)</span></div>
            <div class="control-row"><span>Dash</span><span class="control-key">RB (Right Bumper)</span></div>
            <div class="control-row"><span>Taunt</span><span class="control-key">LT (Left Trigger)</span></div>
            <div class="control-row"><span>Super</span><span class="control-key">RT (Right Trigger)</span></div>
            <div class="control-row"><span>Pause</span><span class="control-key">Start</span></div>
        </div>
        <div class="controls-section">
            <h3>COMBO SYSTEM</h3>
            <div style="font-size:14px;color:#888;line-height:1.8;">
                <p><span style="color:#44bbff;">‚ñ†</span> <b>Chain Combos:</b> Light ‚Üí Heavy ‚Üí Special</p>
                <p><span style="color:#ffaa00;">‚ñ†</span> <b>Launcher:</b> Forward + Heavy (sends them airborne)</p>
                <p><span style="color:#ffaa00;">‚ñ†</span> <b>Sweep:</b> Down + Heavy (low knockdown)</p>
                <p><span style="color:#ff4444;">‚ñ†</span> <b>Super:</b> RT / costs 2 bars for massive damage</p>
                <p><span style="color:#9b59b6;">‚ñ†</span> <b>Counter-Hit:</b> Hitting during startup = 1.5x damage!</p>
            </div>
        </div>
        <div class="controls-section">
            <h3>METER & DEFENSE</h3>
            <div style="font-size:14px;color:#888;line-height:1.8;">
                <p><span style="color:#22dd66;">‚ñ†</span> <b>3-Bar Meter:</b> Builds by attacking, getting hit, walking forward</p>
                <p><span style="color:#22dd66;">‚ñ†</span> <b>Special:</b> Costs ¬Ω bar (EX move)</p>
                <p><span style="color:#ffaa00;">‚ñ†</span> <b>Alpha Counter:</b> Special during blockstun (1 bar)</p>
                <p><span style="color:#ff4444;">‚ñ†</span> <b>Burst:</b> Grab during hitstun (3 bars ‚Äî escape combos)</p>
                <p><span style="color:#44bbff;">‚ñ†</span> <b>Auto-Block:</b> Walking backward blocks automatically</p>
                <p><span style="color:#ff4444;">‚ñ†</span> <b>Guard Crush:</b> Block too many hits ‚Üí stunned!</p>
                <p>‚Ä¢ Grabs beat blocking ‚Äî unblockable!</p>
                <p>‚Ä¢ Taunt builds meter but leaves you open</p>
                <p>‚Ä¢ Walk forward to build meter (reward aggression)</p>
            </div>
        </div>
    </div>
    <div class="nav-buttons">
        <button id="btn-controls-back" class="btn btn-small">BACK</button>
    </div>
</div>

<!-- ===== ONLINE LOBBY ===== -->
<div id="online-lobby-screen" class="screen">
    <h2 class="select-header">ONLINE BATTLE</h2>
    <div class="online-lobby-layout">
        <div class="online-content">
            <div class="fighter-name-row">
                <label for="fighter-name-input">YOUR FIGHTER NAME</label>
                <input id="fighter-name-input" type="text" maxlength="20" placeholder="Fighter_0000" autocomplete="off">
            </div>
            <p style="color:#888;margin-bottom:20px;">Create a room or join with a code to fight online.</p>
            <button id="btn-create-room" class="btn btn-primary" style="margin-bottom:20px;">CREATE ROOM</button>
            <div style="color:#555;margin:10px 0;">‚Äî OR ‚Äî</div>
            <input id="room-code-input" type="text" maxlength="6" placeholder="ROOM CODE" autocomplete="off">
            <br>
            <button id="btn-join-room" class="btn btn-gold" style="margin-top:10px;">JOIN ROOM</button>
            <div id="online-status"></div>
            <div class="nav-buttons">
                <button id="btn-online-back" class="btn btn-small">BACK</button>
            </div>
        </div>
        <!-- Inline players-online for the lobby -->
        <div class="lobby-players-panel">
            <div class="lobby-players-header">
                <span>&#x26A1;</span>
                <span>PLAYERS ONLINE</span>
                <span id="lobby-players-count" class="players-online-count">0</span>
            </div>
            <div id="lobby-players-list" class="lobby-players-list">
                <div class="players-online-empty">No players online</div>
            </div>
        </div>
    </div>
</div>

<!-- ===== PLAYERS ONLINE FLOATING PANEL (visible on title/mode screens) ===== -->
<div id="players-online-panel" class="players-online-panel">
    <div class="players-online-header" id="players-online-toggle">
        <span class="players-online-icon">&#x26A1;</span>
        <span>ONLINE</span>
        <span id="players-online-count" class="players-online-count">0</span>
        <span class="players-online-chevron" id="players-online-chevron">&#x25B2;</span>
    </div>
    <div id="players-online-list" class="players-online-list">
        <div class="players-online-empty">No players online</div>
    </div>
</div>

<!-- ===== SOUND TOGGLE (always visible) ===== -->
<button id="btn-sound-toggle" class="btn-sound" title="Toggle Sound (M)" aria-label="Toggle Sound">
    <span id="sound-icon">&#x1F50A;</span>
</button>

<!-- ===== SCRIPTS ===== -->
<script src="js/data.js"></script>
<script src="js/audio.js"></script>
<script src="js/engine.js"></script>
<script src="js/renderer.js"></script>
<script src="js/app.js"></script>

</body>
</html>
