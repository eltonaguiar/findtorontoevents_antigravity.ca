<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>GOLDMINE_WS | Windsurf AI Prediction Proof Tracker</title>
<meta name="description" content="GOLDMINE_WINDSURF — Consolidated proof tracker across all prediction systems: crypto, meme coins, stocks, sports betting, forex, mutual funds.">
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
<style>
:root{--bg:#050510;--bg2:#0a0a1e;--bg3:#10102a;--surface:#0e0e24;--border:#1a1a40;--border-h:#2a2a60;--text:#e4e4f8;--dim:#7a7aa8;--dim2:#55557a;--green:#22c55e;--green-d:rgba(34,197,94,0.12);--red:#ef4444;--red-d:rgba(239,68,68,0.10);--gold:#f59e0b;--gold-d:rgba(245,158,11,0.10);--blue:#3b82f6;--blue-d:rgba(59,130,246,0.10);--purple:#a855f7;--purple-d:rgba(168,85,247,0.10);--cyan:#06b6d4;--cyan-d:rgba(6,182,212,0.10);--orange:#f97316;--orange-d:rgba(249,115,22,0.10);--pink:#ec4899;--r:14px;--glow-gold:rgba(245,158,11,0.15)}
*{margin:0;padding:0;box-sizing:border-box}
html{scroll-behavior:smooth}
body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;background:var(--bg);color:var(--text);min-height:100vh;line-height:1.5}
a{color:var(--gold);text-decoration:none}a:hover{text-decoration:underline}
.bg-glow{position:fixed;top:0;left:0;width:100%;height:100%;z-index:0;pointer-events:none;background:radial-gradient(ellipse 800px 500px at 20% 15%,rgba(245,158,11,0.06),transparent),radial-gradient(ellipse 600px 400px at 80% 60%,rgba(34,197,94,0.04),transparent),radial-gradient(ellipse 500px 300px at 50% 90%,rgba(99,102,241,0.03),transparent)}

/* Header */
.header{position:sticky;top:0;z-index:100;background:rgba(5,5,16,0.92);backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px);border-bottom:1px solid var(--border);padding:0 2rem;display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:0.5rem;height:56px}
.header-left{display:flex;align-items:center;gap:1rem}
.header-brand{font-size:1.15rem;font-weight:900;background:linear-gradient(135deg,#f59e0b,#fbbf24,#22c55e);-webkit-background-clip:text;-webkit-text-fill-color:transparent;white-space:nowrap;letter-spacing:0.5px}
.header-sub{font-size:0.65rem;color:var(--dim);text-transform:uppercase;letter-spacing:2px;margin-left:0.5rem}
.header-nav{display:flex;gap:1rem;font-size:0.8rem;flex-wrap:wrap}
.header-nav a{color:var(--dim);transition:color 0.2s}
.header-nav a:hover{color:var(--text);text-decoration:none}

/* Pulse dot */
.pulse-dot{width:8px;height:8px;border-radius:50%;background:var(--green);display:inline-block;margin-right:6px;animation:pulse 2s infinite}
@keyframes pulse{0%,100%{box-shadow:0 0 0 0 rgba(34,197,94,0.5)}50%{box-shadow:0 0 0 6px rgba(34,197,94,0)}}

/* Container */
.container{position:relative;z-index:5;max-width:1440px;margin:0 auto;padding:1.5rem}

/* Hero banner */
.hero-banner{background:linear-gradient(135deg,#0f0f2a 0%,#1a0f30 40%,#0f1a20 100%);border:1px solid var(--border);border-radius:var(--r);padding:2rem 2.5rem;margin-bottom:1.5rem;position:relative;overflow:hidden}
.hero-banner::before{content:'';position:absolute;top:0;left:0;right:0;height:3px;background:linear-gradient(90deg,var(--gold),var(--green),var(--blue),var(--purple))}
.hero-banner h1{font-size:1.8rem;font-weight:900;background:linear-gradient(135deg,#fbbf24,#f59e0b,#22c55e);-webkit-background-clip:text;-webkit-text-fill-color:transparent;margin-bottom:0.3rem}
.hero-banner .sub{color:var(--dim);font-size:0.9rem}
.hero-banner .updated{position:absolute;top:1rem;right:1.5rem;font-size:0.7rem;color:var(--dim2)}

/* Tabs */
.tab-bar{display:flex;gap:0;border:1px solid var(--border);border-radius:10px;overflow:hidden;margin-bottom:1.5rem;flex-wrap:wrap}
.tab-btn{flex:1;min-width:120px;background:var(--bg2);color:var(--dim);border:none;padding:10px 12px;font-size:0.78rem;cursor:pointer;text-align:center;transition:all 0.15s;font-weight:600;white-space:nowrap}
.tab-btn:not(:last-child){border-right:1px solid var(--border)}
.tab-btn.active{background:var(--gold);color:#000;font-weight:700}
.tab-btn:hover:not(.active){background:var(--bg3);color:var(--text)}
.tab-panel{display:none}.tab-panel.active{display:block}

/* KPI row */
.kpi-row{display:grid;grid-template-columns:repeat(auto-fit,minmax(170px,1fr));gap:0.8rem;margin-bottom:1.5rem}
.kpi{background:var(--surface);border:1px solid var(--border);border-radius:var(--r);padding:1rem;text-align:center;transition:border-color 0.2s}
.kpi:hover{border-color:var(--border-h)}
.kpi .label{font-size:0.65rem;color:var(--dim);text-transform:uppercase;letter-spacing:1px}
.kpi .value{font-size:1.6rem;font-weight:800;margin-top:2px}
.kpi .sub{font-size:0.7rem;color:var(--dim);margin-top:2px}
.v-green{color:var(--green)}.v-red{color:var(--red)}.v-gold{color:var(--gold)}.v-blue{color:var(--blue)}.v-purple{color:var(--purple)}.v-cyan{color:var(--cyan)}

/* Section */
.section{margin-bottom:2rem}
.section-head{display:flex;align-items:center;gap:0.6rem;margin-bottom:1rem;padding-bottom:0.5rem;border-bottom:1px solid var(--border)}
.section-head h2{font-size:1.05rem;font-weight:700}
.section-head .badge{font-size:0.6rem;padding:2px 8px;border-radius:20px;font-weight:700;text-transform:uppercase;letter-spacing:0.5px}
.badge-live{background:var(--green-d);color:var(--green)}
.badge-warn{background:var(--gold-d);color:var(--gold)}
.badge-dead{background:var(--red-d);color:var(--red)}
.badge-info{background:var(--blue-d);color:var(--blue)}

/* Tables */
.tbl-wrap{overflow-x:auto;border:1px solid var(--border);border-radius:var(--r);margin-bottom:1rem}
table{width:100%;border-collapse:collapse;font-size:0.78rem}
thead th{background:var(--bg3);color:var(--dim);text-transform:uppercase;font-size:0.65rem;letter-spacing:0.5px;padding:10px 12px;text-align:left;white-space:nowrap;position:sticky;top:0}
tbody tr{border-top:1px solid rgba(255,255,255,0.04)}
tbody tr:hover{background:rgba(255,255,255,0.02)}
td{padding:8px 12px;white-space:nowrap}
td.wrap{white-space:normal;max-width:200px}

/* Status indicators */
.status-pill{display:inline-block;padding:2px 8px;border-radius:4px;font-size:0.65rem;font-weight:700;text-transform:uppercase}
.pill-win{background:var(--green-d);color:var(--green)}
.pill-loss{background:var(--red-d);color:var(--red)}
.pill-pending{background:rgba(255,255,255,0.06);color:var(--dim)}
.pill-active{background:var(--blue-d);color:var(--blue)}
.pill-dead{background:var(--red-d);color:var(--red)}
.pill-healthy{background:var(--green-d);color:var(--green)}
.pill-stale{background:var(--gold-d);color:var(--gold)}

/* Cards grid */
.cards-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(320px,1fr));gap:1rem;margin-bottom:1.5rem}
.sys-card{background:var(--surface);border:1px solid var(--border);border-radius:var(--r);padding:1.2rem;transition:all 0.2s;position:relative;overflow:hidden}
.sys-card:hover{border-color:var(--gold);transform:translateY(-2px);box-shadow:0 8px 30px rgba(0,0,0,0.3)}
.sys-card::before{content:'';position:absolute;top:0;left:0;right:0;height:3px}
.sys-card.crypto::before{background:linear-gradient(90deg,var(--orange),var(--gold))}
.sys-card.meme::before{background:linear-gradient(90deg,var(--pink),var(--purple))}
.sys-card.stocks::before{background:linear-gradient(90deg,var(--green),var(--blue))}
.sys-card.miracle::before{background:linear-gradient(90deg,var(--gold),var(--green))}
.sys-card.sports::before{background:linear-gradient(90deg,var(--cyan),var(--blue))}
.sys-card.forex::before{background:linear-gradient(90deg,var(--orange),var(--cyan))}
.sys-card.funds::before{background:linear-gradient(90deg,var(--purple),var(--blue))}
.sys-card.live::before{background:linear-gradient(90deg,var(--blue),var(--purple))}
.sys-card.alpha::before{background:linear-gradient(90deg,#ff6b6b,#ffd93d,#6bcb77)}
.sys-card .card-title{font-size:1rem;font-weight:700;margin-bottom:0.5rem;display:flex;align-items:center;gap:0.5rem}
.sys-card .card-title .icon{font-size:1.2rem}
.sys-card .card-stats{display:grid;grid-template-columns:repeat(3,1fr);gap:0.5rem;margin-bottom:0.6rem}
.sys-card .cs{text-align:center}
.sys-card .cs .cs-val{font-size:1.1rem;font-weight:700}
.sys-card .cs .cs-lbl{font-size:0.6rem;color:var(--dim);text-transform:uppercase;letter-spacing:0.5px}
.sys-card .card-meta{font-size:0.7rem;color:var(--dim);display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:0.3rem}
.sys-card .card-link{display:inline-block;margin-top:0.6rem;padding:4px 12px;border-radius:6px;font-size:0.72rem;font-weight:600;background:var(--gold);color:#000;transition:all 0.2s}
.sys-card .card-link:hover{background:#fbbf24;text-decoration:none;box-shadow:0 0 15px var(--glow-gold)}

/* Chart box */
.chart-box{background:var(--surface);border:1px solid var(--border);border-radius:var(--r);padding:1.2rem;margin-bottom:1.5rem}
.chart-box h3{font-size:0.85rem;color:var(--dim);margin-bottom:0.8rem}
canvas{max-height:300px}

/* Dead data alert */
.alert-bar{border-radius:var(--r);padding:0.8rem 1.2rem;margin-bottom:1rem;font-size:0.8rem;display:flex;align-items:center;gap:0.6rem}
.alert-bar.critical{background:var(--red-d);border:1px solid rgba(239,68,68,0.3);color:#fca5a5}
.alert-bar.warning{background:var(--gold-d);border:1px solid rgba(245,158,11,0.3);color:#fde68a}
.alert-bar.info{background:var(--blue-d);border:1px solid rgba(59,130,246,0.3);color:#93c5fd}
.alert-bar strong{color:#fff}

/* Loading */
.loading{text-align:center;padding:2rem;color:var(--dim);font-size:0.85rem}
.spin{display:inline-block;width:16px;height:16px;border:2px solid var(--dim2);border-top-color:var(--gold);border-radius:50%;animation:spin 0.8s linear infinite;margin-right:6px;vertical-align:middle}
@keyframes spin{to{transform:rotate(360deg)}}

/* Footer */
.footer{text-align:center;padding:2rem;color:var(--dim2);font-size:0.72rem;border-top:1px solid var(--border);margin-top:2rem;line-height:1.6}

/* Responsive */
@media(max-width:768px){
.container{padding:1rem}
.hero-banner{padding:1.5rem}
.hero-banner h1{font-size:1.3rem}
.kpi-row{grid-template-columns:repeat(2,1fr)}
.cards-grid{grid-template-columns:1fr}
.tab-btn{min-width:80px;font-size:0.7rem;padding:8px 6px}
.header{padding:0 1rem;height:auto;padding-top:0.5rem;padding-bottom:0.5rem}
}
</style>
</head>
<body>
<div class="bg-glow"></div>

<div class="header">
  <div class="header-left">
    <span class="header-brand">GOLDMINE_WS</span>
    <span class="header-sub">Windsurf AI</span>
  </div>
  <nav class="header-nav">
    <a href="/investments/">Investment Hub</a>
    <a href="/findcryptopairs/winners.html">Crypto</a>
    <a href="/findcryptopairs/meme.html">Meme</a>
    <a href="/findstocks/portfolio2/consolidated.html">Stocks</a>
    <a href="/live-monitor/sports-betting.html">Sports</a>
    <a href="/live-monitor/live-monitor.html">Live Monitor</a>
    <a href="/">Home</a>
  </nav>
</div>

<div class="container">

  <!-- Hero -->
  <div class="hero-banner">
    <h1>GOLDMINE_WINDSURF</h1>
    <div class="sub">Consolidated Proof Tracker &mdash; All Prediction Systems, One Dashboard</div>
    <div class="updated"><span class="pulse-dot"></span> Last refresh: <span id="last-refresh">loading...</span></div>
  </div>

  <!-- Dead Data Alerts -->
  <div id="alerts-container">
    <div class="alert-bar critical"><strong>CAN SLIM:</strong> 0 picks imported &mdash; our highest-confidence stock methodology (60-70% proven) is completely idle. Import picks to activate.</div>
    <div class="alert-bar critical"><strong>ML Ensemble:</strong> 0 picks imported &mdash; most sophisticated ML system has no data flowing.</div>
    <div class="alert-bar warning"><strong>Blue Chip Growth (tight rules):</strong> TP=10/SL=5/30d showing -29.89% return, 36.54% win rate. Parameters need widening.</div>
    <div class="alert-bar warning"><strong>Technical Momentum:</strong> Only 12 trades &mdash; statistically meaningless. Need 100+ for significance.</div>
    <div class="alert-bar info"><strong>Tip:</strong> Systems with 100+ resolved signals and p &lt; 0.05 are marked as statistically significant. Focus on those.</div>
  </div>

  <!-- Master KPIs -->
  <div class="kpi-row">
    <div class="kpi"><div class="label">Total Systems</div><div class="value v-gold" id="kpi-systems">9</div><div class="sub">Prediction engines</div></div>
    <div class="kpi"><div class="label">Active Workflows</div><div class="value v-green" id="kpi-workflows">15</div><div class="sub">GitHub Actions</div></div>
    <div class="kpi"><div class="label">API Endpoints</div><div class="value v-blue" id="kpi-endpoints">119</div><div class="sub">PHP backends</div></div>
    <div class="kpi"><div class="label">Scan Frequency</div><div class="value v-purple" id="kpi-freq">10m</div><div class="sub">Fastest (meme)</div></div>
    <div class="kpi"><div class="label">Assets Tracked</div><div class="value v-cyan" id="kpi-assets">636+</div><div class="sub">Crypto+Stocks+Forex</div></div>
    <div class="kpi"><div class="label">Best System</div><div class="value v-green" id="kpi-best">---</div><div class="sub" id="kpi-best-sub">Loading...</div></div>
  </div>

  <!-- Tabs -->
  <div class="tab-bar">
    <button class="tab-btn active" onclick="showTab('overview')">Overview</button>
    <button class="tab-btn" onclick="showTab('leaderboard')">Leaderboard</button>
    <button class="tab-btn" onclick="showTab('crypto')">Crypto</button>
    <button class="tab-btn" onclick="showTab('meme')">Meme Coins</button>
    <button class="tab-btn" onclick="showTab('stocks')">Stocks</button>
    <button class="tab-btn" onclick="showTab('sports')">Sports</button>
    <button class="tab-btn" onclick="showTab('health')">System Health</button>
    <button class="tab-btn" onclick="showTab('proof')">Proof Log</button>
  </div>

  <!-- ═══════════════════════════════════════════════════════════ -->
  <!-- TAB: OVERVIEW -->
  <!-- ═══════════════════════════════════════════════════════════ -->
  <div class="tab-panel active" id="tab-overview">
    <div class="section">
      <div class="section-head"><h2>System Cards &mdash; Live Performance</h2><span class="badge badge-live">LIVE</span></div>
      <div class="cards-grid" id="system-cards">
        <!-- Populated by JS -->
        <div class="loading"><span class="spin"></span> Loading system data...</div>
      </div>
    </div>

    <div class="chart-box">
      <h3>Win Rate Comparison &mdash; All Systems</h3>
      <canvas id="chart-winrate"></canvas>
    </div>

    <div class="section">
      <div class="section-head"><h2>Pro Benchmark Comparison</h2><span class="badge badge-info">TARGETS</span></div>
      <div class="tbl-wrap">
        <table>
          <thead><tr><th>Metric</th><th>Amateur</th><th>Semi-Pro</th><th>Pro</th><th>Elite</th><th>Our Target (6mo)</th></tr></thead>
          <tbody>
            <tr><td><strong>Annual Return</strong></td><td>5-10%</td><td>10-20%</td><td>20-40%</td><td>40-66%</td><td class="v-gold">15-25%</td></tr>
            <tr><td><strong>Sharpe Ratio</strong></td><td>0.3-0.5</td><td>0.5-1.0</td><td>1.0-2.0</td><td>2.0-6.0</td><td class="v-gold">1.0+</td></tr>
            <tr><td><strong>Max Drawdown</strong></td><td>30-50%</td><td>15-30%</td><td>5-15%</td><td>1-5%</td><td class="v-gold">&lt;15%</td></tr>
            <tr><td><strong>Win Rate</strong></td><td>45-50%</td><td>50-55%</td><td>55-65%</td><td>65-75%</td><td class="v-gold">58%+</td></tr>
            <tr><td><strong>Profit Factor</strong></td><td>0.8-1.2</td><td>1.2-1.5</td><td>1.5-2.5</td><td>2.5-5.0</td><td class="v-gold">1.8+</td></tr>
            <tr><td><strong>OOS Validation</strong></td><td>None</td><td>Basic</td><td>Walk-forward</td><td>Purged CV + MC</td><td class="v-gold">Walk-forward</td></tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- ═══════════════════════════════════════════════════════════ -->
  <!-- TAB: LEADERBOARD -->
  <!-- ═══════════════════════════════════════════════════════════ -->
  <div class="tab-panel" id="tab-leaderboard">
    <div class="section">
      <div class="section-head"><h2>System Leaderboard &mdash; Ranked by Proof Score</h2><span class="badge badge-live">AUTO-RANKED</span></div>
      <p style="font-size:0.78rem;color:var(--dim);margin-bottom:1rem">Proof Score = (Win Rate &times; 0.3) + (Profit Factor &times; 20) + (Signal Count bonus) + (Statistical Significance bonus). Systems with &lt;30 signals are unranked.</p>
      <div class="tbl-wrap">
        <table id="leaderboard-table">
          <thead><tr><th>#</th><th>System</th><th>Signals</th><th>Resolved</th><th>Win Rate</th><th>Avg P&L</th><th>Profit Factor</th><th>Stat. Sig?</th><th>Proof Score</th><th>Verdict</th></tr></thead>
          <tbody id="leaderboard-body">
            <tr><td colspan="10" class="loading"><span class="spin"></span> Loading leaderboard...</td></tr>
          </tbody>
        </table>
      </div>
    </div>

    <div class="chart-box">
      <h3>Proof Score Ranking</h3>
      <canvas id="chart-proof"></canvas>
    </div>
  </div>

  <!-- ═══════════════════════════════════════════════════════════ -->
  <!-- TAB: CRYPTO -->
  <!-- ═══════════════════════════════════════════════════════════ -->
  <div class="tab-panel" id="tab-crypto">
    <div class="section">
      <div class="section-head"><h2>Crypto Winner Scanner &mdash; 600+ Pairs</h2><span class="badge badge-live">EVERY 15 MIN</span></div>
      <div class="kpi-row" id="crypto-kpis">
        <div class="kpi"><div class="label">Win Rate</div><div class="value v-green" id="c-wr">--</div><div class="sub">Resolved signals</div></div>
        <div class="kpi"><div class="label">Avg P&L</div><div class="value" id="c-pnl">--</div><div class="sub">Per signal</div></div>
        <div class="kpi"><div class="label">Total Signals</div><div class="value v-blue" id="c-total">--</div><div class="sub" id="c-resolved">--</div></div>
        <div class="kpi"><div class="label">Best Trade</div><div class="value v-green" id="c-best">--</div><div class="sub" id="c-worst">--</div></div>
        <div class="kpi"><div class="label">Unique Pairs</div><div class="value v-cyan" id="c-pairs">--</div><div class="sub" id="c-scans">--</div></div>
        <div class="kpi"><div class="label">Last Scan</div><div class="value" id="c-last" style="font-size:0.85rem">--</div><div class="sub" id="c-first">--</div></div>
      </div>
    </div>
    <div class="section">
      <div class="section-head"><h2>Current Winners</h2><span class="badge badge-live" id="c-winner-count">--</span></div>
      <div class="tbl-wrap"><table><thead><tr><th>Pair</th><th>Score</th><th>Verdict</th><th>Entry</th><th>Target</th><th>Risk</th><th>24h Change</th><th>Volume</th><th>Signal Time</th></tr></thead><tbody id="crypto-winners-body"><tr><td colspan="9" class="loading"><span class="spin"></span> Loading...</td></tr></tbody></table></div>
    </div>
    <div class="section">
      <div class="section-head"><h2>Recent Signal History</h2></div>
      <div class="tbl-wrap"><table><thead><tr><th>Pair</th><th>Score</th><th>Verdict</th><th>Entry</th><th>Outcome</th><th>P&L %</th><th>Signal Time</th><th>Resolved</th></tr></thead><tbody id="crypto-history-body"><tr><td colspan="8" class="loading"><span class="spin"></span> Loading...</td></tr></tbody></table></div>
    </div>
  </div>

  <!-- ═══════════════════════════════════════════════════════════ -->
  <!-- TAB: MEME -->
  <!-- ═══════════════════════════════════════════════════════════ -->
  <div class="tab-panel" id="tab-meme">
    <div class="section">
      <div class="section-head"><h2>Meme Coin Scanner &mdash; Tier 1 + Tier 2</h2><span class="badge badge-live">EVERY 10 MIN</span></div>
      <div class="kpi-row" id="meme-kpis">
        <div class="kpi"><div class="label">Win Rate</div><div class="value v-green" id="m-wr">--</div><div class="sub">Resolved signals</div></div>
        <div class="kpi"><div class="label">Avg P&L</div><div class="value" id="m-pnl">--</div><div class="sub">Per signal</div></div>
        <div class="kpi"><div class="label">Total Signals</div><div class="value v-purple" id="m-total">--</div><div class="sub" id="m-resolved">--</div></div>
        <div class="kpi"><div class="label">Best Trade</div><div class="value v-green" id="m-best">--</div><div class="sub" id="m-worst">--</div></div>
        <div class="kpi"><div class="label">Active Memes</div><div class="value v-pink" id="m-pairs">--</div><div class="sub" id="m-scans">--</div></div>
        <div class="kpi"><div class="label">Last Scan</div><div class="value" id="m-last" style="font-size:0.85rem">--</div><div class="sub" id="m-first">--</div></div>
      </div>
    </div>
    <div class="section">
      <div class="section-head"><h2>Current Meme Winners</h2><span class="badge badge-live" id="m-winner-count">--</span></div>
      <div class="tbl-wrap"><table><thead><tr><th>Pair</th><th>Tier</th><th>Score</th><th>Verdict</th><th>Entry</th><th>Target</th><th>Risk</th><th>24h Change</th><th>Signal Time</th></tr></thead><tbody id="meme-winners-body"><tr><td colspan="9" class="loading"><span class="spin"></span> Loading...</td></tr></tbody></table></div>
    </div>
    <div class="section">
      <div class="section-head"><h2>Recent Meme History</h2></div>
      <div class="tbl-wrap"><table><thead><tr><th>Pair</th><th>Tier</th><th>Score</th><th>Outcome</th><th>P&L %</th><th>Signal Time</th><th>Resolved</th></tr></thead><tbody id="meme-history-body"><tr><td colspan="7" class="loading"><span class="spin"></span> Loading...</td></tr></tbody></table></div>
    </div>
  </div>

  <!-- ═══════════════════════════════════════════════════════════ -->
  <!-- TAB: STOCKS -->
  <!-- ═══════════════════════════════════════════════════════════ -->
  <div class="tab-panel" id="tab-stocks">
    <div class="section">
      <div class="section-head"><h2>Stock Prediction Systems</h2><span class="badge badge-warn">MIXED</span></div>
      <div class="kpi-row">
        <div class="kpi"><div class="label">Miracle Claude</div><div class="value v-gold" id="s-miracle2-wr">--</div><div class="sub">Win rate</div></div>
        <div class="kpi"><div class="label">Miracle Cursor</div><div class="value v-green" id="s-miracle3-wr">--</div><div class="sub">Win rate</div></div>
        <div class="kpi"><div class="label">Blue Chip (hold)</div><div class="value v-green">60.6%</div><div class="sub">350 trades</div></div>
        <div class="kpi"><div class="label">Blue Chip (tight)</div><div class="value v-red">36.5%</div><div class="sub">312 trades, LOSING</div></div>
        <div class="kpi"><div class="label">CAN SLIM</div><div class="value v-red">N/A</div><div class="sub">0 picks imported</div></div>
        <div class="kpi"><div class="label">ML Ensemble</div><div class="value v-red">N/A</div><div class="sub">0 picks imported</div></div>
      </div>
    </div>
    <div class="section">
      <div class="section-head"><h2>Miracle Claude &mdash; Recent Picks</h2><span class="badge badge-live">DAILY</span></div>
      <div class="tbl-wrap"><table><thead><tr><th>Ticker</th><th>Company</th><th>Score</th><th>Confidence</th><th>Entry</th><th>Target</th><th>Stop</th><th>CDR?</th><th>Outcome</th><th>P&L %</th><th>Date</th></tr></thead><tbody id="miracle2-body"><tr><td colspan="11" class="loading"><span class="spin"></span> Loading...</td></tr></tbody></table></div>
    </div>
    <div class="section">
      <div class="section-head"><h2>Miracle Cursor &mdash; Recent Picks</h2><span class="badge badge-live">DAILY</span></div>
      <div class="tbl-wrap"><table><thead><tr><th>Ticker</th><th>Company</th><th>Score</th><th>Confidence</th><th>Entry</th><th>Target</th><th>Stop</th><th>CDR?</th><th>Outcome</th><th>P&L %</th><th>Date</th></tr></thead><tbody id="miracle3-body"><tr><td colspan="11" class="loading"><span class="spin"></span> Loading...</td></tr></tbody></table></div>
    </div>
    <div class="section">
      <div class="section-head"><h2>Stock Algorithm Comparison</h2></div>
      <div class="tbl-wrap">
        <table>
          <thead><tr><th>Algorithm</th><th>Strategy</th><th>Trades</th><th>Win Rate</th><th>Return %</th><th>Sharpe</th><th>Max DD</th><th>Profit Factor</th><th>Status</th></tr></thead>
          <tbody>
            <tr><td><strong>Blue Chip Growth</strong></td><td>Buy & Hold</td><td>350</td><td class="v-green">60.57%</td><td class="v-green">+1648%</td><td>0.37</td><td>9.3%</td><td>2.90</td><td><span class="status-pill pill-win">PROFITABLE</span></td></tr>
            <tr><td><strong>Blue Chip Growth</strong></td><td>TP=10/SL=5/30d</td><td>312</td><td class="v-red">36.54%</td><td class="v-red">-29.89%</td><td>-0.22</td><td>35.2%</td><td>0.60</td><td><span class="status-pill pill-loss">LOSING</span></td></tr>
            <tr><td><strong>Technical Momentum</strong></td><td>TP=10/SL=5/30d</td><td>12</td><td class="v-red">25%</td><td class="v-red">-2.84%</td><td>-0.39</td><td>3.5%</td><td>0.39</td><td><span class="status-pill pill-stale">TOO FEW</span></td></tr>
            <tr><td><strong>CAN SLIM</strong></td><td>&mdash;</td><td>0</td><td>&mdash;</td><td>&mdash;</td><td>&mdash;</td><td>&mdash;</td><td>&mdash;</td><td><span class="status-pill pill-dead">NO DATA</span></td></tr>
            <tr><td><strong>ML Ensemble</strong></td><td>&mdash;</td><td>0</td><td>&mdash;</td><td>&mdash;</td><td>&mdash;</td><td>&mdash;</td><td>&mdash;</td><td><span class="status-pill pill-dead">NO DATA</span></td></tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- ═══════════════════════════════════════════════════════════ -->
  <!-- TAB: SPORTS -->
  <!-- ═══════════════════════════════════════════════════════════ -->
  <div class="tab-panel" id="tab-sports">
    <div class="section">
      <div class="section-head"><h2>Sports Betting &mdash; EV Value Finder</h2><span class="badge badge-live">5x DAILY</span></div>
      <div class="kpi-row" id="sports-kpis">
        <div class="kpi"><div class="label">Win Rate</div><div class="value v-green" id="sp-wr">--</div><div class="sub">All picks</div></div>
        <div class="kpi"><div class="label">Total P&L</div><div class="value" id="sp-pnl">--</div><div class="sub">Cumulative</div></div>
        <div class="kpi"><div class="label">Total Picks</div><div class="value v-blue" id="sp-total">--</div><div class="sub" id="sp-resolved">--</div></div>
        <div class="kpi"><div class="label">Avg EV</div><div class="value v-gold" id="sp-ev">--</div><div class="sub">Expected value</div></div>
        <div class="kpi"><div class="label">Active Sports</div><div class="value v-cyan" id="sp-sports">--</div><div class="sub">NHL, NBA, etc.</div></div>
        <div class="kpi"><div class="label">Last Refresh</div><div class="value" id="sp-last" style="font-size:0.85rem">--</div><div class="sub">Odds update</div></div>
      </div>
    </div>
    <div class="section">
      <div class="section-head"><h2>Today's Picks</h2></div>
      <div class="tbl-wrap"><table><thead><tr><th>Sport</th><th>Event</th><th>Market</th><th>Pick</th><th>Book</th><th>Odds</th><th>EV %</th><th>Confidence</th><th>Result</th></tr></thead><tbody id="sports-picks-body"><tr><td colspan="9" class="loading"><span class="spin"></span> Loading...</td></tr></tbody></table></div>
    </div>
    <div class="section">
      <div class="section-head"><h2>Performance by Sport</h2></div>
      <div class="tbl-wrap"><table><thead><tr><th>Sport</th><th>Picks</th><th>Wins</th><th>Win Rate</th><th>P&L</th></tr></thead><tbody id="sports-bysport-body"><tr><td colspan="5" class="loading"><span class="spin"></span> Loading...</td></tr></tbody></table></div>
    </div>
  </div>

  <!-- ═══════════════════════════════════════════════════════════ -->
  <!-- TAB: SYSTEM HEALTH -->
  <!-- ═══════════════════════════════════════════════════════════ -->
  <div class="tab-panel" id="tab-health">
    <div class="section">
      <div class="section-head"><h2>System Health &mdash; Dead Data Detector</h2><span class="badge badge-warn">AUDIT</span></div>
      <div class="tbl-wrap">
        <table>
          <thead><tr><th>System</th><th>Automation</th><th>Frequency</th><th>Last Known Activity</th><th>Data Status</th><th>Action Needed</th></tr></thead>
          <tbody>
            <tr><td><strong>Crypto Scanner</strong></td><td>crypto-winner-scan.yml</td><td>Every 15 min</td><td id="h-crypto-last">Checking...</td><td><span class="status-pill pill-healthy" id="h-crypto-status">HEALTHY</span></td><td>None</td></tr>
            <tr><td><strong>Meme Scanner</strong></td><td>meme-scanner.yml</td><td>Every 10 min</td><td id="h-meme-last">Checking...</td><td><span class="status-pill pill-healthy" id="h-meme-status">HEALTHY</span></td><td>None</td></tr>
            <tr><td><strong>Live Monitor</strong></td><td>live-monitor-refresh.yml</td><td>Every 30 min</td><td id="h-live-last">Checking...</td><td><span class="status-pill pill-healthy" id="h-live-status">HEALTHY</span></td><td>None</td></tr>
            <tr><td><strong>Sports Betting</strong></td><td>sports-betting-refresh.yml</td><td>5x daily</td><td id="h-sports-last">Checking...</td><td><span class="status-pill pill-healthy" id="h-sports-status">HEALTHY</span></td><td>None</td></tr>
            <tr><td><strong>Daily Stock Refresh</strong></td><td>daily-stock-refresh.yml</td><td>2x daily (weekdays)</td><td id="h-stocks-last">Checking...</td><td><span class="status-pill pill-healthy" id="h-stocks-status">HEALTHY</span></td><td>None</td></tr>
            <tr><td><strong>Miracle DayTrades</strong></td><td>daily-miracle-scan.yml</td><td>Daily after close</td><td id="h-miracle-last">Checking...</td><td><span class="status-pill pill-healthy" id="h-miracle-status">HEALTHY</span></td><td>None</td></tr>
            <tr><td><strong>Mutual Fund Refresh</strong></td><td>daily-mutualfund-refresh.yml</td><td>2x daily (weekdays)</td><td id="h-mf-last">Checking...</td><td><span class="status-pill pill-healthy" id="h-mf-status">HEALTHY</span></td><td>None</td></tr>
            <tr><td><strong>Alpha Engine</strong></td><td>alpha-engine-daily-picks.yml</td><td>Daily + Sunday</td><td id="h-alpha-last">Checking...</td><td><span class="status-pill pill-healthy" id="h-alpha-status">HEALTHY</span></td><td>None</td></tr>
            <tr><td><strong>CAN SLIM Import</strong></td><td>&mdash;</td><td>&mdash;</td><td>Never</td><td><span class="status-pill pill-dead">DEAD</span></td><td class="v-red"><strong>Import picks immediately</strong></td></tr>
            <tr><td><strong>ML Ensemble Import</strong></td><td>&mdash;</td><td>&mdash;</td><td>Never</td><td><span class="status-pill pill-dead">DEAD</span></td><td class="v-red"><strong>Import picks immediately</strong></td></tr>
          </tbody>
        </table>
      </div>
    </div>

    <div class="section">
      <div class="section-head"><h2>Duplicate / Stale Page Audit</h2></div>
      <div class="tbl-wrap">
        <table>
          <thead><tr><th>Page</th><th>Size</th><th>Concern</th><th>Recommendation</th></tr></thead>
          <tbody>
            <tr><td>/STOCKS/index.html</td><td>135K</td><td>Appears to be older copy of /findstocks/ (185K)</td><td class="v-gold">Likely dead duplicate &mdash; verify &amp; remove</td></tr>
            <tr><td>/findstocks_global/ vs /findstocks2_global/</td><td>97K vs 69K</td><td>Two parallel Miracle systems (v2 + v3)</td><td class="v-gold">Consolidate to one canonical version</td></tr>
            <tr><td>/findmutualfunds/ vs /findmutualfunds2/</td><td>Various</td><td>Two parallel MF systems</td><td class="v-gold">Consolidate to one canonical version</td></tr>
            <tr><td>STOCKSUNIFY/ analysis docs</td><td>Various</td><td>Last updated Jan 27, 2026</td><td>Refresh analysis with current data</td></tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- ═══════════════════════════════════════════════════════════ -->
  <!-- TAB: PROOF LOG -->
  <!-- ═══════════════════════════════════════════════════════════ -->
  <div class="tab-panel" id="tab-proof">
    <div class="section">
      <div class="section-head"><h2>Unified Proof Log &mdash; All Systems</h2><span class="badge badge-info">AUDIT TRAIL</span></div>
      <p style="font-size:0.78rem;color:var(--dim);margin-bottom:1rem">Every prediction from every system, logged with date/time, entry, target, outcome, and benchmark comparison. This is the single source of truth.</p>
      <div class="tbl-wrap" style="max-height:600px;overflow-y:auto">
        <table>
          <thead><tr><th>Time (UTC)</th><th>System</th><th>Asset</th><th>Direction</th><th>Score</th><th>Entry</th><th>Target</th><th>Stop</th><th>Outcome</th><th>P&L %</th><th>Resolved</th></tr></thead>
          <tbody id="proof-log-body">
            <tr><td colspan="11" class="loading"><span class="spin"></span> Loading proof log...</td></tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>

</div><!-- /container -->

<div class="footer">
  <strong>GOLDMINE_WINDSURF</strong> &mdash; Built by Windsurf AI for <a href="/">FindTorontoEvents.ca</a><br>
  Investment Hub &rarr; Goldmines &rarr; Windsurf<br><br>
  <span style="opacity:0.6">All tools are for educational and research purposes only. Not financial advice. Past performance does not guarantee future results.</span>
</div>

<script>
// ═══════════════════════════════════════════════════════════════
//  GOLDMINE_WS — Consolidated Data Fetcher
// ═══════════════════════════════════════════════════════════════
var BASE = 'https://findtorontoevents.ca';
var systemData = {};

function showTab(id) {
    var panels = document.querySelectorAll('.tab-panel');
    var btns = document.querySelectorAll('.tab-btn');
    for (var i = 0; i < panels.length; i++) panels[i].classList.remove('active');
    for (var i = 0; i < btns.length; i++) btns[i].classList.remove('active');
    var el = document.getElementById('tab-' + id);
    if (el) el.classList.add('active');
    // Find matching button
    for (var i = 0; i < btns.length; i++) {
        if (btns[i].getAttribute('onclick') === "showTab('" + id + "')") btns[i].classList.add('active');
    }
}

function fetchJson(url, cb) {
    var x = new XMLHttpRequest();
    x.open('GET', url, true);
    x.timeout = 30000;
    x.onload = function() {
        if (x.status === 200) {
            try { cb(JSON.parse(x.responseText)); } catch(e) { cb(null); }
        } else { cb(null); }
    };
    x.onerror = function() { cb(null); };
    x.ontimeout = function() { cb(null); };
    x.send();
}

function fmtPct(v) { var n = parseFloat(v); return isNaN(n) ? '--' : (n >= 0 ? '+' : '') + n.toFixed(2) + '%'; }
function fmtUsd(v) { var n = parseFloat(v); return isNaN(n) ? '--' : (n >= 0 ? '+$' : '-$') + Math.abs(n).toFixed(2); }
function fmtTime(t) { if (!t) return '--'; return t.replace('T', ' ').substring(0, 19); }
function pairFmt(p) { return (p || '').replace('_USDT', '/USDT'); }
function outcomeClass(o) {
    if (!o) return 'pill-pending';
    var l = o.toLowerCase();
    if (l === 'win' || l === 'winner' || l === 'won' || l === 'partial_win') return 'pill-win';
    if (l === 'loss' || l === 'loser' || l === 'lost' || l === 'partial_loss') return 'pill-loss';
    return 'pill-pending';
}
function outcomeLabel(o) {
    if (!o) return 'PENDING';
    return o.toUpperCase().replace('_', ' ');
}

// ─── Crypto Scanner ───
function loadCrypto() {
    fetchJson(BASE + '/findcryptopairs/api/crypto_winners.php?action=stats', function(d) {
        if (!d || !d.ok) return;
        var s = d.stats || d;
        setText('c-wr', fmtPct(s.win_rate || s.overall_win_rate || 0).replace('+',''));
        setText('c-pnl', fmtPct(s.avg_pnl || 0));
        setText('c-total', s.total_signals || s.total || 0);
        setText('c-resolved', (s.resolved || 0) + ' resolved');
        setText('c-best', fmtPct(s.best_trade || s.best_pnl || 0));
        setText('c-worst', 'Worst: ' + fmtPct(s.worst_trade || s.worst_pnl || 0));
        setText('c-pairs', s.unique_pairs || 0);
        setText('c-scans', (s.total_scans || 0) + ' scans');
        setText('c-last', fmtTime(s.last_scan || s.latest_scan || ''));
        setText('c-first', 'First: ' + fmtTime(s.first_scan || ''));
        systemData.crypto = { win_rate: parseFloat(s.win_rate || s.overall_win_rate || 0), total: s.total_signals || s.total || 0, resolved: s.resolved || 0, avg_pnl: parseFloat(s.avg_pnl || 0), profit_factor: parseFloat(s.profit_factor || 0), name: 'Crypto Scanner' };
        updateOverview();
    });

    fetchJson(BASE + '/findcryptopairs/api/crypto_winners.php?action=winners', function(d) {
        if (!d || !d.ok) { setText('c-winner-count', '0'); return; }
        var winners = d.winners || [];
        setText('c-winner-count', winners.length + ' active');
        var html = '';
        for (var i = 0; i < winners.length && i < 20; i++) {
            var w = winners[i];
            html += '<tr><td><strong>' + pairFmt(w.pair) + '</strong></td><td>' + (w.score||0) + '/100</td><td><span class="status-pill pill-active">' + (w.verdict||'') + '</span></td><td>$' + parseFloat(w.entry_price||0).toFixed(6) + '</td><td class="v-green">+' + (w.target_pct||'?') + '%</td><td class="v-red">-' + (w.risk_pct||'?') + '%</td><td>' + fmtPct(w.chg_24h||0) + '</td><td>$' + ((parseFloat(w.vol_usd||0))/1000).toFixed(0) + 'K</td><td>' + fmtTime(w.signal_time||w.created_at||'') + '</td></tr>';
        }
        if (!html) html = '<tr><td colspan="9" style="color:var(--dim)">No active winners right now</td></tr>';
        document.getElementById('crypto-winners-body').innerHTML = html;
    });

    fetchJson(BASE + '/findcryptopairs/api/crypto_winners.php?action=history&limit=30', function(d) {
        if (!d || !d.ok) return;
        var signals = d.signals || d.history || [];
        var html = '';
        for (var i = 0; i < signals.length && i < 30; i++) {
            var s = signals[i];
            var pnl = parseFloat(s.pnl_pct || s.outcome_pnl || 0);
            html += '<tr><td><strong>' + pairFmt(s.pair) + '</strong></td><td>' + (s.score||0) + '</td><td>' + (s.verdict||'') + '</td><td>$' + parseFloat(s.entry_price||0).toFixed(6) + '</td><td><span class="status-pill ' + outcomeClass(s.outcome) + '">' + outcomeLabel(s.outcome) + '</span></td><td class="' + (pnl >= 0 ? 'v-green' : 'v-red') + '">' + fmtPct(pnl) + '</td><td>' + fmtTime(s.signal_time||s.created_at||'') + '</td><td>' + fmtTime(s.resolved_at||'') + '</td></tr>';
        }
        if (!html) html = '<tr><td colspan="8" style="color:var(--dim)">No history yet</td></tr>';
        document.getElementById('crypto-history-body').innerHTML = html;
        addToProofLog(signals, 'Crypto Scanner');
    });
}

// ─── Meme Scanner ───
function loadMeme() {
    fetchJson(BASE + '/findcryptopairs/api/meme_scanner.php?action=stats', function(d) {
        if (!d || !d.ok) return;
        var s = d.stats || d;
        setText('m-wr', fmtPct(s.win_rate || s.overall_win_rate || 0).replace('+',''));
        setText('m-pnl', fmtPct(s.avg_pnl || 0));
        setText('m-total', s.total_signals || s.total || 0);
        setText('m-resolved', (s.resolved || 0) + ' resolved');
        setText('m-best', fmtPct(s.best_trade || s.best_pnl || 0));
        setText('m-worst', 'Worst: ' + fmtPct(s.worst_trade || s.worst_pnl || 0));
        setText('m-pairs', s.unique_pairs || 0);
        setText('m-scans', (s.total_scans || 0) + ' scans');
        setText('m-last', fmtTime(s.last_scan || s.latest_scan || ''));
        setText('m-first', 'First: ' + fmtTime(s.first_scan || ''));
        systemData.meme = { win_rate: parseFloat(s.win_rate || s.overall_win_rate || 0), total: s.total_signals || s.total || 0, resolved: s.resolved || 0, avg_pnl: parseFloat(s.avg_pnl || 0), profit_factor: parseFloat(s.profit_factor || 0), name: 'Meme Scanner' };
        updateOverview();
    });

    fetchJson(BASE + '/findcryptopairs/api/meme_scanner.php?action=winners', function(d) {
        if (!d || !d.ok) { setText('m-winner-count', '0'); return; }
        var winners = d.winners || [];
        setText('m-winner-count', winners.length + ' active');
        var html = '';
        for (var i = 0; i < winners.length && i < 20; i++) {
            var w = winners[i];
            html += '<tr><td><strong>' + pairFmt(w.pair) + '</strong></td><td><span class="status-pill pill-active">' + (w.tier||'?') + '</span></td><td>' + (w.score||0) + '/100</td><td>' + (w.verdict||'') + '</td><td>$' + parseFloat(w.entry_price||0).toFixed(6) + '</td><td class="v-green">+' + (w.target_pct||'?') + '%</td><td class="v-red">-' + (w.risk_pct||'?') + '%</td><td>' + fmtPct(w.chg_24h||0) + '</td><td>' + fmtTime(w.signal_time||w.created_at||'') + '</td></tr>';
        }
        if (!html) html = '<tr><td colspan="9" style="color:var(--dim)">No active meme winners right now</td></tr>';
        document.getElementById('meme-winners-body').innerHTML = html;
    });

    fetchJson(BASE + '/findcryptopairs/api/meme_scanner.php?action=history&limit=30', function(d) {
        if (!d || !d.ok) return;
        var signals = d.signals || d.history || [];
        var html = '';
        for (var i = 0; i < signals.length && i < 30; i++) {
            var s = signals[i];
            var pnl = parseFloat(s.pnl_pct || s.outcome_pnl || 0);
            html += '<tr><td><strong>' + pairFmt(s.pair) + '</strong></td><td>' + (s.tier||'?') + '</td><td>' + (s.score||0) + '</td><td><span class="status-pill ' + outcomeClass(s.outcome) + '">' + outcomeLabel(s.outcome) + '</span></td><td class="' + (pnl >= 0 ? 'v-green' : 'v-red') + '">' + fmtPct(pnl) + '</td><td>' + fmtTime(s.signal_time||s.created_at||'') + '</td><td>' + fmtTime(s.resolved_at||'') + '</td></tr>';
        }
        if (!html) html = '<tr><td colspan="7" style="color:var(--dim)">No history yet</td></tr>';
        document.getElementById('meme-history-body').innerHTML = html;
        addToProofLog(signals, 'Meme Scanner');
    });
}

// ─── Miracle DayTrades (Claude = v2, Cursor = v3) ───
function loadMiracle() {
    fetchJson(BASE + '/findstocks2_global/api/dashboard2.php?action=summary', function(d) {
        if (!d || !d.ok) return;
        var s = d.summary || d;
        setText('s-miracle2-wr', (s.win_rate || 0) + '%');
        systemData.miracle2 = { win_rate: parseFloat(s.win_rate || 0), total: s.total_picks || s.total || 0, resolved: (s.winners||0) + (s.losers||0) + (s.expired||0), avg_pnl: parseFloat(s.total_pnl_pct || s.total_pnl || 0) / Math.max(1, (s.winners||0)+(s.losers||0)), profit_factor: parseFloat(s.profit_factor || 0), name: 'Miracle Claude' };
        updateOverview();
    });

    fetchJson(BASE + '/findstocks_global/api/dashboard3.php?action=stats', function(d) {
        if (!d || !d.ok) return;
        var s = d.stats || d;
        setText('s-miracle3-wr', (s.overall_win_rate || 0) + '%');
        systemData.miracle3 = { win_rate: parseFloat(s.overall_win_rate || 0), total: s.total_picks || 0, resolved: (s.total_wins||0) + (s.total_losses||0), avg_pnl: 0, profit_factor: 0, name: 'Miracle Cursor' };
        updateOverview();
    });

    // Recent picks for Miracle Claude
    fetchJson(BASE + '/findstocks2_global/api/dashboard2.php?action=recent', function(d) {
        if (!d || !d.ok) return;
        var picks = d.picks || d.recent || [];
        var html = '';
        for (var i = 0; i < picks.length && i < 20; i++) {
            var p = picks[i];
            var pnl = parseFloat(p.outcome_pct || 0);
            html += '<tr><td><strong>' + (p.ticker||'') + '</strong></td><td class="wrap">' + (p.company_name||p.name||'') + '</td><td>' + (p.score||'') + '</td><td>' + (p.confidence||'') + '</td><td>$' + parseFloat(p.entry_price||0).toFixed(2) + '</td><td class="v-green">$' + parseFloat(p.target_price||0).toFixed(2) + '</td><td class="v-red">$' + parseFloat(p.stop_price||0).toFixed(2) + '</td><td>' + (p.is_cdr == 1 ? 'CDR' : 'US') + '</td><td><span class="status-pill ' + outcomeClass(p.outcome) + '">' + outcomeLabel(p.outcome) + '</span></td><td class="' + (pnl >= 0 ? 'v-green' : 'v-red') + '">' + fmtPct(pnl) + '</td><td>' + (p.scan_date||'') + '</td></tr>';
        }
        if (!html) html = '<tr><td colspan="11" style="color:var(--dim)">No recent picks</td></tr>';
        document.getElementById('miracle2-body').innerHTML = html;
    });

    // Recent picks for Miracle Cursor
    fetchJson(BASE + '/findstocks_global/api/dashboard3.php?action=history', function(d) {
        if (!d || !d.ok) return;
        var picks = d.picks || d.history || [];
        var html = '';
        for (var i = 0; i < picks.length && i < 20; i++) {
            var p = picks[i];
            var pnl = parseFloat(p.outcome_pct || p.pnl_pct || 0);
            html += '<tr><td><strong>' + (p.ticker||'') + '</strong></td><td class="wrap">' + (p.company_name||p.name||'') + '</td><td>' + (p.score||'') + '</td><td>' + (p.confidence||'') + '</td><td>$' + parseFloat(p.entry_price||0).toFixed(2) + '</td><td class="v-green">$' + parseFloat(p.target_price||0).toFixed(2) + '</td><td class="v-red">$' + parseFloat(p.stop_price||0).toFixed(2) + '</td><td>' + (p.is_cdr == 1 ? 'CDR' : 'US') + '</td><td><span class="status-pill ' + outcomeClass(p.outcome) + '">' + outcomeLabel(p.outcome) + '</span></td><td class="' + (pnl >= 0 ? 'v-green' : 'v-red') + '">' + fmtPct(pnl) + '</td><td>' + (p.scan_date||'') + '</td></tr>';
        }
        if (!html) html = '<tr><td colspan="11" style="color:var(--dim)">No recent picks</td></tr>';
        document.getElementById('miracle3-body').innerHTML = html;
    });
}

// ─── Sports Betting ───
function loadSports() {
    fetchJson(BASE + '/live-monitor/api/sports_picks.php?action=pick_history&days=30', function(d) {
        if (!d || !d.ok) return;
        var o = d.overall || {};
        setText('sp-wr', fmtPct(o.win_rate || 0).replace('+',''));
        setText('sp-pnl', fmtUsd(o.total_pnl || 0));
        setText('sp-total', o.total || 0);
        setText('sp-resolved', (o.wins||0) + 'W / ' + (o.losses||0) + 'L');
        systemData.sports = { win_rate: parseFloat(o.win_rate || 0), total: o.total || 0, resolved: (o.wins||0) + (o.losses||0), avg_pnl: o.total ? parseFloat(o.total_pnl||0) / o.total : 0, profit_factor: 0, name: 'Sports Betting' };
        updateOverview();
    });

    fetchJson(BASE + '/live-monitor/api/sports_picks.php?action=today', function(d) {
        if (!d || !d.ok) return;
        var picks = d.picks || d.value_bets || [];
        var html = '';
        for (var i = 0; i < picks.length && i < 30; i++) {
            var p = picks[i];
            html += '<tr><td>' + (p.sport_short||p.sport||'') + '</td><td class="wrap">' + (p.away_team||'') + ' @ ' + (p.home_team||'') + '</td><td>' + (p.market||'') + '</td><td><strong>' + (p.outcome_name||p.bet_type||'') + '</strong></td><td>' + (p.best_book||'') + '</td><td>' + parseFloat(p.best_odds||0).toFixed(2) + '</td><td class="v-green">+' + fmtPct(p.ev_pct||0) + '</td><td>' + (p.confidence||'') + '</td><td><span class="status-pill ' + outcomeClass(p.result||p.status) + '">' + outcomeLabel(p.result||p.status) + '</span></td></tr>';
        }
        if (!html) html = '<tr><td colspan="9" style="color:var(--dim)">No picks today yet</td></tr>';
        document.getElementById('sports-picks-body').innerHTML = html;
    });

    fetchJson(BASE + '/live-monitor/api/sports_picks.php?action=performance', function(d) {
        if (!d || !d.ok) return;
        var sports = d.by_sport || [];
        var html = '';
        for (var i = 0; i < sports.length; i++) {
            var s = sports[i];
            var pCls = parseFloat(s.pnl||0) >= 0 ? 'v-green' : 'v-red';
            html += '<tr><td><strong>' + (s.sport||s.sport_key||'') + '</strong></td><td>' + (s.total||0) + '</td><td>' + (s.wins||0) + '</td><td>' + fmtPct(s.win_rate||0) + '</td><td class="' + pCls + '">' + fmtUsd(s.pnl||0) + '</td></tr>';
        }
        if (!html) html = '<tr><td colspan="5" style="color:var(--dim)">No performance data yet</td></tr>';
        document.getElementById('sports-bysport-body').innerHTML = html;
    });
}

// ─── Live Monitor ───
function loadLiveMonitor() {
    fetchJson(BASE + '/live-monitor/api/live_signals.php?action=list', function(d) {
        if (!d || !d.ok) return;
        var signals = d.signals || [];
        systemData.livemonitor = { win_rate: 0, total: signals.length, resolved: 0, avg_pnl: 0, profit_factor: 0, name: 'Live Monitor (19 Algos)' };
        updateOverview();
    });
}

// ─── Proof Log (unified) ───
var proofEntries = [];
function addToProofLog(signals, systemName) {
    for (var i = 0; i < signals.length; i++) {
        var s = signals[i];
        proofEntries.push({
            time: s.signal_time || s.created_at || s.scan_date || '',
            system: systemName,
            asset: pairFmt(s.pair || s.ticker || s.symbol || ''),
            direction: s.signal_type || 'LONG',
            score: s.score || '',
            entry: s.entry_price || '',
            target: s.target_pct || s.target_price || '',
            stop: s.risk_pct || s.stop_price || '',
            outcome: s.outcome || 'pending',
            pnl: s.pnl_pct || s.outcome_pnl || s.outcome_pct || 0,
            resolved: s.resolved_at || ''
        });
    }
    renderProofLog();
}

function renderProofLog() {
    proofEntries.sort(function(a, b) { return (b.time || '').localeCompare(a.time || ''); });
    var html = '';
    var max = Math.min(proofEntries.length, 100);
    for (var i = 0; i < max; i++) {
        var e = proofEntries[i];
        var pnl = parseFloat(e.pnl || 0);
        html += '<tr><td>' + fmtTime(e.time) + '</td><td><strong>' + e.system + '</strong></td><td>' + e.asset + '</td><td>' + (e.direction||'LONG') + '</td><td>' + e.score + '</td><td>' + (typeof e.entry === 'number' || (e.entry && e.entry !== '') ? '$' + parseFloat(e.entry).toFixed(4) : '--') + '</td><td>' + (e.target||'--') + '</td><td>' + (e.stop||'--') + '</td><td><span class="status-pill ' + outcomeClass(e.outcome) + '">' + outcomeLabel(e.outcome) + '</span></td><td class="' + (pnl >= 0 ? 'v-green' : 'v-red') + '">' + fmtPct(pnl) + '</td><td>' + fmtTime(e.resolved) + '</td></tr>';
    }
    if (!html) html = '<tr><td colspan="11" style="color:var(--dim)">No proof entries yet</td></tr>';
    document.getElementById('proof-log-body').innerHTML = html;
}

// ─── Overview: System Cards + Charts ───
function updateOverview() {
    var keys = Object.keys(systemData);
    if (keys.length < 2) return; // Wait for at least 2 systems

    // System cards
    var cardClasses = { crypto: 'crypto', meme: 'meme', miracle2: 'miracle', miracle3: 'stocks', sports: 'sports', livemonitor: 'live' };
    var cardIcons = { crypto: '&#x20BF;', meme: '&#x1F436;', miracle2: '&#x2728;', miracle3: '&#x1F3AF;', sports: '&#x26BD;', livemonitor: '&#x1F4E1;' };
    var cardLinks = { crypto: '/findcryptopairs/winners.html', meme: '/findcryptopairs/meme.html', miracle2: '/findstocks2_global/miracle.html', miracle3: '/findstocks_global/miracle.html', sports: '/live-monitor/sports-betting.html', livemonitor: '/live-monitor/live-monitor.html' };

    var html = '';
    for (var i = 0; i < keys.length; i++) {
        var k = keys[i];
        var s = systemData[k];
        var wrClass = s.win_rate >= 55 ? 'v-green' : s.win_rate >= 45 ? 'v-gold' : 'v-red';
        html += '<div class="sys-card ' + (cardClasses[k]||'') + '">';
        html += '<div class="card-title"><span class="icon">' + (cardIcons[k]||'&#x1F4CA;') + '</span> ' + s.name + '</div>';
        html += '<div class="card-stats">';
        html += '<div class="cs"><div class="cs-val ' + wrClass + '">' + (s.win_rate ? s.win_rate.toFixed(1) + '%' : '--') + '</div><div class="cs-lbl">Win Rate</div></div>';
        html += '<div class="cs"><div class="cs-val">' + (s.total||0) + '</div><div class="cs-lbl">Signals</div></div>';
        html += '<div class="cs"><div class="cs-val">' + (s.resolved||0) + '</div><div class="cs-lbl">Resolved</div></div>';
        html += '</div>';
        html += '<div class="card-meta"><span>PF: ' + (s.profit_factor ? s.profit_factor.toFixed(2) : '--') + '</span><span>Avg: ' + fmtPct(s.avg_pnl||0) + '</span></div>';
        html += '<a href="' + (cardLinks[k]||'#') + '" class="card-link">View Details &rarr;</a>';
        html += '</div>';
    }

    // Static cards for systems without live API
    html += '<div class="sys-card alpha"><div class="card-title"><span class="icon">&#x1F9EC;</span> Alpha Engine</div><div class="card-stats"><div class="cs"><div class="cs-val v-gold">150+</div><div class="cs-lbl">Features</div></div><div class="cs"><div class="cs-val">10</div><div class="cs-lbl">Strategies</div></div><div class="cs"><div class="cs-val v-green">Daily</div><div class="cs-lbl">Frequency</div></div></div><div class="card-meta"><span>Meta-Learner + Regime Detection</span></div><a href="/findstocks/alpha/" class="card-link">View Details &rarr;</a></div>';
    html += '<div class="sys-card forex"><div class="card-title"><span class="icon">&#x1F4B1;</span> Forex Portfolio</div><div class="card-stats"><div class="cs"><div class="cs-val v-cyan">10</div><div class="cs-lbl">Pairs</div></div><div class="cs"><div class="cs-val">8</div><div class="cs-lbl">Strategies</div></div><div class="cs"><div class="cs-val v-green">30m</div><div class="cs-lbl">Refresh</div></div></div><div class="card-meta"><span>Spread-based cost modeling</span></div><a href="/findforex2/portfolio/" class="card-link">View Details &rarr;</a></div>';
    html += '<div class="sys-card funds"><div class="card-title"><span class="icon">&#x1F3E6;</span> Mutual Funds</div><div class="card-stats"><div class="cs"><div class="cs-val v-purple">20+</div><div class="cs-lbl">Funds</div></div><div class="cs"><div class="cs-val">6</div><div class="cs-lbl">Scenarios</div></div><div class="cs"><div class="cs-val v-green">Daily</div><div class="cs-lbl">NAV Refresh</div></div></div><div class="card-meta"><span>Questrade $9.95 fee modeling</span></div><a href="/findmutualfunds2/portfolio2/" class="card-link">View Details &rarr;</a></div>';

    document.getElementById('system-cards').innerHTML = html;

    // Find best system
    var best = null;
    for (var i = 0; i < keys.length; i++) {
        var s = systemData[keys[i]];
        if (s.resolved >= 10 && (!best || s.win_rate > best.win_rate)) best = s;
    }
    if (best) {
        setText('kpi-best', best.win_rate.toFixed(1) + '%');
        setText('kpi-best-sub', best.name);
    }

    // Win rate chart
    renderWinRateChart();
    renderProofScoreChart();
    renderLeaderboard();
}

function renderWinRateChart() {
    var ctx = document.getElementById('chart-winrate');
    if (!ctx) return;
    var keys = Object.keys(systemData);
    var labels = [], data = [], colors = [];
    var colorMap = { crypto: '#f97316', meme: '#ec4899', miracle2: '#f59e0b', miracle3: '#22c55e', sports: '#06b6d4', livemonitor: '#3b82f6' };
    for (var i = 0; i < keys.length; i++) {
        var s = systemData[keys[i]];
        if (s.resolved < 1) continue;
        labels.push(s.name);
        data.push(s.win_rate);
        colors.push(colorMap[keys[i]] || '#6366f1');
    }
    if (window._wrChart) window._wrChart.destroy();
    window._wrChart = new Chart(ctx, {
        type: 'bar',
        data: { labels: labels, datasets: [{ label: 'Win Rate %', data: data, backgroundColor: colors, borderRadius: 6, borderSkipped: false }] },
        options: { responsive: true, plugins: { legend: { display: false } }, scales: { y: { beginAtZero: true, max: 100, ticks: { color: '#7a7aa8' }, grid: { color: 'rgba(255,255,255,0.04)' } }, x: { ticks: { color: '#7a7aa8' }, grid: { display: false } } } }
    });
}

function calcProofScore(s) {
    if (!s || s.resolved < 30) return 0;
    var score = 0;
    score += (s.win_rate || 0) * 0.3;
    score += Math.min((s.profit_factor || 0) * 20, 60);
    if (s.resolved >= 100) score += 10;
    if (s.resolved >= 500) score += 10;
    // Statistical significance bonus (simplified: if resolved >= 100 and win_rate > 52)
    if (s.resolved >= 100 && s.win_rate > 52) score += 15;
    return Math.round(score * 10) / 10;
}

function renderLeaderboard() {
    var keys = Object.keys(systemData);
    var rows = [];
    for (var i = 0; i < keys.length; i++) {
        var s = systemData[keys[i]];
        s._key = keys[i];
        s._proof = calcProofScore(s);
        rows.push(s);
    }
    // Add static entries
    rows.push({ name: 'Blue Chip (hold)', win_rate: 60.57, total: 350, resolved: 350, avg_pnl: 8.81, profit_factor: 2.90, _proof: calcProofScore({ win_rate: 60.57, resolved: 350, profit_factor: 2.90 }) });
    rows.push({ name: 'Alpha Engine', win_rate: 0, total: 0, resolved: 0, avg_pnl: 0, profit_factor: 0, _proof: 0 });
    rows.push({ name: 'CAN SLIM', win_rate: 0, total: 0, resolved: 0, avg_pnl: 0, profit_factor: 0, _proof: 0 });

    rows.sort(function(a, b) { return b._proof - a._proof; });

    var html = '';
    for (var i = 0; i < rows.length; i++) {
        var r = rows[i];
        var sigClass = (r.resolved >= 100 && r.win_rate > 52) ? 'v-green' : (r.resolved >= 30 ? 'v-gold' : 'v-red');
        var sigText = (r.resolved >= 100 && r.win_rate > 52) ? 'YES' : (r.resolved >= 30 ? 'Needs more' : 'No');
        var verdict = r._proof >= 50 ? '<span class="status-pill pill-win">PROVEN</span>' : r._proof >= 25 ? '<span class="status-pill pill-active">PROMISING</span>' : r.resolved > 0 ? '<span class="status-pill pill-stale">UNPROVEN</span>' : '<span class="status-pill pill-dead">NO DATA</span>';
        html += '<tr><td><strong>' + (i+1) + '</strong></td><td><strong>' + r.name + '</strong></td><td>' + (r.total||0) + '</td><td>' + (r.resolved||0) + '</td><td class="' + (r.win_rate >= 55 ? 'v-green' : r.win_rate >= 45 ? 'v-gold' : 'v-red') + '">' + (r.win_rate ? r.win_rate.toFixed(1) + '%' : '--') + '</td><td>' + fmtPct(r.avg_pnl||0) + '</td><td>' + (r.profit_factor ? r.profit_factor.toFixed(2) : '--') + '</td><td class="' + sigClass + '">' + sigText + '</td><td class="v-gold"><strong>' + r._proof + '</strong></td><td>' + verdict + '</td></tr>';
    }
    document.getElementById('leaderboard-body').innerHTML = html;
}

function renderProofScoreChart() {
    var ctx = document.getElementById('chart-proof');
    if (!ctx) return;
    var keys = Object.keys(systemData);
    var all = [];
    for (var i = 0; i < keys.length; i++) {
        var s = systemData[keys[i]];
        all.push({ name: s.name, score: calcProofScore(s) });
    }
    all.push({ name: 'Blue Chip (hold)', score: calcProofScore({ win_rate: 60.57, resolved: 350, profit_factor: 2.90 }) });
    all.sort(function(a, b) { return b.score - a.score; });

    var labels = [], data = [], colors = [];
    for (var i = 0; i < all.length; i++) {
        labels.push(all[i].name);
        data.push(all[i].score);
        colors.push(all[i].score >= 50 ? '#22c55e' : all[i].score >= 25 ? '#f59e0b' : '#ef4444');
    }
    if (window._psChart) window._psChart.destroy();
    window._psChart = new Chart(ctx, {
        type: 'bar',
        data: { labels: labels, datasets: [{ label: 'Proof Score', data: data, backgroundColor: colors, borderRadius: 6, borderSkipped: false }] },
        options: { indexAxis: 'y', responsive: true, plugins: { legend: { display: false } }, scales: { x: { beginAtZero: true, ticks: { color: '#7a7aa8' }, grid: { color: 'rgba(255,255,255,0.04)' } }, y: { ticks: { color: '#7a7aa8' }, grid: { display: false } } } }
    });
}

function setText(id, val) { var el = document.getElementById(id); if (el) el.textContent = val; }

// ─── Init ───
document.getElementById('last-refresh').textContent = new Date().toISOString().replace('T', ' ').substring(0, 19) + ' UTC';

loadCrypto();
loadMeme();
loadMiracle();
loadSports();
loadLiveMonitor();

// Auto-refresh every 5 minutes
setInterval(function() {
    document.getElementById('last-refresh').textContent = new Date().toISOString().replace('T', ' ').substring(0, 19) + ' UTC';
    loadCrypto(); loadMeme(); loadMiracle(); loadSports(); loadLiveMonitor();
}, 300000);
</script>
</body>
</html>
