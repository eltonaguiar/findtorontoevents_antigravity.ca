<!-- CACHE:1770272741.9578552 -->
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta content="width=device-width, initial-scale=1" name="viewport" />
  <script>
    window.__NEXT_ASSET_PREFIX__ = "/next";
    window.__EVENTS_JSON_PATH__ = "/next/events.json";
    (function () {
      var f = window.fetch;
      if (typeof f === "function") {
        window.fetch = function (input, opts) {
          var url = typeof input === "string" ? input : (input && input.url);
          if (url && (url.indexOf("events.json") !== -1)) {
            var sources = [
              "/next/events.json",
              "/events.json",
              "/data/events.json",
              "https://raw.githubusercontent.com/eltonaguiar/findtorontoevents.ca/main/next/events.json"
            ];

            function tryFetch(index) {
              if (index >= sources.length) {
                console.error("‚ùå [DIAGNOSTIC] All event sources failed.");
                return Promise.reject("All sources failed");
              }

              var currentSource = sources[index];
              return f.call(this, currentSource, opts).then(function (response) {
                if (!response.ok) throw new Error("Status " + response.status);

                var clone = response.clone();
                return clone.json().then(function (data) {
                  var events = data.events || data;
                  console.log("‚úÖ [DIAGNOSTIC] Success using: " + currentSource + ". Raw count:", events.length);
                  window.__RAW_EVENTS__ = events;

                  // Diagnostic check for filtering
                  setTimeout(function () {
                    var rendered = document.querySelectorAll('[class*="event-card"], [class*="EventCard"]').length;
                    if (rendered === 0 && events.length > 0) {
                      console.error("‚ö†Ô∏è [DIAGNOSTIC] Data exists but NO cards rendered. Possible reasons: Hydration fail or strict filters.");
                    } else if (rendered > 0) {
                      console.log("‚úÖ [DIAGNOSTIC] Successfully rendered " + rendered + " event cards.");
                    }
                  }, 5000);

                  return response;
                }).catch(function (e) {
                  console.warn("‚ö†Ô∏è [DIAGNOSTIC] Failed to parse " + currentSource + ". Trying next...");
                  return tryFetch(index + 1);
                });
              }).catch(function (e) {
                console.warn("‚ö†Ô∏è [DIAGNOSTIC] " + currentSource + " unreachable (" + e.message + "). Trying next...");
                return tryFetch(index + 1);
              });
            }

            return tryFetch(0);
          }
          return f.apply(this, arguments);
        };
      }
      var oldXHR = window.XMLHttpRequest;
      window.XMLHttpRequest = function () {
        var realXHR = new oldXHR();
        var oldOpen = realXHR.open;
        realXHR.open = function (method, url) {
          if (url && (url.indexOf("events.json") !== -1)) {
            url = "/next/events.json";
          }
          return oldOpen.apply(this, [method, url]);
        };
        return realXHR;
      };
    })();
  </script>
  <link as="font" crossorigin="" href="/next/_next/static/media/83afe278b6a6bb3c-s.p.3a6ba036.woff2" rel="preload"
    type="font/woff2" />
  <link rel="preload" href="/next/_next/static/chunks/cd9d6741b3ff3a25.css" as="style" />
  <link data-precedence="next" href="/next/_next/static/chunks/cd9d6741b3ff3a25.css" rel="stylesheet" />
  <link as="script" fetchpriority="low" href="/next/_next/static/chunks/628f1cf8c6948755.js" rel="preload" />
  <script async="" src="/next/_next/static/chunks/806bdb8e4a6a9b95.js"></script>
  <script async="" src="/next/_next/static/chunks/43a0077a15b1a098.js"></script>
  <script async="" src="/next/_next/static/chunks/dde2c8e6322d1671.js"></script>
  <script async="" src="/next/_next/static/chunks/turbopack-03e217c852f3e99c.js"></script>
  <script async="" src="/next/_next/static/chunks/a2ac3a6616d60872.js"></script>
  <script async="" src="/next/_next/static/chunks/ff1a16fafef87110.js"></script>
  <script async="" src="/next/_next/static/chunks/7c4eddd014120b50.js"></script>
  <script async="" src="/next/_next/static/chunks/f1a9dd578dc871d3.js"></script>
  <script async="" src="/next/_next/static/chunks/afe53b3593ec888c.js"></script>
  <script async="" src="/next/_next/static/chunks/1bbf7aa8dcc742fe.js"></script>
  <meta content="" name="next-size-adjust" />
  <meta content="no-cache, no-store, must-revalidate" http-equiv="Cache-Control" />
  <meta content="no-cache" http-equiv="Pragma" />
  <meta content="0" http-equiv="Expires" />
  <meta content="notranslate" name="google" />
  <title>Find Toronto Events | Dating, Activities &amp; Things to Do This Weekend</title>
  <meta
    content="Your ultimate guide to Toronto events, dating meetups, and activities. Discover the best things to do in Toronto, from GTA happenings to mingle events and weekend plans."
    name="description" />
  <meta
    content="Toronto Events,Toronto Dating,Toronto Activities,Things to do in Toronto,Toronto Calendar,GTA Happenings,Toronto Mingle,What's On Toronto"
    name="keywords" />
  <meta content="Find Toronto Events | Dating, Activities &amp; Things to Do This Weekend" property="og:title" />
  <meta
    content="Your ultimate guide to Toronto events, dating meetups, and activities. Discover the best things to do in Toronto this weekend."
    property="og:description" />
  <meta content="Find Toronto Events" property="og:site_name" />
  <meta content="en_CA" property="og:locale" />
  <meta content="website" property="og:type" />
  <meta content="summary" name="twitter:card" />
  <meta content="Find Toronto Events | Dating, Activities &amp; Things to Do This Weekend" name="twitter:title" />
  <meta
    content="Your ultimate guide to Toronto events, dating meetups, and activities. Discover the best things to do in Toronto this weekend."
    name="twitter:description" />
  <link href="/favicon.ico" rel="icon" sizes="256x256" type="image/x-icon" />
  <script>
    window.addEventListener('load', function () {
      try {
        var script = document.createElement('script');
        script.async = true;
        script.src = 'https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7893721225790912';
        script.crossOrigin = 'anonymous';
        document.head.appendChild(script);
      } catch (e) { }
    });
  </script>
  <script nomodule="" src="/next/_next/static/chunks/a6dad97d9634a72d.js"></script>  <style id="force-banners">
    /* FORCE ALL 4 BANNERS - Override React */
    .windows-fixer-promo,
    .favcreators-promo,
    .movieshows-promo,
    .stocks-promo {
      display: block !important;
      visibility: visible !important;
      height: auto !important;
      overflow: visible !important;
      position: relative !important;
    }
    
    /* Ensure parent containers don't hide them */
    .windows-fixer-promo > *,
    .favcreators-promo > *,
    .movieshows-promo > *,
    .stocks-promo > * {
      display: block !important;
      visibility: visible !important;
    }
    
    /* Banner spacing */
    .max-w-7xl:has(.promo-banner) {
      margin-bottom: 1rem !important;
    }
    
    /* Hover effects - allow dimmed state by default */
    .promo-banner:hover .flex.items-center {
      opacity: 1 !important;
      filter: grayscale(0) !important;
    }
    
    /* FIX: Expand banner text on hover */
    .promo-banner:hover .override-overflow {
      max-width: 300px !important;
      opacity: 1 !important;
    }

    /* FIX: Tooltip visibility on hover ‚Äì Tailwind build omits group-hover:visible,
       so we add it back scoped to .absolute (tooltip) only, NOT .override-overflow (banner text) */
    .group:hover > .relative .absolute,
    .group:hover .absolute[class*="z-"] {
      visibility: visible !important;
      opacity: 1 !important;
    }

    /* FIX: Ensure tooltip has solid background to prevent text bleed-through */
    .favcreators-promo .absolute,
    .stocks-promo .absolute,
    .movieshows-promo .absolute,
    .windows-fixer-promo .absolute {
      background: rgba(30, 30, 40, 0.98) !important;
      backdrop-filter: blur(10px) !important;
    }
    
    /* FIX: Position FavCreators tooltip lower to avoid overlap with expanded text */
    .favcreators-promo .absolute {
      top: calc(100% + 8px) !important;
      right: 0 !important;
      min-width: 280px;
      z-index: 9999 !important;
    }
    
    /* FIX: Ensure banner text doesn't overflow into tooltip space */
    .favcreators-promo .override-overflow {
      overflow: hidden !important;
    }
  </style>

</head>

<body class="inter_5972bc34-module__OU16Qa__className">
  <div hidden=""><!--$--><!--/$--></div>
  <div class="app-bg-wrapper bg-nebula"></div>
  <div class="fixed-ui-layer relative z-[200]"><button
      class="fixed top-6 left-6 z-[200] p-3 bg-black/40 backdrop-blur-xl border border-white/10 rounded-2xl shadow-2xl hover:bg-[var(--pk-500)] text-white transition-all group group/nav"
      title="Quick Navigation">
      <div class="flex flex-col gap-1.5 w-6 items-center justify-center"><span
          class="w-full h-0.5 bg-white rounded-full group-hover/nav:w-4 transition-all"></span><span
          class="w-full h-0.5 bg-white rounded-full group-hover/nav:w-6 transition-all"></span><span
          class="w-full h-0.5 bg-white rounded-full group-hover/nav:w-4 transition-all"></span></div>
    </button>
    <div
      class="fixed inset-0 z-[250] bg-black/80 backdrop-blur-sm transition-opacity duration-300 opacity-0 pointer-events-none">
      <div
        class="fixed top-0 left-0 h-full w-[300px] max-w-[90vw] bg-[var(--surface-0)]/95 backdrop-blur-xl border-r border-white/10 shadow-[0_0_50px_rgba(0,0,0,0.5)] transform transition-transform duration-300 flex flex-col -translate-x-full">
        <div
          class="p-6 border-b border-white/5 flex items-center justify-between bg-gradient-to-r from-[var(--pk-900)] to-transparent">
          <h2 class="text-xl font-black uppercase tracking-tighter text-white"><span
              class="text-[var(--pk-500)]">Quick</span> Nav</h2><button
            class="p-2 hover:bg-white/10 rounded-full transition-colors">‚úï</button>
        </div>
        <nav class="flex-1 overflow-y-auto custom-scrollbar p-4 space-y-2">
          <div class="space-y-1">
            <p class="px-4 py-2 text-[10px] font-black uppercase text-[var(--pk-300)] tracking-widest opacity-60">
              Platform</p><button
              class="w-full text-left px-4 py-3 rounded-xl flex items-center gap-3 transition-all bg-[var(--pk-500)] text-white font-bold"><span
                class="text-lg">üåê</span> Global Feed</button><button
              class="w-full text-left px-4 py-3 rounded-xl flex items-center gap-3 bg-[var(--pk-500)]/20 text-white font-bold hover:bg-[var(--pk-500)] transition-all border border-[var(--pk-500)]/30 mt-2 shadow-lg animate-pulse"><span
                class="text-lg">üìß</span> Contact Support</button>
          </div>
          <div class="space-y-1 pt-4 border-t border-white/5">
            <details class="group/nav-section">
              <summary
                class="px-4 py-2 text-[10px] font-black uppercase text-[var(--pk-300)] tracking-widest opacity-60 cursor-pointer list-none flex items-center justify-between hover:opacity-100 transition-opacity">
                NETWORK <span class="group-open/nav-section:rotate-180 transition-transform">‚ñº</span>
              </summary>
              <div class="space-y-1 mt-1">
                <a class="w-full text-left px-4 py-3 rounded-xl flex items-center gap-3 hover:bg-blue-500/20 text-blue-200 hover:text-white transition-all border border-transparent hover:border-blue-500/30 overflow-hidden"
                  href="/WINDOWSFIXER/"
                  title="Fixes boot issues such as EFI corrupt, winload.efi missing, or INACCESSIBLE_BOOT_DEVICE."><span
                    class="text-lg">üõ†Ô∏è</span> Windows Boot Fixer</a>
                <a class="w-full text-left px-4 py-3 rounded-xl flex items-center gap-3 hover:bg-green-500/20 text-green-200 hover:text-white transition-all border border-transparent hover:border-green-500/30 overflow-hidden"
                  href="/MENTALHEALTHRESOURCES/"><span class="text-lg">üåü</span> Mental Health Resources</a>
                <a class="w-full text-left px-4 py-3 rounded-xl flex items-center gap-3 hover:bg-yellow-500/20 text-yellow-200 hover:text-white transition-all border border-transparent hover:border-yellow-500/30 overflow-hidden"
                  href="/findstocks"><span class="text-lg">üìà</span> Find Stocks</a>
                <a class="w-full text-left px-4 py-3 rounded-xl flex items-center gap-3 hover:bg-amber-500/20 text-amber-200 hover:text-white transition-all border border-transparent hover:border-amber-500/30 overflow-hidden"
                  href="/MOVIESHOWS/"><span class="text-lg">üé¨</span> Movies &amp; TV</a>
                <a class="w-full text-left px-4 py-3 rounded-xl flex items-center gap-3 hover:bg-orange-500/20 text-orange-200 hover:text-white transition-all border border-transparent hover:border-orange-500/30 overflow-hidden"
                  href="/fc/#/guest"><span class="text-lg">‚≠ê</span> Favorite Creators</a>
                <a class="w-full text-left px-4 py-3 rounded-xl flex items-center gap-3 hover:bg-rose-500/20 text-rose-200 hover:text-white transition-all border border-transparent hover:border-rose-500/30 overflow-hidden"
                  href="/fc/#/guest"><span class="text-lg">üíé</span> FAVCREATORS</a>
                <a class="w-full text-left px-4 py-3 rounded-xl flex items-center gap-3 hover:bg-red-500/20 text-red-200 hover:text-white transition-all border border-transparent hover:border-red-500/30 overflow-hidden"
                  href="/fc/#/guest"><span class="text-lg">üî¥</span> are your favorite creators live?</a>
              </div>
            </details>
            <a class="w-full text-left px-4 py-3 rounded-xl flex items-center gap-3 hover:bg-purple-500/20 text-purple-200 hover:text-white transition-all border border-transparent hover:border-purple-500/30 overflow-hidden"
              href="/2xko"><span class="text-lg">üéÆ</span> 2XKO Frame Data</a>
            <button
              class="w-full text-left px-4 py-3 rounded-xl flex items-center gap-3 hover:bg-white/5 text-[var(--text-2)] hover:text-white transition-all overflow-hidden">
              <span class="text-lg">‚öôÔ∏è</span> Event System Settings</button>
            <button
              class="w-full text-center px-4 py-4 rounded-xl text-[10px] font-black uppercase tracking-[0.2em] text-[var(--pk-400)]/60 hover:text-[var(--pk-400)] transition-all border border-dashed border-white/5 hover:border-[var(--pk-500)]/30 mt-4 group">
              <span class="opacity-20 group-hover:opacity-100 transition-opacity">---</span> üìß Contact Support <span
                class="opacity-20 group-hover:opacity-100 transition-opacity">---</span>
            </button>
          </div>
          <div class="space-y-1 pt-4 border-t border-white/5">
            <p class="px-4 py-2 text-[10px] font-black uppercase text-[var(--pk-300)] tracking-widest opacity-60">Data
              Management</p>
            <div class="px-4 py-2 grid grid-cols-2 gap-2"><button
                class="p-3 bg-white/5 hover:bg-white/10 rounded-xl border border-white/5 flex flex-col items-center gap-1 transition-all group overflow-hidden"
                title="Export as JSON"><span class="text-xl group-hover:scale-110 transition-transform">üì¶</span><span
                  class="text-[9px] font-black uppercase tracking-wider">JSON</span></button><button
                class="p-3 bg-white/5 hover:bg-white/10 rounded-xl border border-white/5 flex flex-col items-center gap-1 transition-all group overflow-hidden"
                title="Export as CSV"><span class="text-xl group-hover:scale-110 transition-transform">üìä</span><span
                  class="text-[9px] font-black uppercase tracking-wider">CSV</span></button><button
                class="p-3 bg-white/5 hover:bg-white/10 rounded-xl border border-white/5 flex flex-col items-center gap-1 transition-all group col-span-2 overflow-hidden"
                title="Export Calendar File (.ics)"><span
                  class="text-xl group-hover:scale-110 transition-transform">üìÖ</span><span
                  class="text-[9px] font-black uppercase tracking-wider">Calendar (ICS)</span></button></div><button
              class="w-full text-left px-4 py-3 rounded-xl flex items-center gap-3 hover:bg-white/5 text-[var(--text-2)] hover:text-white transition-all overflow-hidden"><span
                class="text-lg">üì•</span> Import Collection</button><input accept=".json" class="hidden" type="file" />
          </div>
          <div class="space-y-1 pt-4 border-t border-white/5">
            <p class="px-4 py-2 text-[10px] font-black uppercase text-[var(--pk-300)] tracking-widest opacity-60">
              PERSONAL</p><button
              class="w-full text-left px-4 py-3 rounded-xl flex items-center gap-3 transition-all hover:bg-white/5 text-[var(--text-2)] hover:text-white"><span
                class="text-lg">‚ô•</span><span class="flex-1 truncate">My Collection</span><span
                class="bg-black/30 px-2 py-0.5 rounded text-[10px] font-mono">0</span></button>
          </div>
          <div class="space-y-1 pt-4 border-t border-white/5">
            <p class="px-4 py-2 text-[10px] font-black uppercase text-[var(--pk-300)] tracking-widest opacity-60">
              Support</p>
            <div class="px-4 py-4 m-2 bg-white/5 rounded-xl border border-white/5 space-y-2">
              <p class="text-[9px] font-bold text-[var(--text-3)] uppercase leading-tight">Manual Uplink:</p>
              <div class="text-[11px] font-mono text-white select-all break-all">support<span
                  class="text-[var(--pk-500)]">@</span>findtorontoevents.ca</div>
              <p class="text-[8px] text-[var(--text-3)] opacity-40 italic">Response: 24-48h</p>
            </div>
          </div>
        </nav>
        <div class="p-4 border-t border-white/5 bg-black/20">
          <p class="text-[10px] text-[var(--text-3)] text-center opacity-50">Antigravity Systems v0.5.2</p>
          <p class="text-[8px] text-[var(--text-3)] text-center opacity-30 mt-1" data-version="2026-01-29-parallel-fix"
            style="display:none">Build: 2026-01-29-parallel-fix</p>
        </div>
      </div>
    </div>
    <div class="fixed top-6 right-6 z-[200] flex gap-3 pointer-events-none"><button
        class="pointer-events-auto px-4 py-3 bg-black/40 backdrop-blur-xl border border-white/10 rounded-2xl shadow-2xl hover:bg-[var(--pk-500)] text-white transition-all group overflow-hidden flex items-center gap-2"
        title="System Configuration (Top Right)">
        <div class="flex items-center gap-2 px-1"><span
            class="text-xl group-hover:rotate-90 transition-transform duration-500">‚öôÔ∏è</span><span
            class="text-[10px] font-black uppercase tracking-tighter opacity-0 group-hover:opacity-100 transition-all">Config</span>
        </div>
      </button></div>
    <div class="fixed bottom-6 right-6 z-[200]"><button aria-label="Open Settings"
        class="w-16 h-16 rounded-full glass-panel flex items-center justify-center transition-all duration-500 shadow-2xl hover:shadow-[0_0_40px_rgba(var(--pk-500-rgb),0.6)] hover:scale-125 text-[var(--pk-300)] animate-pulse"
        title="Configuration Settings (Always Accessible)"><svg class="w-9 h-9" fill="none" stroke="currentColor"
          viewbox="0 0 24 24">
          <path
            d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"
            stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5"></path>
          <path d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5">
          </path>
        </svg></button></div>
  </div>
  <div class="font-size-md density-normal relative z-0 min-h-screen"
    style="scale:var(--webpage-scale);transform-origin:top center;width:100%">
    <main class="min-h-screen">
      <header class="relative py-20 px-6 text-center overflow-hidden">
        <div class="absolute inset-0 bg-gradient-to-b from-[var(--pk-900)] to-[var(--surface-0)] opacity-50 -z-10">
        </div>
        <h1 class="text-5xl md:text-7xl font-extrabold mb-4 tracking-tight glow-text">Toronto Events <span
            class="text-2xl md:text-3xl text-[var(--pk-300)]">v0.5.2</span></h1>
        <p class="text-lg text-[var(--text-2)] max-w-3xl mx-auto leading-relaxed">
          <a href="/" class="hover:text-[var(--pk-300)] transition">Toronto daily events</a>, 
          <a href="/fc" class="hover:text-[var(--pk-300)] transition">track your favourite livestreamers/creators</a> so they dont get lost in your feed, 
          find your next <a href="/movieshows2" class="hover:text-[var(--pk-300)] transition">movie/show</a> in a scrolling interface, 
          fix your <a href="/WINDOWSFIXER/" class="hover:text-[var(--pk-300)] transition">windows boot issues</a>, and 
          find out if someone with a supercomputer can beat the <a href="/findstocks/" class="hover:text-[var(--pk-300)] transition">stock</a> market
        </p>
        <p class="text-sm text-[var(--text-3)] mt-2">Updated daily ‚Ä¢ Feb 4, 2026</p>
      </header>
      <div class="max-w-7xl mx-auto px-4" suppressHydrationWarning>
        <div class="jsx-1dee1fec6bde20e8 windows-fixer-promo">
          <div class="jsx-1dee1fec6bde20e8 promo-banner">
            <div class="jsx-1dee1fec6bde20e8 flex items-center gap-3 transition-all duration-500 opacity-60 grayscale hover:opacity-100 hover:grayscale-0 group">
              <div
                class="jsx-1dee1fec6bde20e8 w-10 h-10 rounded-full bg-gradient-to-br from-[#667eea] to-[#764ba2] flex items-center justify-center shadow-lg animate-pulse-slow">
                <span class="jsx-1dee1fec6bde20e8 text-xl">üõ†Ô∏è</span>
              </div>
              <div
                class="jsx-1dee1fec6bde20e8 transition-all duration-500 override-overflow max-w-0 opacity-0 overflow-hidden group-hover:max-w-xs group-hover:opacity-100">
                <div class="jsx-1dee1fec6bde20e8 flex flex-col whitespace-nowrap"><span
                    class="jsx-1dee1fec6bde20e8 text-sm font-bold text-white">System Issues?</span><span
                    class="jsx-1dee1fec6bde20e8 text-[10px] text-[var(--text-2)]">Try Windows Boot Fixer</span></div>
              </div>
              <div class="jsx-1dee1fec6bde20e8 relative">
                <a href="/WINDOWSFIXER/" target="_blank"
                  class="jsx-1dee1fec6bde20e8 ml-2 px-3 py-1.5 rounded-full bg-white/10 hover:bg-white/20 text-xs font-bold text-white transition-all whitespace-nowrap">Learn
                  More ‚Üí</a>
                <div class="jsx-1dee1fec6bde20e8 absolute top-full right-0 mt-2 w-56 p-3 bg-[var(--surface-1)] border border-white/10 rounded-lg shadow-xl opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-300 z-50">
                  <p class="text-xs text-[var(--text-2)]">Having Windows boot issues? Check out our Windows Fixer tool to diagnose and fix common startup problems.</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="max-w-7xl mx-auto px-4" suppressHydrationWarning>
        <div class="jsx-1b9a23bd3fa6c640 favcreators-promo">
          <div class="jsx-1b9a23bd3fa6c640 promo-banner">
            <div class="jsx-1b9a23bd3fa6c640 flex items-center gap-3 transition-all duration-500 opacity-60 grayscale hover:opacity-100 hover:grayscale-0 group">
              <div
                class="jsx-1b9a23bd3fa6c640 w-10 h-10 rounded-full bg-gradient-to-br from-pink-500 to-rose-600 flex items-center justify-center shadow-lg animate-pulse-slow">
                <span class="jsx-1b9a23bd3fa6c640 text-xl">üíé</span>
              </div>
              <div
                class="jsx-1b9a23bd3fa6c640 transition-all duration-500 override-overflow max-w-0 opacity-0 overflow-hidden group-hover:max-w-xs group-hover:opacity-100">
                <div class="jsx-1b9a23bd3fa6c640 flex flex-col whitespace-nowrap"><span
                    class="jsx-1b9a23bd3fa6c640 text-sm font-bold text-white">Fav Creators</span><span
                    class="jsx-1b9a23bd3fa6c640 text-[10px] text-[var(--text-2)]">Track creators across TikTok, Twitch, Kick &amp; YouTube</span>
                </div>
              </div>
              <div class="jsx-1b9a23bd3fa6c640 relative">
                <a
                  class="jsx-1b9a23bd3fa6c640 ml-2 px-3 py-1.5 rounded-full bg-white/10 hover:bg-white/20 text-xs font-bold text-white transition-all whitespace-nowrap"
                  href="/fc/#/guest" rel="noopener noreferrer" target="_blank">Open App ‚Üí</a>
                <div class="jsx-1b9a23bd3fa6c640 absolute right-0 mt-2 w-72 p-4 bg-[var(--surface-1)] border border-white/10 rounded-lg shadow-xl opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-300 z-[9999]" style="top: calc(100% + 8px); max-width: 300px; line-height: 1.5; transform: translateY(0);">
                  <p class="text-xs text-[var(--text-2)] mb-2" style="line-height: 1.5;">Track your favorite creators across TikTok, Twitch, Kick &amp; YouTube. Never miss their live streams or stories!</p>
                  <div class="flex gap-2">
                    <a href="/fc/#/guest" target="_blank" class="text-[10px] px-2 py-1 bg-pink-500/20 text-pink-300 rounded hover:bg-pink-500/30 transition">TikTok</a>
                    <a href="/fc/#/guest" target="_blank" class="text-[10px] px-2 py-1 bg-purple-500/20 text-purple-300 rounded hover:bg-purple-500/30 transition">Twitch</a>
                    <a href="/fc/#/guest" target="_blank" class="text-[10px] px-2 py-1 bg-green-500/20 text-green-300 rounded hover:bg-green-500/30 transition">Kick</a>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="max-w-7xl mx-auto px-4" suppressHydrationWarning>
        <div class="jsx-1b9a23bd3fa6c640 movieshows-promo">
          <div class="jsx-1b9a23bd3fa6c640 promo-banner">
            <div class="jsx-1b9a23bd3fa6c640 flex items-center gap-3 transition-all duration-500 opacity-60 grayscale hover:opacity-100 hover:grayscale-0 group">
              <div
                class="jsx-1b9a23bd3fa6c640 w-10 h-10 rounded-full bg-gradient-to-br from-amber-500 to-orange-600 flex items-center justify-center shadow-lg animate-pulse-slow">
                <span class="jsx-1b9a23bd3fa6c640 text-xl">üé¨</span>
              </div>
              <div
                class="jsx-1b9a23bd3fa6c640 transition-all duration-500 override-overflow max-w-0 opacity-0 overflow-hidden group-hover:max-w-xs group-hover:opacity-100">
                <div class="jsx-1b9a23bd3fa6c640 flex flex-col whitespace-nowrap"><span
                    class="jsx-1b9a23bd3fa6c640 text-sm font-bold text-white">Movie Trailers</span><span
                    class="jsx-1b9a23bd3fa6c640 text-[10px] text-[var(--text-2)]">What's playing in Toronto cinemas</span>
                </div>
              </div>
              <div class="jsx-1b9a23bd3fa6c640 relative">
                <a
                  class="jsx-1b9a23bd3fa6c640 ml-2 px-3 py-1.5 rounded-full bg-white/10 hover:bg-white/20 text-xs font-bold text-white transition-all whitespace-nowrap"
                  href="/MOVIESHOWS/" rel="noopener noreferrer" target="_blank">Open App ‚Üí</a>
                <div class="jsx-1b9a23bd3fa6c640 absolute top-full right-0 mt-2 w-56 p-3 bg-[var(--surface-1)] border border-white/10 rounded-lg shadow-xl opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-300 z-50">
                  <p class="text-xs text-[var(--text-2)] mb-2">Scrolling reels interface for movie/tv series trailers, including movies in theatres!</p>
                  <div class="flex flex-col gap-1">
                    <a href="/MOVIESHOWS/" target="_blank" class="text-xs px-2 py-1.5 bg-amber-500/20 text-amber-300 rounded hover:bg-amber-500/30 transition flex justify-between">üé¨ Movie Shows <span>‚Üí</span></a>
                    <a href="/movieshows2/" target="_blank" class="text-xs px-2 py-1.5 bg-orange-500/20 text-orange-300 rounded hover:bg-orange-500/30 transition flex justify-between">üì∫ TV Shows <span>‚Üí</span></a>
                    <a href="/MOVIESHOWS3" target="_blank" class="text-xs px-2 py-1.5 bg-red-500/20 text-red-300 rounded hover:bg-red-500/30 transition flex justify-between">üî• Trending <span>‚Üí</span></a>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="max-w-7xl mx-auto px-4" suppressHydrationWarning>
        <div class="jsx-1b9a23bd3fa6c640 stocks-promo">
          <div class="jsx-1b9a23bd3fa6c640 promo-banner">
            <div class="jsx-1b9a23bd3fa6c640 flex items-center gap-3 transition-all duration-500 opacity-60 grayscale hover:opacity-100 hover:grayscale-0 group">
              <div
                class="jsx-1b9a23bd3fa6c640 w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center shadow-lg animate-pulse-slow">
                <span class="jsx-1b9a23bd3fa6c640 text-xl">üìà</span>
              </div>
              <div
                class="jsx-1b9a23bd3fa6c640 transition-all duration-500 override-overflow max-w-0 opacity-0 overflow-hidden group-hover:max-w-xs group-hover:opacity-100">
                <div class="jsx-1b9a23bd3fa6c640 flex flex-col whitespace-nowrap"><span
                    class="jsx-1b9a23bd3fa6c640 text-sm font-bold text-white">Stock Ideas</span><span
                    class="jsx-1b9a23bd3fa6c640 text-[10px] text-[var(--text-2)]">Research, picks &amp; market insights</span>
                </div>
              </div>
              <div class="jsx-1b9a23bd3fa6c640 relative">
                <a
                  class="jsx-1b9a23bd3fa6c640 ml-2 px-3 py-1.5 rounded-full bg-white/10 hover:bg-white/20 text-xs font-bold text-white transition-all whitespace-nowrap"
                  href="/findstocks/" rel="noopener noreferrer" target="_blank">Open App ‚Üí</a>
                <div class="jsx-1b9a23bd3fa6c640 absolute top-full right-0 mt-2 w-52 p-3 bg-[var(--surface-1)] border border-white/10 rounded-lg shadow-xl opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-300 z-50">
                  <p class="text-xs text-[var(--text-2)]">Looking for stock ideas? Browse research, daily picks, and portfolio tracking tools.</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="max-w-7xl mx-auto px-4 py-6">
        <div class="ad-container mb-8"><ins class="adsbygoogle" data-ad-client="ca-pub-7893721225790912"
            data-ad-format="horizontal" data-ad-slot="1234567890" data-full-width-responsive="true"
            style="display:block"></ins></div>
      </div>
      <div class="max-w-7xl mx-auto px-4 py-20">
        <div id="events-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
          <div class="relative h-[320px] w-full">
            <div
              class="absolute inset-x-0 top-0 h-full rounded-xl shadow-lg border border-white/10 overflow-hidden glass-panel animate-pulse">
              <div class="p-4 flex-1 flex flex-col">
                <div class="flex justify-between items-start mb-3">
                  <div class="w-14 h-16 bg-white/10 rounded-lg"></div>
                  <div class="w-20 h-6 bg-white/10 rounded-full"></div>
                </div>
                <div class="space-y-2 mb-4">
                  <div class="h-4 bg-white/10 rounded w-3/4"></div>
                  <div class="h-4 bg-white/10 rounded w-1/2"></div>
                </div>
                <div class="mt-auto pt-4 space-y-2">
                  <div class="h-3 bg-white/10 rounded w-24"></div>
                  <div class="h-3 bg-white/10 rounded w-32"></div>
                </div>
              </div>
              <div class="p-4 pt-0 grid grid-cols-2 gap-2">
                <div class="h-10 bg-white/10 rounded-xl"></div>
                <div class="h-10 bg-white/10 rounded-xl"></div>
              </div>
            </div>
          </div>
          <div class="relative h-[320px] w-full">
            <div
              class="absolute inset-x-0 top-0 h-full rounded-xl shadow-lg border border-white/10 overflow-hidden glass-panel animate-pulse">
              <div class="p-4 flex-1 flex flex-col">
                <div class="flex justify-between items-start mb-3">
                  <div class="w-14 h-16 bg-white/10 rounded-lg"></div>
                  <div class="w-20 h-6 bg-white/10 rounded-full"></div>
                </div>
                <div class="space-y-2 mb-4">
                  <div class="h-4 bg-white/10 rounded w-3/4"></div>
                  <div class="h-4 bg-white/10 rounded w-1/2"></div>
                </div>
                <div class="mt-auto pt-4 space-y-2">
                  <div class="h-3 bg-white/10 rounded w-24"></div>
                  <div class="h-3 bg-white/10 rounded w-32"></div>
                </div>
              </div>
              <div class="p-4 pt-0 grid grid-cols-2 gap-2">
                <div class="h-10 bg-white/10 rounded-xl"></div>
                <div class="h-10 bg-white/10 rounded-xl"></div>
              </div>
            </div>
          </div>
          <div class="relative h-[320px] w-full">
            <div
              class="absolute inset-x-0 top-0 h-full rounded-xl shadow-lg border border-white/10 overflow-hidden glass-panel animate-pulse">
              <div class="p-4 flex-1 flex flex-col">
                <div class="flex justify-between items-start mb-3">
                  <div class="w-14 h-16 bg-white/10 rounded-lg"></div>
                  <div class="w-20 h-6 bg-white/10 rounded-full"></div>
                </div>
                <div class="space-y-2 mb-4">
                  <div class="h-4 bg-white/10 rounded w-3/4"></div>
                  <div class="h-4 bg-white/10 rounded w-1/2"></div>
                </div>
                <div class="mt-auto pt-4 space-y-2">
                  <div class="h-3 bg-white/10 rounded w-24"></div>
                  <div class="h-3 bg-white/10 rounded w-32"></div>
                </div>
              </div>
              <div class="p-4 pt-0 grid grid-cols-2 gap-2">
                <div class="h-10 bg-white/10 rounded-xl"></div>
                <div class="h-10 bg-white/10 rounded-xl"></div>
              </div>
            </div>
          </div>
          <div class="relative h-[320px] w-full">
            <div
              class="absolute inset-x-0 top-0 h-full rounded-xl shadow-lg border border-white/10 overflow-hidden glass-panel animate-pulse">
              <div class="p-4 flex-1 flex flex-col">
                <div class="flex justify-between items-start mb-3">
                  <div class="w-14 h-16 bg-white/10 rounded-lg"></div>
                  <div class="w-20 h-6 bg-white/10 rounded-full"></div>
                </div>
                <div class="space-y-2 mb-4">
                  <div class="h-4 bg-white/10 rounded w-3/4"></div>
                  <div class="h-4 bg-white/10 rounded w-1/2"></div>
                </div>
                <div class="mt-auto pt-4 space-y-2">
                  <div class="h-3 bg-white/10 rounded w-24"></div>
                  <div class="h-3 bg-white/10 rounded w-32"></div>
                </div>
              </div>
              <div class="p-4 pt-0 grid grid-cols-2 gap-2">
                <div class="h-10 bg-white/10 rounded-xl"></div>
                <div class="h-10 bg-white/10 rounded-xl"></div>
              </div>
            </div>
          </div>
          <div class="relative h-[320px] w-full">
            <div
              class="absolute inset-x-0 top-0 h-full rounded-xl shadow-lg border border-white/10 overflow-hidden glass-panel animate-pulse">
              <div class="p-4 flex-1 flex flex-col">
                <div class="flex justify-between items-start mb-3">
                  <div class="w-14 h-16 bg-white/10 rounded-lg"></div>
                  <div class="w-20 h-6 bg-white/10 rounded-full"></div>
                </div>
                <div class="space-y-2 mb-4">
                  <div class="h-4 bg-white/10 rounded w-3/4"></div>
                  <div class="h-4 bg-white/10 rounded w-1/2"></div>
                </div>
                <div class="mt-auto pt-4 space-y-2">
                  <div class="h-3 bg-white/10 rounded w-24"></div>
                  <div class="h-3 bg-white/10 rounded w-32"></div>
                </div>
              </div>
              <div class="p-4 pt-0 grid grid-cols-2 gap-2">
                <div class="h-10 bg-white/10 rounded-xl"></div>
                <div class="h-10 bg-white/10 rounded-xl"></div>
              </div>
            </div>
          </div>
          <div class="relative h-[320px] w-full">
            <div
              class="absolute inset-x-0 top-0 h-full rounded-xl shadow-lg border border-white/10 overflow-hidden glass-panel animate-pulse">
              <div class="p-4 flex-1 flex flex-col">
                <div class="flex justify-between items-start mb-3">
                  <div class="w-14 h-16 bg-white/10 rounded-lg"></div>
                  <div class="w-20 h-6 bg-white/10 rounded-full"></div>
                </div>
                <div class="space-y-2 mb-4">
                  <div class="h-4 bg-white/10 rounded w-3/4"></div>
                  <div class="h-4 bg-white/10 rounded w-1/2"></div>
                </div>
                <div class="mt-auto pt-4 space-y-2">
                  <div class="h-3 bg-white/10 rounded w-24"></div>
                  <div class="h-3 bg-white/10 rounded w-32"></div>
                </div>
              </div>
              <div class="p-4 pt-0 grid grid-cols-2 gap-2">
                <div class="h-10 bg-white/10 rounded-xl"></div>
                <div class="h-10 bg-white/10 rounded-xl"></div>
              </div>
            </div>
          </div>
          <div class="relative h-[320px] w-full">
            <div
              class="absolute inset-x-0 top-0 h-full rounded-xl shadow-lg border border-white/10 overflow-hidden glass-panel animate-pulse">
              <div class="p-4 flex-1 flex flex-col">
                <div class="flex justify-between items-start mb-3">
                  <div class="w-14 h-16 bg-white/10 rounded-lg"></div>
                  <div class="w-20 h-6 bg-white/10 rounded-full"></div>
                </div>
                <div class="space-y-2 mb-4">
                  <div class="h-4 bg-white/10 rounded w-3/4"></div>
                  <div class="h-4 bg-white/10 rounded w-1/2"></div>
                </div>
                <div class="mt-auto pt-4 space-y-2">
                  <div class="h-3 bg-white/10 rounded w-24"></div>
                  <div class="h-3 bg-white/10 rounded w-32"></div>
                </div>
              </div>
              <div class="p-4 pt-0 grid grid-cols-2 gap-2">
                <div class="h-10 bg-white/10 rounded-xl"></div>
                <div class="h-10 bg-white/10 rounded-xl"></div>
              </div>
            </div>
          </div>
          <div class="relative h-[320px] w-full">
            <div
              class="absolute inset-x-0 top-0 h-full rounded-xl shadow-lg border border-white/10 overflow-hidden glass-panel animate-pulse">
              <div class="p-4 flex-1 flex flex-col">
                <div class="flex justify-between items-start mb-3">
                  <div class="w-14 h-16 bg-white/10 rounded-lg"></div>
                  <div class="w-20 h-6 bg-white/10 rounded-full"></div>
                </div>
                <div class="space-y-2 mb-4">
                  <div class="h-4 bg-white/10 rounded w-3/4"></div>
                  <div class="h-4 bg-white/10 rounded w-1/2"></div>
                </div>
                <div class="mt-auto pt-4 space-y-2">
                  <div class="h-3 bg-white/10 rounded w-24"></div>
                  <div class="h-3 bg-white/10 rounded w-32"></div>
                </div>
              </div>
              <div class="p-4 pt-0 grid grid-cols-2 gap-2">
                <div class="h-10 bg-white/10 rounded-xl"></div>
                <div class="h-10 bg-white/10 rounded-xl"></div>
              </div>
            </div>
          </div>
          <div class="relative h-[320px] w-full">
            <div
              class="absolute inset-x-0 top-0 h-full rounded-xl shadow-lg border border-white/10 overflow-hidden glass-panel animate-pulse">
              <div class="p-4 flex-1 flex flex-col">
                <div class="flex justify-between items-start mb-3">
                  <div class="w-14 h-16 bg-white/10 rounded-lg"></div>
                  <div class="w-20 h-6 bg-white/10 rounded-full"></div>
                </div>
                <div class="space-y-2 mb-4">
                  <div class="h-4 bg-white/10 rounded w-3/4"></div>
                  <div class="h-4 bg-white/10 rounded w-1/2"></div>
                </div>
                <div class="mt-auto pt-4 space-y-2">
                  <div class="h-3 bg-white/10 rounded w-24"></div>
                  <div class="h-3 bg-white/10 rounded w-32"></div>
                </div>
              </div>
              <div class="p-4 pt-0 grid grid-cols-2 gap-2">
                <div class="h-10 bg-white/10 rounded-xl"></div>
                <div class="h-10 bg-white/10 rounded-xl"></div>
              </div>
            </div>
          </div>
          <div class="relative h-[320px] w-full">
            <div
              class="absolute inset-x-0 top-0 h-full rounded-xl shadow-lg border border-white/10 overflow-hidden glass-panel animate-pulse">
              <div class="p-4 flex-1 flex flex-col">
                <div class="flex justify-between items-start mb-3">
                  <div class="w-14 h-16 bg-white/10 rounded-lg"></div>
                  <div class="w-20 h-6 bg-white/10 rounded-full"></div>
                </div>
                <div class="space-y-2 mb-4">
                  <div class="h-4 bg-white/10 rounded w-3/4"></div>
                  <div class="h-4 bg-white/10 rounded w-1/2"></div>
                </div>
                <div class="mt-auto pt-4 space-y-2">
                  <div class="h-3 bg-white/10 rounded w-24"></div>
                  <div class="h-3 bg-white/10 rounded w-32"></div>
                </div>
              </div>
              <div class="p-4 pt-0 grid grid-cols-2 gap-2">
                <div class="h-10 bg-white/10 rounded-xl"></div>
                <div class="h-10 bg-white/10 rounded-xl"></div>
              </div>
            </div>
          </div>
          <div class="relative h-[320px] w-full">
            <div
              class="absolute inset-x-0 top-0 h-full rounded-xl shadow-lg border border-white/10 overflow-hidden glass-panel animate-pulse">
              <div class="p-4 flex-1 flex flex-col">
                <div class="flex justify-between items-start mb-3">
                  <div class="w-14 h-16 bg-white/10 rounded-lg"></div>
                  <div class="w-20 h-6 bg-white/10 rounded-full"></div>
                </div>
                <div class="space-y-2 mb-4">
                  <div class="h-4 bg-white/10 rounded w-3/4"></div>
                  <div class="h-4 bg-white/10 rounded w-1/2"></div>
                </div>
                <div class="mt-auto pt-4 space-y-2">
                  <div class="h-3 bg-white/10 rounded w-24"></div>
                  <div class="h-3 bg-white/10 rounded w-32"></div>
                </div>
              </div>
              <div class="p-4 pt-0 grid grid-cols-2 gap-2">
                <div class="h-10 bg-white/10 rounded-xl"></div>
                <div class="h-10 bg-white/10 rounded-xl"></div>
              </div>
            </div>
          </div>
          <div class="relative h-[320px] w-full">
            <div
              class="absolute inset-x-0 top-0 h-full rounded-xl shadow-lg border border-white/10 overflow-hidden glass-panel animate-pulse">
              <div class="p-4 flex-1 flex flex-col">
                <div class="flex justify-between items-start mb-3">
                  <div class="w-14 h-16 bg-white/10 rounded-lg"></div>
                  <div class="w-20 h-6 bg-white/10 rounded-full"></div>
                </div>
                <div class="space-y-2 mb-4">
                  <div class="h-4 bg-white/10 rounded w-3/4"></div>
                  <div class="h-4 bg-white/10 rounded w-1/2"></div>
                </div>
                <div class="mt-auto pt-4 space-y-2">
                  <div class="h-3 bg-white/10 rounded w-24"></div>
                  <div class="h-3 bg-white/10 rounded w-32"></div>
                </div>
              </div>
              <div class="p-4 pt-0 grid grid-cols-2 gap-2">
                <div class="h-10 bg-white/10 rounded-xl"></div>
                <div class="h-10 bg-white/10 rounded-xl"></div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="max-w-7xl mx-auto px-4 py-8">
        <div class="ad-container my-8"><ins class="adsbygoogle" data-ad-client="ca-pub-7893721225790912"
            data-ad-format="auto" data-ad-slot="1234567891" data-full-width-responsive="true"
            style="display:block"></ins></div>
      </div>
      <script
        type="application/ld+json">{"@context":"https://schema.org","@type":"WebSite","name":"Find Toronto Events","url":"https://www.findtorontoevents.ca","potentialAction":{"@type":"SearchAction","target":"https://www.findtorontoevents.ca/?q={search_term_string}","query-input":"required name=search_term_string"},"description":"The ultimate calendar for Toronto dating events, social mixers, and things to do this weekend."}</script>
      <section class="max-w-7xl mx-auto px-6 py-12 border-t border-white/5 text-[var(--text-2)]">
        <div class="grid md:grid-cols-2 gap-12">
          <article>
            <h2 class="text-2xl font-bold text-white mb-4">Discover the Best Things to Do in Toronto This Weekend</h2>
            <p class="mb-4 text-sm leading-relaxed">Looking for <strong>Things to do in Toronto</strong>? Our curated
              calendar is updated daily to bring you the best <strong>GTA Happenings</strong>. Whether you're searching
              for "What's On Toronto" guides or specific <strong>Toronto Activities</strong>, we categorize events to
              help you find exactly what fits your vibe.</p>
            <p class="text-sm leading-relaxed">From underground concert venues to high-energy festivals, our
              <strong>Toronto Calendar</strong> covers it all. We specifically highlight <strong>Best things to do in
                Toronto this weekend</strong> so you never miss out on the action.
            </p>
          </article>
          <article>
            <h2 class="text-2xl font-bold text-white mb-4">Toronto Dating &amp; Social Mixers</h2>
            <p class="mb-4 text-sm leading-relaxed">Finding it hard to meet new people? Check out our dedicated section
              for <strong>Toronto Dating events</strong> and <strong>Toronto Mingle</strong> opportunities. We aggregate
              the top singles nights, speed dating, and social mixers designed to help <strong>Toronto Friends</strong>
              connect.</p>
            <p class="text-sm leading-relaxed">Stop endlessly swiping. Our feed prioritizes real-world connection
              events, from casual "Toronto Mingle" meetups to professional networking. If you're looking to <strong>Find
                Toronto Events</strong> that spark genuine connection, you're in the right place.</p>
          </article>
        </div>
      </section>
      <footer class="py-12 text-center text-[var(--text-3)] border-t border-white/5 space-y-4">
        <div class="flex justify-center gap-6"><a
            class="flex items-center gap-2 px-4 py-2 bg-white/5 hover:bg-white/10 rounded-full text-[10px] font-black uppercase tracking-widest transition-all border border-white/10"
            href="#">üîù Back to Top</a></div>
        <div class="opacity-50 text-xs">
          <p>Built with ‚ù§Ô∏è for Toronto</p>
          <p class="mt-1">v0.5.2<!-- -->-tactical-geotime-fixed</p>
        </div>
      </footer>
    </main><!--$--><!--/$-->
    <footer class="mt-20 py-20 border-t border-white/5 text-center bg-black/20 backdrop-blur-sm" id="global-footer">
      <div class="max-w-xl mx-auto space-y-8 px-6">
        <div class="space-y-4">
          <h3 class="text-xl font-black uppercase tracking-widest text-white/80">Support Node</h3>
          <p class="text-xs text-[var(--text-3)] font-medium leading-relaxed">Encountered a glitch in the event stream
            or have a venue to suggest? Our uplink is open for manual transmissions.</p>
          <div class="flex flex-col items-center gap-3">
            <div
              class="group relative px-6 py-4 bg-white/5 border border-white/10 rounded-2xl transition-all hover:bg-white/10 hover:border-[var(--pk-500)]/30 shadow-2xl">
              <span class="text-[10px] font-black uppercase text-[var(--pk-400)] block mb-1">Secure Uplink</span>
              <div class="flex items-center gap-2 font-mono text-sm text-white select-all"><span>support</span><span
                  class="text-[var(--pk-500)]">@</span><span>findtorontoevents.ca</span></div>
            </div>
            <p class="text-[9px] font-bold uppercase tracking-tighter text-white/20">Automated responses active ‚Ä¢
              Response time: 24-48h</p>
          </div>
        </div>
        <div class="pt-8 border-t border-white/5 grid grid-cols-2 md:grid-cols-3 gap-4">
          <a class="text-[10px] font-black uppercase tracking-widest text-[var(--text-3)] hover:text-white transition-colors"
            href="/">Event discovery</a>
          <a class="text-[10px] font-black uppercase tracking-widest text-[var(--text-3)] hover:text-white transition-colors"
            href="/findstocks">Stock analysis</a>
          <a class="text-[10px] font-black uppercase tracking-widest text-[var(--text-3)] hover:text-white transition-colors"
            href="/fc/#/guest">FAVCREATORS</a>
          <a class="text-[10px] font-black uppercase tracking-widest text-[var(--text-3)] hover:text-white transition-colors"
            href="/2xko">2XKO data</a>
          <a class="text-[10px] font-black uppercase tracking-widest text-[var(--text-3)] hover:text-white transition-colors"
            href="/WINDOWSFIXER/">Boot Fixer</a>
        </div>
        <div class="pt-8 opacity-30 text-[9px] font-bold uppercase tracking-[0.4em] text-[var(--text-3)]">Built for
          Toronto ‚Ä¢ Antigravity Systems v0.5.0</div>
      </div>
    </footer>
  </div>
  <script async="" id="_R_" src="/next/_next/static/chunks/628f1cf8c6948755.js"></script>
  <script src="/add-promos.js" async></script>
  <script src="/adsense-integration.js" async></script>
  <script>(self.__next_f = self.__next_f || []).push([0])</script>
  <script>self.__next_f.push([1, "1:\"$Sreact.fragment\"\n2:I[11093,[\"/next/_next/static/chunks/a2ac3a6616d60872.js\"],\"SettingsProvider\"]\n3:I[49830,[\"/next/_next/static/chunks/a2ac3a6616d60872.js\"],\"default\"]\n4:I[40625,[\"/next/_next/static/chunks/a2ac3a6616d60872.js\"],\"default\"]\n5:I[8517,[\"/next/_next/static/chunks/a2ac3a6616d60872.js\"],\"default\"]\n6:I[39756,[\"/next/_next/static/chunks/ff1a16fafef87110.js\",\"/next/_next/static/chunks/7c4eddd014120b50.js\"],\"default\"]\n7:I[37457,[\"/next/_next/static/chunks/ff1a16fafef87110.js\",\"/next/_next/static/chunks/7c4eddd014120b50.js\"],\"default\"]\n8:I[6329,[\"/next/_next/static/chunks/a2ac3a6616d60872.js\"],\"default\"]\n9:I[47257,[\"/next/_next/static/chunks/ff1a16fafef87110.js\",\"/next/_next/static/chunks/7c4eddd014120b50.js\"],\"ClientPageRoot\"]\na:I[52683,[\"/next/_next/static/chunks/a2ac3a6616d60872.js\",\"/next/_next/static/chunks/f1a9dd578dc871d3.js\",\"/next/_next/static/chunks/afe53b3593ec888c.js\",\"/next/_next/static/chunks/1bbf7aa8dcc742fe.js\"],\"default\"]\nd:I[97367,[\"/next/_next/static/chunks/ff1a16fafef87110.js\",\"/next/_next/static/chunks/7c4eddd014120b50.js\"],\"OutletBoundary\"]\ne:\"$Sreact.suspense\"\n10:I[97367,[\"/next/_next/static/chunks/ff1a16fafef87110.js\",\"/next/_next/static/chunks/7c4eddd014120b50.js\"],\"ViewportBoundary\"]\n12:I[97367,[\"/next/_next/static/chunks/ff1a16fafef87110.js\",\"/next/_next/static/chunks/7c4eddd014120b50.js\"],\"MetadataBoundary\"]\n14:I[68027,[],\"default\"]\n:HL[\"/next/_next/static/chunks/cd9d6741b3ff3a25.css\",\"style\"]\n:HL[\"/next/_next/static/media/83afe278b6a6bb3c-s.p.3a6ba036.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n"])</script>
  <script>self.__next_f.push([1, "0:{\"P\":null,\"b\":\"t9zQv5tlF0cw5EL1JFoOR\",\"c\":[\"\",\"\"],\"q\":\"\",\"i\":false,\"f\":[[[\"\",{\"children\":[\"__PAGE__\",{}]},\"$undefined\",\"$undefined\",true],[[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/next/_next/static/chunks/cd9d6741b3ff3a25.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}],[\"$\",\"script\",\"script-0\",{\"src\":\"/next/_next/static/chunks/a2ac3a6616d60872.js\",\"async\":true,\"nonce\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"en\",\"children\":[[\"$\",\"head\",null,{\"children\":[[\"$\",\"meta\",null,{\"httpEquiv\":\"Cache-Control\",\"content\":\"no-cache, no-store, must-revalidate\"}],[\"$\",\"meta\",null,{\"httpEquiv\":\"Pragma\",\"content\":\"no-cache\"}],[\"$\",\"meta\",null,{\"httpEquiv\":\"Expires\",\"content\":\"0\"}],[\"$\",\"meta\",null,{\"name\":\"google\",\"content\":\"notranslate\"}],[\"$\",\"script\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"\\n              // Load AdSense asynchronously with error handling\\n              (function() {\\n                try {\\n                  var script = document.createElement('script');\\n                  script.async = true;\\n                  script.src = 'https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7893721225790912';\\n                  script.crossOrigin = 'anonymous';\\n                  script.onerror = function() {\\n                    // Silently handle AdSense load errors - ads are optional\\n                    console.warn('AdSense script failed to load (this is OK if ads are disabled or network is restricted)');\\n                  };\\n                  document.head.appendChild(script);\\n                } catch (e) {\\n                  console.warn('AdSense script initialization failed:', e);\\n                }\\n              })();\\n            \"}}]]}],[\"$\",\"body\",null,{\"className\":\"inter_5972bc34-module__OU16Qa__className\",\"children\":[\"$\",\"$L2\",null,{\"children\":[\"$\",\"$L3\",null,{\"nav\":[\"$\",\"$L4\",null,{}],\"settingsModal\":[\"$\",\"$L5\",null,{}],\"children\":[[\"$\",\"$L6\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L7\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":404}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],[]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}],[\"$\",\"$L8\",null,{}]]}]}]}]]}]]}],{\"children\":[[\"$\",\"$1\",\"c\",{\"children\":[[\"$\",\"$L9\",null,{\"Component\":\"$a\",\"serverProvidedParams\":{\"searchParams\":{},\"params\":{},\"promises\":[\"$@b\",\"$@c\"]}}],[[\"$\",\"script\",\"script-0\",{\"src\":\"/next/_next/static/chunks/f1a9dd578dc871d3.js\",\"async\":true,\"nonce\":\"$undefined\"}],[\"$\",\"script\",\"script-1\",{\"src\":\"/next/_next/static/chunks/afe53b3593ec888c.js\",\"async\":true,\"nonce\":\"$undefined\"}],[\"$\",\"script\",\"script-2\",{\"src\":\"/next/_next/static/chunks/1bbf7aa8dcc742fe.js\",\"async\":true,\"nonce\":\"$undefined\"}]],[\"$\",\"$Ld\",null,{\"children\":[\"$\",\"$e\",null,{\"name\":\"Next.MetadataOutlet\",\"children\":\"$@f\"}]}]]}],{},null,false,false]},null,false,false],[\"$\",\"$1\",\"h\",{\"children\":[null,[\"$\",\"$L10\",null,{\"children\":\"$L11\"}],[\"$\",\"div\",null,{\"hidden\":true,\"children\":[\"$\",\"$L12\",null,{\"children\":[\"$\",\"$e\",null,{\"name\":\"Next.Metadata\",\"children\":\"$L13\"}]}]}],[\"$\",\"meta\",null,{\"name\":\"next-size-adjust\",\"content\":\"\"}]]}],false]],\"m\":\"$undefined\",\"G\":[\"$14\",[]],\"S\":true}\n"])</script>
  <script>self.__next_f.push([1, "b:{}\nc:\"$0:f:0:1:1:children:0:props:children:0:props:serverProvidedParams:params\"\n"])</script>
  <script>self.__next_f.push([1, "11:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"meta\",\"1\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\n"])</script>
  <script>self.__next_f.push([1, "15:I[27201,[\"/next/_next/static/chunks/ff1a16fafef87110.js\",\"/next/_next/static/chunks/7c4eddd014120b50.js\"],\"IconMark\"]\nf:null\n"])</script>
  <script>self.__next_f.push([1, "13:[[\"$\",\"title\",\"0\",{\"children\":\"Find Toronto Events | Dating, Activities \u0026 Things to Do This Weekend\"}],[\"$\",\"meta\",\"1\",{\"name\":\"description\",\"content\":\"Your ultimate guide to Toronto events, dating meetups, and activities. Discover the best things to do in Toronto, from GTA happenings to mingle events and weekend plans.\"}],[\"$\",\"meta\",\"2\",{\"name\":\"keywords\",\"content\":\"Toronto Events,Toronto Dating,Toronto Activities,Things to do in Toronto,Toronto Calendar,GTA Happenings,Toronto Mingle,What's On Toronto\"}],[\"$\",\"meta\",\"3\",{\"property\":\"og:title\",\"content\":\"Find Toronto Events | Dating, Activities \u0026 Things to Do This Weekend\"}],[\"$\",\"meta\",\"4\",{\"property\":\"og:description\",\"content\":\"Your ultimate guide to Toronto events, dating meetups, and activities. Discover the best things to do in Toronto this weekend.\"}],[\"$\",\"meta\",\"5\",{\"property\":\"og:site_name\",\"content\":\"Find Toronto Events\"}],[\"$\",\"meta\",\"6\",{\"property\":\"og:locale\",\"content\":\"en_CA\"}],[\"$\",\"meta\",\"7\",{\"property\":\"og:type\",\"content\":\"website\"}],[\"$\",\"meta\",\"8\",{\"name\":\"twitter:card\",\"content\":\"summary\"}],[\"$\",\"meta\",\"9\",{\"name\":\"twitter:title\",\"content\":\"Find Toronto Events | Dating, Activities \u0026 Things to Do This Weekend\"}],[\"$\",\"meta\",\"10\",{\"name\":\"twitter:description\",\"content\":\"Your ultimate guide to Toronto events, dating meetups, and activities. Discover the best things to do in Toronto this weekend.\"}],[\"$\",\"link\",\"11\",{\"rel\":\"icon\",\"href\":\"/favicon.ico?favicon.0b3bf435.ico\",\"sizes\":\"256x256\",\"type\":\"image/x-icon\"}],[\"$\",\"$L15\",\"12\",{}]]\n"])</script>  <script>
(function() {
  console.log('[FORCE BANNERS] Aggressive banner protection loaded');
  
  const FAVCREATORS = '<div class="max-w-7xl mx-auto px-4" style="margin-bottom: 1rem;"><div class="jsx-1b9a23bd3fa6c640 favcreators-promo"><div class="jsx-1b9a23bd3fa6c640 promo-banner"><div class="jsx-1b9a23bd3fa6c640 flex items-center gap-3 transition-all duration-500 opacity-60 grayscale hover:opacity-100 hover:grayscale-0 group"><div class="jsx-1b9a23bd3fa6c640 w-10 h-10 rounded-full bg-gradient-to-br from-pink-500 to-rose-600 flex items-center justify-center shadow-lg animate-pulse-slow"><span class="jsx-1b9a23bd3fa6c640 text-xl">üíé</span></div><div class="jsx-1b9a23bd3fa6c640 transition-all duration-500 override-overflow max-w-0 opacity-0 overflow-hidden group-hover:max-w-xs group-hover:opacity-100"><div class="jsx-1b9a23bd3fa6c640 flex flex-col whitespace-nowrap"><span class="jsx-1b9a23bd3fa6c640 text-sm font-bold text-white">Fav Creators</span><span class="jsx-1b9a23bd3fa6c640 text-[10px] text-[var(--text-2)]">Track creators across TikTok, Twitch, Kick & YouTube</span></div></div><div class="jsx-1b9a23bd3fa6c640 relative"><a class="jsx-1b9a23bd3fa6c640 ml-2 px-3 py-1.5 rounded-full bg-white/10 hover:bg-white/20 text-xs font-bold text-white transition-all whitespace-nowrap" href="/fc/#/guest" rel="noopener noreferrer" target="_blank">Open App ‚Üí</a><div class="jsx-1b9a23bd3fa6c640 absolute right-0 mt-2 w-72 p-4 bg-[var(--surface-1)] border border-white/10 rounded-lg shadow-xl opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-300 z-[9999]" style="top: calc(100% + 8px); max-width: 300px; line-height: 1.5; transform: translateY(0);"><p class="text-xs text-[var(--text-2)] mb-2">Track your favorite creators across TikTok, Twitch, Kick and YouTube. Never miss their live streams or stories!</p><div class="flex gap-2"><a href="/fc/#/guest" target="_blank" class="text-[10px] px-2 py-1 bg-pink-500/20 text-pink-300 rounded hover:bg-pink-500/30 transition">TikTok</a><a href="/fc/#/guest" target="_blank" class="text-[10px] px-2 py-1 bg-purple-500/20 text-purple-300 rounded hover:bg-purple-500/30 transition">Twitch</a><a href="/fc/#/guest" target="_blank" class="text-[10px] px-2 py-1 bg-green-500/20 text-green-300 rounded hover:bg-green-500/30 transition">Kick</a></div></div></div></div></div></div></div>';
  
  const STOCKS = '<div class="max-w-7xl mx-auto px-4" style="margin-bottom: 1rem;"><div class="jsx-1b9a23bd3fa6c640 stocks-promo"><div class="jsx-1b9a23bd3fa6c640 promo-banner"><div class="jsx-1b9a23bd3fa6c640 flex items-center gap-3 transition-all duration-500 opacity-60 grayscale hover:opacity-100 hover:grayscale-0 group"><div class="jsx-1b9a23bd3fa6c640 w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center shadow-lg animate-pulse-slow"><span class="jsx-1b9a23bd3fa6c640 text-xl">üìà</span></div><div class="jsx-1b9a23bd3fa6c640 transition-all duration-500 override-overflow max-w-0 opacity-0 overflow-hidden group-hover:max-w-xs group-hover:opacity-100"><div class="jsx-1b9a23bd3fa6c640 flex flex-col whitespace-nowrap"><span class="jsx-1b9a23bd3fa6c640 text-sm font-bold text-white">Stock Ideas</span><span class="jsx-1b9a23bd3fa6c640 text-[10px] text-[var(--text-2)]">Research, picks & market insights</span></div></div><div class="jsx-1b9a23bd3fa6c640 relative"><a class="jsx-1b9a23bd3fa6c640 ml-2 px-3 py-1.5 rounded-full bg-white/10 hover:bg-white/20 text-xs font-bold text-white transition-all whitespace-nowrap" href="/findstocks/" rel="noopener noreferrer" target="_blank">Open App ‚Üí</a><div class="jsx-1b9a23bd3fa6c640 absolute top-full right-0 mt-2 w-52 p-3 bg-[var(--surface-1)] border border-white/10 rounded-lg shadow-xl opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-300 z-50"><p class="text-xs text-[var(--text-2)]">Looking for stock ideas? Browse research, daily picks, and portfolio tracking tools.</p></div></div></div></div></div></div>';
  
  let restoredCount = 0;
  
  function forceBanners() {
    // Find the main container where banners should go (after header)
    const main = document.querySelector('main');
    if (!main) return;
    
    const count = document.querySelectorAll('.promo-banner').length;
    if (count >= 4) return;
    
    // Find insertion point - look for existing banners or the events grid
    let insertBefore = main.querySelector('#events-grid') || 
                       main.querySelector('.ad-container') ||
                       main.querySelector('.max-w-7xl.py-20');
    
    if (!insertBefore) {
      // Find the first max-w-7xl that's not a promo
      const containers = main.querySelectorAll('.max-w-7xl');
      for (const container of containers) {
        if (!container.querySelector('.promo-banner')) {
          insertBefore = container;
          break;
        }
      }
    }
    
    if (insertBefore && !document.querySelector('.favcreators-promo')) {
      insertBefore.insertAdjacentHTML('beforebegin', FAVCREATORS);
      console.log('[FORCE BANNERS] Restored FavCreators');
    }
    
    if (insertBefore && !document.querySelector('.stocks-promo')) {
      insertBefore.insertAdjacentHTML('beforebegin', STOCKS);
      console.log('[FORCE BANNERS] Restored Stocks');
    }
    
    // Apply force-visible styles to ALL banners
    document.querySelectorAll('.promo-banner').forEach(el => {
      el.style.display = 'block';
      el.style.visibility = 'visible';
    });
    
    // Apply styles to parent containers too
    document.querySelectorAll('.favcreators-promo, .stocks-promo, .windows-fixer-promo, .movieshows-promo').forEach(el => {
      el.style.display = 'block';
      el.style.visibility = 'visible';
      el.style.opacity = '1';
    });
  }
  
  // More aggressive restoration
  function aggressiveRestore() {
    const count = document.querySelectorAll('.promo-banner').length;
    if (count < 4) {
      console.log('[FORCE BANNERS] Only ' + count + ' banners found, restoring...');
      forceBanners();
    }
  }
  
  // Run immediately and frequently
  forceBanners();
  
  // Run many times to catch React hydration
  [100, 300, 500, 800, 1000, 1500, 2000, 2500, 3000, 4000, 5000, 7000, 10000].forEach(delay => {
    setTimeout(aggressiveRestore, delay);
  });
  
  // Keep checking every second
  setInterval(aggressiveRestore, 2000);
  
  // Watch for DOM changes
  const observer = new MutationObserver(function() {
    setTimeout(aggressiveRestore, 50);
  });
  
  // Start watching body as soon as possible
  if (document.body) {
    observer.observe(document.body, { childList: true, subtree: true });
  } else {
    document.addEventListener('DOMContentLoaded', function() {
      observer.observe(document.body, { childList: true, subtree: true });
    });
  }
})();
</script>

<!-- Multi-Source Event Enhancement -->
<style id="multi-source-styles">
  .multi-source-badge {
    position: absolute;
    top: 8px;
    right: 8px;
    display: flex;
    align-items: center;
    gap: 4px;
    padding: 4px 8px;
    background: linear-gradient(135deg, rgba(99, 102, 241, 0.9), rgba(139, 92, 246, 0.9));
    border-radius: 12px;
    font-size: 10px;
    font-weight: 700;
    color: white;
    cursor: pointer;
    z-index: 10;
    transition: all 0.2s ease;
    box-shadow: 0 2px 8px rgba(99, 102, 241, 0.4);
  }
  .multi-source-badge:hover {
    transform: scale(1.05);
    box-shadow: 0 4px 12px rgba(99, 102, 241, 0.6);
  }
  .multi-source-panel {
    position: absolute;
    top: 40px;
    right: 8px;
    left: 8px;
    background: rgba(20, 20, 30, 0.98);
    border: 1px solid rgba(255, 255, 255, 0.15);
    border-radius: 12px;
    padding: 12px;
    z-index: 50;
    opacity: 0;
    transform: translateY(-10px);
    pointer-events: none;
    transition: all 0.2s ease;
    backdrop-filter: blur(20px);
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5);
  }
  .multi-source-panel.visible {
    opacity: 1;
    transform: translateY(0);
    pointer-events: auto;
  }
  .multi-source-panel-title {
    font-size: 11px;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    color: rgba(255, 255, 255, 0.6);
    margin-bottom: 10px;
    padding-bottom: 8px;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
  }
  .source-link {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 10px;
    margin-bottom: 6px;
    background: rgba(255, 255, 255, 0.05);
    border-radius: 8px;
    text-decoration: none;
    color: white;
    transition: all 0.2s ease;
    border: 1px solid transparent;
  }
  .source-link:hover {
    background: rgba(99, 102, 241, 0.2);
    border-color: rgba(99, 102, 241, 0.4);
  }
  .source-link:last-child {
    margin-bottom: 0;
  }
  .source-link-left {
    display: flex;
    flex-direction: column;
    gap: 2px;
  }
  .source-name {
    font-size: 12px;
    font-weight: 600;
    color: white;
  }
  .source-price {
    font-size: 10px;
    color: rgba(255, 255, 255, 0.5);
  }
  .source-link-arrow {
    font-size: 14px;
    color: rgba(99, 102, 241, 0.8);
  }
  .source-link.primary {
    border-color: rgba(34, 197, 94, 0.4);
    background: rgba(34, 197, 94, 0.1);
  }
  .source-link.primary .source-name::after {
    content: ' ‚òÖ';
    color: #22c55e;
    font-size: 10px;
  }
  
  /* Quick View Modal Multi-Source Section */
  .quickview-multi-source {
    margin-top: 20px;
    padding: 16px;
    background: linear-gradient(135deg, rgba(99, 102, 241, 0.15) 0%, rgba(139, 92, 246, 0.1) 100%);
    border: 1px solid rgba(99, 102, 241, 0.3);
    border-radius: 12px;
  }
  .quickview-multi-source-header {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 14px;
    padding-bottom: 10px;
    border-bottom: 1px solid rgba(255,255,255,0.1);
  }
  .quickview-multi-source-icon {
    font-size: 22px;
  }
  .quickview-multi-source-title {
    font-size: 14px;
    font-weight: 700;
    color: #a5b4fc;
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }
  .quickview-multi-source-count {
    font-size: 11px;
    color: rgba(255,255,255,0.5);
    margin-left: auto;
    background: rgba(99, 102, 241, 0.3);
    padding: 3px 8px;
    border-radius: 10px;
  }
  .quickview-source-list {
    display: flex;
    flex-direction: column;
    gap: 10px;
  }
  .quickview-source-item {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 14px 16px;
    background: rgba(0,0,0,0.3);
    border: 1px solid rgba(255,255,255,0.1);
    border-radius: 10px;
    transition: all 0.2s ease;
    gap: 12px;
  }
  .quickview-source-item:hover {
    background: rgba(99, 102, 241, 0.2);
    border-color: rgba(99, 102, 241, 0.4);
    transform: translateX(4px);
  }
  .quickview-source-info {
    display: flex;
    flex-direction: column;
    gap: 4px;
    flex: 1;
    min-width: 0;
  }
  .quickview-source-name {
    font-size: 14px;
    font-weight: 600;
    color: white;
  }
  .quickview-source-url {
    font-size: 11px;
    color: rgba(255,255,255,0.4);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    max-width: 280px;
  }
  .quickview-source-price {
    font-size: 12px;
    color: #22c55e;
    font-weight: 600;
    margin-top: 2px;
  }
  .quickview-source-btn {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 10px 16px;
    background: linear-gradient(135deg, #4f46e5 0%, #6366f1 100%);
    border: none;
    border-radius: 8px;
    color: white;
    font-size: 13px;
    font-weight: 600;
    text-decoration: none;
    cursor: pointer;
    transition: all 0.2s ease;
    white-space: nowrap;
  }
  .quickview-source-btn:hover {
    transform: scale(1.05);
    box-shadow: 0 4px 12px rgba(99, 102, 241, 0.4);
  }
</style>
<script>
(function() {
  console.log('[MULTI-SOURCE] Initializing multi-source event enhancement');
  
  // Cache for multi-source event data
  let multiSourceEvents = {};
  let dataLoaded = false;
  
  // Load multi-source data from API
  async function loadMultiSourceData() {
    try {
      const response = await fetch('/fc/api/events_get_sources.php?all=1');
      if (!response.ok) throw new Error('API error');
      const data = await response.json();
      if (data.ok && data.events) {
        multiSourceEvents = data.events;
        dataLoaded = true;
        console.log('[MULTI-SOURCE] Loaded ' + Object.keys(multiSourceEvents).length + ' events with multiple sources');
        // Re-process existing cards
        processEventCards();
      }
    } catch (e) {
      console.warn('[MULTI-SOURCE] Failed to load multi-source data:', e);
    }
  }
  
  // Find event ID from a card element
  function findEventId(card) {
    // Try to find the event URL or ID from the card
    const links = card.querySelectorAll('a[href*="allevents"], a[href*="eventbrite"], a[href*="tickets"]');
    for (const link of links) {
      const href = link.href;
      // Try to extract event ID from URL
      const match = href.match(/\/([a-f0-9]{32})/i) || href.match(/events\/(\d+)/);
      if (match) return match[1];
    }
    // Try data attributes
    if (card.dataset.eventId) return card.dataset.eventId;
    // Try to find ID in hidden elements
    const hiddenId = card.querySelector('[data-event-id]');
    if (hiddenId) return hiddenId.dataset.eventId;
    return null;
  }
  
  // Match event by title
  function findEventByTitle(titleText) {
    if (!titleText || !dataLoaded) return null;
    const normalizedTitle = titleText.toLowerCase().trim();
    
    for (const [eventId, eventData] of Object.entries(multiSourceEvents)) {
      const eventTitle = (eventData.title || '').toLowerCase().trim();
      // Exact match or close match
      if (eventTitle === normalizedTitle) return eventData;
      // Partial match (80% of words match)
      const titleWords = normalizedTitle.split(/\s+/);
      const eventWords = eventTitle.split(/\s+/);
      const commonWords = titleWords.filter(w => eventWords.includes(w));
      if (commonWords.length / Math.max(titleWords.length, eventWords.length) > 0.7) {
        return eventData;
      }
    }
    return null;
  }
  
  // Add multi-source badge and panel to a card
  function enhanceCard(card, eventData) {
    if (card.dataset.multiSourceEnhanced) return;
    card.dataset.multiSourceEnhanced = 'true';
    
    const sources = eventData.sources || [];
    if (sources.length < 2) return;
    
    // Ensure card has relative positioning
    const computedStyle = window.getComputedStyle(card);
    if (computedStyle.position === 'static') {
      card.style.position = 'relative';
    }
    
    // Create badge
    const badge = document.createElement('div');
    badge.className = 'multi-source-badge';
    badge.innerHTML = 'üé´ ' + sources.length + ' Sources';
    badge.title = 'View all ticket sources';
    
    // Create panel
    const panel = document.createElement('div');
    panel.className = 'multi-source-panel';
    panel.innerHTML = '<div class="multi-source-panel-title">üé´ Available Sources</div>' +
      sources.map(function(s) {
        const isPrimary = s.is_primary ? ' primary' : '';
        const priceText = s.price && s.price !== '' ? s.price : 'View';
        return '<a class="source-link' + isPrimary + '" href="' + escapeHtml(s.source_url) + '" target="_blank" rel="noopener noreferrer">' +
          '<div class="source-link-left">' +
          '<span class="source-name">' + escapeHtml(s.source_name) + '</span>' +
          '<span class="source-price">' + escapeHtml(priceText) + '</span>' +
          '</div>' +
          '<span class="source-link-arrow">‚Üí</span>' +
          '</a>';
      }).join('');
    
    // Toggle panel on badge click
    badge.addEventListener('click', function(e) {
      e.preventDefault();
      e.stopPropagation();
      panel.classList.toggle('visible');
    });
    
    // Close panel when clicking outside
    document.addEventListener('click', function(e) {
      if (!panel.contains(e.target) && !badge.contains(e.target)) {
        panel.classList.remove('visible');
      }
    });
    
    card.appendChild(badge);
    card.appendChild(panel);
    console.log('[MULTI-SOURCE] Enhanced card with ' + sources.length + ' sources');
  }
  
  function escapeHtml(str) {
    if (!str) return '';
    const div = document.createElement('div');
    div.textContent = str;
    return div.innerHTML;
  }
  
  // Process all event cards on the page
  function processEventCards() {
    if (!dataLoaded) return;
    
    // Find event cards - look for typical card structures
    const cards = document.querySelectorAll('[class*="glass-panel"]:not(.animate-pulse), [class*="event-card"], [class*="EventCard"]');
    
    cards.forEach(function(card) {
      if (card.dataset.multiSourceEnhanced) return;
      
      // Find title in card
      const titleEl = card.querySelector('h2, h3, [class*="title"], [class*="Title"]');
      if (!titleEl) return;
      
      const titleText = titleEl.textContent;
      const eventData = findEventByTitle(titleText);
      
      if (eventData && eventData.sources && eventData.sources.length >= 2) {
        enhanceCard(card, eventData);
      }
    });
  }
  
  // Enhance Quick View modal with multi-source section
  function enhanceQuickViewModal(modal) {
    if (modal.dataset.multiSourceEnhanced) return;
    
    // Find the event title in the modal - look for various patterns
    let titleEl = modal.querySelector('h1, h2, h3');
    if (!titleEl) {
      // Try finding any element with a title-like class
      titleEl = modal.querySelector('[class*="title" i], [class*="name" i], [class*="heading" i]');
    }
    if (!titleEl) return;
    
    const titleText = titleEl.textContent.trim();
    console.log('[MULTI-SOURCE] Found modal title:', titleText);
    
    const eventData = findEventByTitle(titleText);
    
    if (!eventData || !eventData.sources || eventData.sources.length < 2) {
      console.log('[MULTI-SOURCE] No multi-source data for:', titleText);
      return;
    }
    
    modal.dataset.multiSourceEnhanced = 'true';
    const sources = eventData.sources;
    
    // Create the multi-source section
    const section = document.createElement('div');
    section.className = 'quickview-multi-source';
    section.innerHTML = 
      '<div class="quickview-multi-source-header">' +
        '<span class="quickview-multi-source-icon">üé´</span>' +
        '<span class="quickview-multi-source-title">Multiple Sources Found</span>' +
        '<span class="quickview-multi-source-count">' + sources.length + ' sources</span>' +
      '</div>' +
      '<div class="quickview-source-list">' +
        sources.map(function(s, index) {
          const priceText = s.price && s.price !== '' ? s.price : 'View Event';
          const urlDisplay = s.source_url ? s.source_url.replace(/^https?:\/\//, '').substring(0, 40) + '...' : '';
          return '<div class="quickview-source-item">' +
            '<div class="quickview-source-info">' +
              '<span class="quickview-source-name">' + escapeHtml(s.source_name) + (s.is_primary ? ' ‚òÖ' : '') + '</span>' +
              '<span class="quickview-source-url">' + escapeHtml(urlDisplay) + '</span>' +
              (s.price ? '<span class="quickview-source-price">' + escapeHtml(priceText) + '</span>' : '') +
            '</div>' +
            '<a class="quickview-source-btn" href="' + escapeHtml(s.source_url) + '" target="_blank" rel="noopener noreferrer">' +
              'View ‚Üí' +
            '</a>' +
          '</div>';
        }).join('') +
      '</div>';
    
    // Find the best place to insert: after price, before buttons, or at end
    // Look for VIEW FULL EVENT PAGE button's parent
    const viewFullBtn = modal.querySelector('a[href*="allevents"], a[href*="eventbrite"], button:contains("VIEW FULL"), a:contains("VIEW FULL")');
    if (viewFullBtn && viewFullBtn.parentElement) {
      viewFullBtn.parentElement.insertBefore(section, viewFullBtn);
    } else {
      // Find any button container at the bottom
      const buttons = modal.querySelectorAll('button, a[class*="btn"]');
      if (buttons.length > 0) {
        const lastButton = buttons[buttons.length - 1];
        if (lastButton.parentElement) {
          lastButton.parentElement.insertBefore(section, lastButton.parentElement.firstChild);
        }
      } else {
        // Just append to modal
        modal.appendChild(section);
      }
    }
    
    console.log('[MULTI-SOURCE] Enhanced Quick View modal with ' + sources.length + ' sources');
  }
  
  // Global function to enhance any visible Quick View modals
  function enhanceVisibleModals() {
    if (!dataLoaded) return;
    
    // Look for VIEW FULL EVENT PAGE text which indicates Quick View is open
    const viewFullButtons = document.querySelectorAll('a, button');
    let quickViewOpen = false;
    let eventTitle = null;
    
    for (const btn of viewFullButtons) {
      const text = btn.textContent || '';
      if (text.includes('VIEW FULL EVENT PAGE')) {
        quickViewOpen = true;
        // Find the event title - look for nearby h1, h2, h3
        let parent = btn.parentElement;
        for (let i = 0; i < 10 && parent; i++) {
          const titleEl = parent.querySelector('h1, h2, h3');
          if (titleEl && titleEl.textContent) {
            eventTitle = titleEl.textContent.trim();
            break;
          }
          parent = parent.parentElement;
        }
        break;
      }
    }
    
    // Get or create the floating sources panel
    let floatingPanel = document.getElementById('multi-source-floating-panel');
    
    if (quickViewOpen && eventTitle) {
      console.log('[MULTI-SOURCE] Quick View detected for:', eventTitle);
      const eventData = findEventByTitle(eventTitle);
      
      if (eventData && eventData.sources && eventData.sources.length >= 2) {
        const sources = eventData.sources;
        
        if (!floatingPanel) {
          floatingPanel = document.createElement('div');
          floatingPanel.id = 'multi-source-floating-panel';
          floatingPanel.style.cssText = 
            'position: fixed; bottom: 20px; left: 20px; z-index: 10000; ' +
            'background: linear-gradient(135deg, rgba(30, 30, 46, 0.98) 0%, rgba(45, 45, 68, 0.98) 100%); ' +
            'border: 1px solid rgba(99, 102, 241, 0.4); border-radius: 16px; ' +
            'padding: 16px; min-width: 280px; max-width: 350px; ' +
            'backdrop-filter: blur(20px); box-shadow: 0 8px 32px rgba(0, 0, 0, 0.6); ' +
            'font-family: system-ui, sans-serif;';
          document.body.appendChild(floatingPanel);
        }
        
        floatingPanel.innerHTML = 
          '<div style="display: flex; align-items: center; gap: 10px; margin-bottom: 14px; padding-bottom: 10px; border-bottom: 1px solid rgba(255,255,255,0.1);">' +
            '<span style="font-size: 22px;">üé´</span>' +
            '<span style="font-size: 14px; font-weight: 700; color: #a5b4fc; text-transform: uppercase; letter-spacing: 0.5px;">Multiple Sources</span>' +
            '<span style="font-size: 11px; color: rgba(255,255,255,0.5); margin-left: auto; background: rgba(99, 102, 241, 0.3); padding: 3px 8px; border-radius: 10px;">' + sources.length + ' sources</span>' +
          '</div>' +
          '<div style="display: flex; flex-direction: column; gap: 10px;">' +
            sources.map(function(s) {
              const priceText = s.price && s.price !== '' ? s.price : 'View';
              return '<a href="' + escapeHtml(s.source_url) + '" target="_blank" rel="noopener noreferrer" ' +
                'style="display: flex; align-items: center; justify-content: space-between; padding: 12px 14px; ' +
                'background: rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.1); border-radius: 10px; ' +
                'text-decoration: none; color: white; transition: all 0.2s ease;" ' +
                'onmouseover="this.style.background=\'rgba(99, 102, 241, 0.2)\';this.style.borderColor=\'rgba(99, 102, 241, 0.4)\';this.style.transform=\'translateX(4px)\'" ' +
                'onmouseout="this.style.background=\'rgba(0,0,0,0.3)\';this.style.borderColor=\'rgba(255,255,255,0.1)\';this.style.transform=\'none\'">' +
                '<div style="display: flex; flex-direction: column; gap: 2px;">' +
                  '<span style="font-size: 13px; font-weight: 600;">' + escapeHtml(s.source_name) + (s.is_primary ? ' ‚òÖ' : '') + '</span>' +
                  '<span style="font-size: 11px; color: #22c55e; font-weight: 500;">' + escapeHtml(priceText) + '</span>' +
                '</div>' +
                '<span style="color: rgba(99, 102, 241, 0.8); font-size: 16px;">‚Üí</span>' +
              '</a>';
            }).join('') +
          '</div>';
        
        floatingPanel.style.display = 'block';
        console.log('[MULTI-SOURCE] Showing floating panel with ' + sources.length + ' sources');
      } else if (floatingPanel) {
        floatingPanel.style.display = 'none';
      }
    } else if (floatingPanel) {
      floatingPanel.style.display = 'none';
    }
  }
  
  // Process modals that appear
  function processModals() {
    if (!dataLoaded) return;
    
    // First, try the global enhancer which looks for Quick View content
    enhanceVisibleModals();
    
    // Also look for modal/dialog elements
    const modals = document.querySelectorAll(
      '[role="dialog"], [class*="modal"], [class*="Modal"], [class*="dialog"], [class*="Dialog"], ' +
      '[class*="popup"], [class*="Popup"], [class*="quickview"], [class*="QuickView"], [class*="quick-view"]'
    );
    
    modals.forEach(function(modal) {
      // Skip if already enhanced or if it's a backdrop
      if (modal.dataset.multiSourceEnhanced) return;
      if (modal.classList.contains('opacity-0') || modal.classList.contains('pointer-events-none')) return;
      
      // Check if modal is visible
      const style = window.getComputedStyle(modal);
      if (style.display === 'none' || style.visibility === 'hidden' || style.opacity === '0') return;
      
      enhanceQuickViewModal(modal);
    });
  }
  
  // Set up mutation observer to watch for new cards AND modals
  function setupObserver() {
    const observer = new MutationObserver(function(mutations) {
      let shouldProcess = false;
      let shouldProcessModals = false;
      
      mutations.forEach(function(mutation) {
        if (mutation.addedNodes.length > 0) {
          shouldProcess = true;
          // Check if any added node could be a modal
          mutation.addedNodes.forEach(function(node) {
            if (node.nodeType === 1) { // Element node
              const classList = node.classList ? Array.from(node.classList).join(' ').toLowerCase() : '';
              const role = node.getAttribute ? node.getAttribute('role') : '';
              if (classList.includes('modal') || classList.includes('dialog') || 
                  classList.includes('popup') || classList.includes('quickview') ||
                  classList.includes('quick-view') || role === 'dialog') {
                shouldProcessModals = true;
              }
              // Also check children for modals
              if (node.querySelector && node.querySelector('[role="dialog"], [class*="modal"], [class*="quickview"]')) {
                shouldProcessModals = true;
              }
            }
          });
        }
      });
      
      if (shouldProcess && dataLoaded) {
        // Debounce processing
        clearTimeout(window._multiSourceTimeout);
        window._multiSourceTimeout = setTimeout(function() {
          processEventCards();
          processModals();
        }, 200);
      }
      
      if (shouldProcessModals && dataLoaded) {
        // Process modals with shorter delay
        clearTimeout(window._modalTimeout);
        window._modalTimeout = setTimeout(processModals, 100);
      }
    });
    
    const main = document.querySelector('main') || document.body;
    observer.observe(main, { childList: true, subtree: true });
    
    // Also observe body for modals that appear outside main
    if (main !== document.body) {
      observer.observe(document.body, { childList: true, subtree: true });
    }
    
    console.log('[MULTI-SOURCE] Observer active (cards + modals)');
  }
  
  // Initialize
  loadMultiSourceData();
  
  // Process cards after delays to catch React hydration
  setTimeout(processEventCards, 1000);
  setTimeout(processEventCards, 2000);
  setTimeout(processEventCards, 4000);
  
  // Also process modals periodically in case they open
  setTimeout(processModals, 1500);
  setTimeout(processModals, 3000);
  
  // Track which event the user clicked Quick View for
  let lastClickedEventTitle = null;
  
  // Listen for clicks on Quick View buttons to trigger modal enhancement
  document.addEventListener('click', function(e) {
    const target = e.target;
    const text = target.textContent || '';
    const isQuickViewBtn = text.toLowerCase().includes('quick view') || 
                           (target.closest && target.closest('button[class*="quick"]'));
    
    if (isQuickViewBtn) {
      console.log('[MULTI-SOURCE] Quick View button clicked, scheduling modal enhancement');
      
      // Try to find the event title from the card
      let card = target.closest && target.closest('article, [class*="card"], [class*="panel"]');
      if (card) {
        const titleEl = card.querySelector('h1, h2, h3');
        if (titleEl) {
          lastClickedEventTitle = titleEl.textContent.trim();
          console.log('[MULTI-SOURCE] Clicked event title:', lastClickedEventTitle);
        }
      }
      
      // Process modals after a short delay to let the modal appear
      setTimeout(function() { showFloatingPanelForEvent(lastClickedEventTitle); }, 100);
      setTimeout(function() { showFloatingPanelForEvent(lastClickedEventTitle); }, 300);
      setTimeout(function() { showFloatingPanelForEvent(lastClickedEventTitle); }, 500);
      setTimeout(processModals, 100);
      setTimeout(processModals, 300);
    }
  }, true);
  
  // Show floating panel for a specific event
  function showFloatingPanelForEvent(eventTitle) {
    if (!eventTitle || !dataLoaded) return;
    
    console.log('[MULTI-SOURCE] Attempting to show panel for:', eventTitle);
    const eventData = findEventByTitle(eventTitle);
    
    if (!eventData || !eventData.sources || eventData.sources.length < 2) {
      console.log('[MULTI-SOURCE] No multi-source data for this event');
      return;
    }
    
    const sources = eventData.sources;
    let floatingPanel = document.getElementById('multi-source-floating-panel');
    
    if (!floatingPanel) {
      floatingPanel = document.createElement('div');
      floatingPanel.id = 'multi-source-floating-panel';
      floatingPanel.style.cssText = 
        'position: fixed; top: 100px; right: 20px; z-index: 100000; ' +
        'background: linear-gradient(135deg, rgba(30, 30, 46, 0.98) 0%, rgba(45, 45, 68, 0.98) 100%); ' +
        'border: 1px solid rgba(99, 102, 241, 0.4); border-radius: 16px; ' +
        'padding: 16px; min-width: 280px; max-width: 350px; ' +
        'backdrop-filter: blur(20px); box-shadow: 0 8px 32px rgba(0, 0, 0, 0.6); ' +
        'font-family: system-ui, sans-serif; animation: slideInRight 0.3s ease;';
      document.body.appendChild(floatingPanel);
      
      // Add animation keyframes if not already present
      if (!document.getElementById('multi-source-animation-styles')) {
        const animStyle = document.createElement('style');
        animStyle.id = 'multi-source-animation-styles';
        animStyle.textContent = '@keyframes slideInRight { from { opacity: 0; transform: translateX(20px); } to { opacity: 1; transform: translateX(0); } }';
        document.head.appendChild(animStyle);
      }
    }
    
    floatingPanel.innerHTML = 
      '<div style="display: flex; align-items: center; gap: 10px; margin-bottom: 14px; padding-bottom: 10px; border-bottom: 1px solid rgba(255,255,255,0.1);">' +
        '<span style="font-size: 22px;">üé´</span>' +
        '<span style="font-size: 14px; font-weight: 700; color: #a5b4fc; text-transform: uppercase; letter-spacing: 0.5px;">Multiple Sources</span>' +
        '<span style="font-size: 11px; color: rgba(255,255,255,0.5); margin-left: auto; background: rgba(99, 102, 241, 0.3); padding: 3px 8px; border-radius: 10px;">' + sources.length + ' found</span>' +
        '<button id="close-floating-panel" style="background: none; border: none; color: rgba(255,255,255,0.5); cursor: pointer; font-size: 16px;">‚úï</button>' +
      '</div>' +
      '<div style="display: flex; flex-direction: column; gap: 10px;">' +
        sources.map(function(s) {
          const priceText = s.price && s.price !== '' ? s.price : 'View';
          return '<a href="' + escapeHtml(s.source_url) + '" target="_blank" rel="noopener noreferrer" ' +
            'style="display: flex; align-items: center; justify-content: space-between; padding: 12px 14px; ' +
            'background: rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.1); border-radius: 10px; ' +
            'text-decoration: none; color: white; transition: all 0.2s ease;" ' +
            'onmouseover="this.style.background=\'rgba(99, 102, 241, 0.2)\';this.style.borderColor=\'rgba(99, 102, 241, 0.4)\';this.style.transform=\'translateX(4px)\'" ' +
            'onmouseout="this.style.background=\'rgba(0,0,0,0.3)\';this.style.borderColor=\'rgba(255,255,255,0.1)\';this.style.transform=\'none\'">' +
            '<div style="display: flex; flex-direction: column; gap: 2px;">' +
              '<span style="font-size: 13px; font-weight: 600;">' + escapeHtml(s.source_name) + (s.is_primary ? ' ‚òÖ' : '') + '</span>' +
              '<span style="font-size: 11px; color: #22c55e; font-weight: 500;">' + escapeHtml(priceText) + '</span>' +
            '</div>' +
            '<span style="color: rgba(99, 102, 241, 0.8); font-size: 16px;">‚Üí</span>' +
          '</a>';
        }).join('') +
      '</div>';
    
    floatingPanel.style.display = 'block';
    
    // Add close button handler
    const closeBtn = document.getElementById('close-floating-panel');
    if (closeBtn) {
      closeBtn.onclick = function() {
        floatingPanel.style.display = 'none';
      };
    }
    
    console.log('[MULTI-SOURCE] Showing floating panel with ' + sources.length + ' sources');
  }
  
  // Hide floating panel when Close button is clicked or modal closes
  document.addEventListener('click', function(e) {
    const target = e.target;
    const text = target.textContent || '';
    if (text.toLowerCase() === 'close') {
      const floatingPanel = document.getElementById('multi-source-floating-panel');
      if (floatingPanel) {
        setTimeout(function() { floatingPanel.style.display = 'none'; }, 100);
      }
    }
  });
  
  // Set up observer after DOM is ready
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', setupObserver);
  } else {
    setupObserver();
  }
})();
</script>

<!-- Multi-Day Filter and Near Me Feature -->
<style id="event-filter-styles">
  /* Filter Controls Container */
  .custom-filter-controls {
    position: fixed;
    bottom: 20px;
    right: 20px;
    z-index: 300;
    display: flex;
    flex-direction: column;
    gap: 10px;
    align-items: flex-end;
  }
  
  /* Filter Toggle Button */
  .filter-toggle-btn {
    background: linear-gradient(135deg, #1e1e2e 0%, #2d2d44 100%);
    border: 1px solid rgba(99, 102, 241, 0.3);
    border-radius: 50px;
    padding: 12px 20px;
    color: white;
    font-size: 13px;
    font-weight: 600;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 8px;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4);
    transition: all 0.3s ease;
    backdrop-filter: blur(10px);
  }
  .filter-toggle-btn:hover {
    background: linear-gradient(135deg, #2d2d44 0%, #3d3d5c 100%);
    border-color: rgba(99, 102, 241, 0.6);
    transform: translateY(-2px);
    box-shadow: 0 6px 24px rgba(99, 102, 241, 0.3);
  }
  .filter-toggle-btn.active {
    background: linear-gradient(135deg, #4f46e5 0%, #6366f1 100%);
    border-color: #818cf8;
  }
  
  /* Near Me Panel */
  .near-me-panel {
    background: linear-gradient(135deg, #1e1e2e 0%, #2d2d44 100%);
    border: 1px solid rgba(99, 102, 241, 0.3);
    border-radius: 16px;
    padding: 16px;
    color: white;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5);
    backdrop-filter: blur(20px);
    min-width: 280px;
    display: none;
  }
  .near-me-panel.visible {
    display: block;
    animation: slideIn 0.3s ease;
  }
  @keyframes slideIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
  }
  
  .near-me-title {
    font-size: 14px;
    font-weight: 700;
    margin-bottom: 12px;
    display: flex;
    align-items: center;
    gap: 8px;
  }
  
  .near-me-input-group {
    display: flex;
    gap: 8px;
    margin-bottom: 12px;
  }
  .near-me-input {
    flex: 1;
    background: rgba(0,0,0,0.3);
    border: 1px solid rgba(255,255,255,0.1);
    border-radius: 8px;
    padding: 10px 12px;
    color: white;
    font-size: 14px;
    outline: none;
  }
  .near-me-input:focus {
    border-color: #6366f1;
  }
  .near-me-input::placeholder {
    color: rgba(255,255,255,0.4);
  }
  
  .near-me-btn {
    background: linear-gradient(135deg, #4f46e5 0%, #6366f1 100%);
    border: none;
    border-radius: 8px;
    padding: 10px 16px;
    color: white;
    font-size: 13px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s ease;
    white-space: nowrap;
  }
  .near-me-btn:hover {
    transform: scale(1.02);
    box-shadow: 0 4px 12px rgba(99, 102, 241, 0.4);
  }
  .near-me-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
    transform: none;
  }
  
  .near-me-location-btn {
    background: rgba(255,255,255,0.1);
    border: 1px solid rgba(255,255,255,0.2);
    border-radius: 8px;
    padding: 10px;
    color: white;
    cursor: pointer;
    transition: all 0.2s ease;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  .near-me-location-btn:hover {
    background: rgba(255,255,255,0.2);
  }
  
  .near-me-status {
    font-size: 12px;
    color: rgba(255,255,255,0.6);
    margin-top: 8px;
  }
  .near-me-status.active {
    color: #22c55e;
  }
  .near-me-status.error {
    color: #ef4444;
  }
  
  .distance-select {
    background: rgba(0,0,0,0.3);
    border: 1px solid rgba(255,255,255,0.1);
    border-radius: 8px;
    padding: 10px 12px;
    color: white;
    font-size: 14px;
    outline: none;
    width: 100%;
    margin-top: 8px;
    cursor: pointer;
  }
  .distance-select option {
    background: #1e1e2e;
    color: white;
  }
  
  /* Multi-day filter indicator */
  .multi-day-indicator {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    background: rgba(245, 158, 11, 0.2);
    border: 1px solid rgba(245, 158, 11, 0.4);
    border-radius: 4px;
    padding: 2px 6px;
    font-size: 10px;
    font-weight: 600;
    color: #fbbf24;
    margin-left: 8px;
  }
  
  /* Distance indicator on cards */
  .distance-indicator {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    background: rgba(34, 197, 94, 0.2);
    border: 1px solid rgba(34, 197, 94, 0.4);
    border-radius: 4px;
    padding: 2px 6px;
    font-size: 10px;
    font-weight: 600;
    color: #22c55e;
    margin-left: 8px;
  }
  
  /* Hidden multi-day events by default */
  .event-card-hidden {
    display: none !important;
  }
</style>

<script>
(function() {
  console.log('[FILTERS] Initializing multi-day filter and near me features');
  
  // State
  let showMultiDayEvents = false;
  let userLocation = null;
  let maxDistance = 10; // km
  let filterActive = false;
  
  // Toronto postal code to coordinate mapping (approximate centers)
  const postalCodeCoords = {
    'M5': { lat: 43.6532, lng: -79.3832, name: 'Downtown Toronto' },
    'M4': { lat: 43.6764, lng: -79.3400, name: 'East Toronto' },
    'M6': { lat: 43.6614, lng: -79.4388, name: 'West Toronto' },
    'M3': { lat: 43.7490, lng: -79.4940, name: 'North York West' },
    'M2': { lat: 43.7770, lng: -79.4170, name: 'North York' },
    'M1': { lat: 43.7731, lng: -79.2578, name: 'Scarborough' },
    'M9': { lat: 43.6438, lng: -79.5597, name: 'Etobicoke' },
    'M8': { lat: 43.7100, lng: -79.5400, name: 'North Etobicoke' },
    'L4': { lat: 43.7715, lng: -79.4877, name: 'Vaughan/North York' },
    'L5': { lat: 43.5890, lng: -79.6441, name: 'Mississauga' },
    'L6': { lat: 43.5980, lng: -79.6540, name: 'Brampton/Mississauga' },
    'L3': { lat: 43.8561, lng: -79.3370, name: 'Markham' },
    'L7': { lat: 43.5400, lng: -79.8800, name: 'Oakville/Milton' },
  };
  
  // Known venue coordinates (extended)
  const venueCoords = {
    'nathan phillips square': { lat: 43.6525, lng: -79.3832 },
    'sankofa square': { lat: 43.6561, lng: -79.3802 },
    'yonge-dundas square': { lat: 43.6561, lng: -79.3802 },
    'toronto city hall': { lat: 43.6534, lng: -79.3841 },
    'harbourfront centre': { lat: 43.6388, lng: -79.3822 },
    'ontario place': { lat: 43.6283, lng: -79.4139 },
    'exhibition place': { lat: 43.6355, lng: -79.4176 },
    'fort york': { lat: 43.6389, lng: -79.4030 },
    'distillery district': { lat: 43.6503, lng: -79.3596 },
    'queens park': { lat: 43.6624, lng: -79.3913 },
    'high park': { lat: 43.6465, lng: -79.4637 },
    'mel lastman square': { lat: 43.7676, lng: -79.4137 },
    'scarborough civic centre': { lat: 43.7731, lng: -79.2578 },
    'bmo field': { lat: 43.6332, lng: -79.4186 },
    'rogers centre': { lat: 43.6414, lng: -79.3894 },
    'scotiabank arena': { lat: 43.6435, lng: -79.3791 },
    'roy thomson hall': { lat: 43.6466, lng: -79.3864 },
    'massey hall': { lat: 43.6545, lng: -79.3787 },
    'aga khan museum': { lat: 43.7257, lng: -79.3323 },
    'rom': { lat: 43.6677, lng: -79.3948 },
    'royal ontario museum': { lat: 43.6677, lng: -79.3948 },
    'ago': { lat: 43.6536, lng: -79.3925 },
    'art gallery of ontario': { lat: 43.6536, lng: -79.3925 },
    'cn tower': { lat: 43.6426, lng: -79.3871 },
    'casa loma': { lat: 43.6780, lng: -79.4094 },
    'st. lawrence market': { lat: 43.6487, lng: -79.3715 },
    'kensington market': { lat: 43.6547, lng: -79.4005 },
    'eaton centre': { lat: 43.6544, lng: -79.3807 },
    'ripley\'s aquarium': { lat: 43.6424, lng: -79.3860 },
    'toronto zoo': { lat: 43.8175, lng: -79.1853 },
  };
  
  // Calculate distance between two coordinates (Haversine formula)
  function calculateDistance(lat1, lng1, lat2, lng2) {
    const R = 6371; // Earth's radius in km
    const dLat = (lat2 - lat1) * Math.PI / 180;
    const dLng = (lng2 - lng1) * Math.PI / 180;
    const a = Math.sin(dLat/2) * Math.sin(dLat/2) +
              Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) *
              Math.sin(dLng/2) * Math.sin(dLng/2);
    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
    return R * c;
  }
  
  // Extract coordinates from location text
  function getLocationCoords(locationText, titleText) {
    if (!locationText) return null;
    const combined = (locationText + ' ' + (titleText || '')).toLowerCase();
    
    // Check venue names
    for (const [venue, coords] of Object.entries(venueCoords)) {
      if (combined.includes(venue)) {
        return coords;
      }
    }
    
    // Check for address patterns with street numbers
    const addressMatch = combined.match(/(\d+)\s+[\w\s]+(?:st|street|ave|avenue|blvd|boulevard|rd|road|dr|drive)/i);
    if (addressMatch) {
      // Return downtown Toronto as approximate for addresses
      return { lat: 43.6532, lng: -79.3832 };
    }
    
    // Default to downtown Toronto for generic "Toronto" locations
    if (combined.includes('toronto')) {
      return { lat: 43.6532, lng: -79.3832 };
    }
    
    return null;
  }
  
  // Parse postal code
  function parsePostalCode(input) {
    const cleaned = input.toUpperCase().replace(/\s/g, '');
    const prefix = cleaned.substring(0, 2);
    
    if (postalCodeCoords[prefix]) {
      return postalCodeCoords[prefix];
    }
    
    // Try first 3 characters
    const prefix3 = cleaned.substring(0, 3);
    for (const [code, coords] of Object.entries(postalCodeCoords)) {
      if (prefix3.startsWith(code)) {
        return coords;
      }
    }
    
    return null;
  }
  
  // Check if event is multi-day
  function isMultiDayEvent(event) {
    // Check is_multi_day flag
    if (event.is_multi_day || event.isMultiDay) return true;
    
    // Check if end_date exists and is different from start date
    if (event.end_date || event.endDate) {
      const start = new Date(event.date).toDateString();
      const end = new Date(event.end_date || event.endDate).toDateString();
      return start !== end;
    }
    
    // Check title for multi-day indicators
    const title = (event.title || '').toLowerCase();
    const multiDayKeywords = ['festival', 'week', 'weekend', 'days', 'exhibition', 'exhibit', 'runs until', 'through'];
    return multiDayKeywords.some(keyword => title.includes(keyword));
  }
  
  // Create filter controls UI
  function createFilterControls() {
    const container = document.createElement('div');
    container.className = 'custom-filter-controls';
    container.id = 'custom-filter-controls';
    
    // Near Me Panel
    const nearMePanel = document.createElement('div');
    nearMePanel.className = 'near-me-panel';
    nearMePanel.innerHTML = `
      <div class="near-me-title">üìç Find Events Near Me</div>
      <div class="near-me-input-group">
        <input type="text" class="near-me-input" id="postal-code-input" placeholder="Enter postal code (e.g., M5V)" />
        <button class="near-me-location-btn" id="use-location-btn" title="Use my current location">üìç</button>
      </div>
      <button class="near-me-btn" id="apply-location-btn" style="width: 100%">Apply Location Filter</button>
      <select class="distance-select" id="distance-select">
        <option value="2">Within 2 km</option>
        <option value="5">Within 5 km</option>
        <option value="10" selected>Within 10 km</option>
        <option value="25">Within 25 km</option>
        <option value="50">Within 50 km</option>
        <option value="0">Any distance</option>
      </select>
      <div class="near-me-status" id="near-me-status"></div>
    `;
    
    // Near Me Toggle Button
    const nearMeBtn = document.createElement('button');
    nearMeBtn.className = 'filter-toggle-btn';
    nearMeBtn.id = 'near-me-toggle';
    nearMeBtn.innerHTML = 'üìç Near Me';
    
    // Multi-Day Toggle Button
    const multiDayBtn = document.createElement('button');
    multiDayBtn.className = 'filter-toggle-btn';
    multiDayBtn.id = 'multiday-toggle';
    multiDayBtn.innerHTML = 'üìÖ Show Multi-Day Events';
    
    container.appendChild(nearMePanel);
    container.appendChild(nearMeBtn);
    container.appendChild(multiDayBtn);
    
    document.body.appendChild(container);
    
    // Event listeners
    nearMeBtn.addEventListener('click', function() {
      nearMePanel.classList.toggle('visible');
    });
    
    multiDayBtn.addEventListener('click', function() {
      showMultiDayEvents = !showMultiDayEvents;
      multiDayBtn.classList.toggle('active', showMultiDayEvents);
      multiDayBtn.innerHTML = showMultiDayEvents ? 'üìÖ Hide Multi-Day Events' : 'üìÖ Show Multi-Day Events';
      applyFilters();
    });
    
    document.getElementById('use-location-btn').addEventListener('click', function() {
      const statusEl = document.getElementById('near-me-status');
      statusEl.textContent = 'Getting your location...';
      statusEl.className = 'near-me-status';
      
      if (!navigator.geolocation) {
        statusEl.textContent = 'Geolocation not supported by your browser';
        statusEl.className = 'near-me-status error';
        return;
      }
      
      navigator.geolocation.getCurrentPosition(
        function(position) {
          userLocation = {
            lat: position.coords.latitude,
            lng: position.coords.longitude
          };
          statusEl.textContent = '‚úì Location detected';
          statusEl.className = 'near-me-status active';
          document.getElementById('postal-code-input').value = '';
          console.log('[FILTERS] User location:', userLocation);
        },
        function(error) {
          statusEl.textContent = 'Could not get location: ' + error.message;
          statusEl.className = 'near-me-status error';
        },
        { enableHighAccuracy: true, timeout: 10000 }
      );
    });
    
    document.getElementById('apply-location-btn').addEventListener('click', function() {
      const postalInput = document.getElementById('postal-code-input').value.trim();
      const statusEl = document.getElementById('near-me-status');
      
      if (postalInput) {
        const coords = parsePostalCode(postalInput);
        if (coords) {
          userLocation = coords;
          statusEl.textContent = '‚úì Using ' + (coords.name || 'postal code area');
          statusEl.className = 'near-me-status active';
        } else {
          statusEl.textContent = 'Invalid postal code. Try M5V, L4K, etc.';
          statusEl.className = 'near-me-status error';
          return;
        }
      }
      
      if (!userLocation) {
        statusEl.textContent = 'Please enter a postal code or use your location';
        statusEl.className = 'near-me-status error';
        return;
      }
      
      maxDistance = parseInt(document.getElementById('distance-select').value) || 0;
      filterActive = true;
      nearMeBtn.classList.add('active');
      nearMePanel.classList.remove('visible');
      applyFilters();
    });
    
    document.getElementById('distance-select').addEventListener('change', function() {
      maxDistance = parseInt(this.value) || 0;
      if (filterActive && userLocation) {
        applyFilters();
      }
    });
    
    // Close panel when clicking outside
    document.addEventListener('click', function(e) {
      if (!container.contains(e.target)) {
        nearMePanel.classList.remove('visible');
      }
    });
  }
  
  // Apply all filters to event cards
  function applyFilters() {
    console.log('[FILTERS] Applying filters - showMultiDay:', showMultiDayEvents, 'location:', userLocation, 'maxDistance:', maxDistance);
    
    const cards = document.querySelectorAll('[class*="glass-panel"]:not(.animate-pulse), [class*="event-card"], [class*="EventCard"]');
    let hiddenCount = 0;
    let shownCount = 0;
    
    cards.forEach(function(card) {
      // Get event data from card
      const titleEl = card.querySelector('h2, h3, [class*="title"], [class*="Title"]');
      const locationEl = card.querySelector('[class*="location"], [class*="Location"]');
      
      if (!titleEl) return;
      
      const title = titleEl.textContent || '';
      const location = locationEl ? locationEl.textContent : '';
      
      // Try to find event in raw events data
      let eventData = null;
      if (window.__RAW_EVENTS__) {
        eventData = window.__RAW_EVENTS__.find(function(e) {
          const eTitle = (e.title || '').toLowerCase();
          const cardTitle = title.toLowerCase();
          return eTitle === cardTitle || 
                 eTitle.includes(cardTitle.substring(0, 20)) || 
                 cardTitle.includes(eTitle.substring(0, 20));
        });
      }
      
      let shouldShow = true;
      
      // Multi-day filter
      if (!showMultiDayEvents) {
        const isMultiDay = eventData ? isMultiDayEvent(eventData) : false;
        if (isMultiDay) {
          shouldShow = false;
          
          // Add multi-day indicator if not exists
          if (!card.querySelector('.multi-day-indicator')) {
            const indicator = document.createElement('span');
            indicator.className = 'multi-day-indicator';
            indicator.innerHTML = 'üìÖ Multi-Day';
            titleEl.appendChild(indicator);
          }
        }
      }
      
      // Location filter
      if (shouldShow && filterActive && userLocation && maxDistance > 0) {
        const eventCoords = eventData ? 
          (eventData.lat && eventData.lng ? { lat: eventData.lat, lng: eventData.lng } : getLocationCoords(eventData.location, eventData.title)) :
          getLocationCoords(location, title);
        
        if (eventCoords) {
          const distance = calculateDistance(userLocation.lat, userLocation.lng, eventCoords.lat, eventCoords.lng);
          
          if (distance > maxDistance) {
            shouldShow = false;
          } else {
            // Add distance indicator
            const existingIndicator = card.querySelector('.distance-indicator');
            if (existingIndicator) {
              existingIndicator.textContent = 'üìç ' + distance.toFixed(1) + ' km';
            } else {
              const indicator = document.createElement('span');
              indicator.className = 'distance-indicator';
              indicator.innerHTML = 'üìç ' + distance.toFixed(1) + ' km';
              titleEl.appendChild(indicator);
            }
          }
        }
      }
      
      // Apply visibility
      if (shouldShow) {
        card.classList.remove('event-card-hidden');
        shownCount++;
      } else {
        card.classList.add('event-card-hidden');
        hiddenCount++;
      }
    });
    
    console.log('[FILTERS] Shown:', shownCount, 'Hidden:', hiddenCount);
  }
  
  // Initialize
  function init() {
    createFilterControls();
    
    // Apply initial filters after events load
    setTimeout(applyFilters, 2000);
    setTimeout(applyFilters, 4000);
    
    // Re-apply filters when new cards are added
    const observer = new MutationObserver(function(mutations) {
      let shouldApply = false;
      mutations.forEach(function(mutation) {
        if (mutation.addedNodes.length > 0) {
          shouldApply = true;
        }
      });
      if (shouldApply) {
        clearTimeout(window._filterTimeout);
        window._filterTimeout = setTimeout(applyFilters, 300);
      }
    });
    
    const main = document.querySelector('main') || document.body;
    observer.observe(main, { childList: true, subtree: true });
  }
  
  // Start when DOM is ready
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', init);
  } else {
    init();
  }
})();
</script>
<!-- Sign-in modal: INJECTED by script so it survives React hydration (same as island). -->
<script>
(function(){
  var fcApi = 'https://findtorontoevents.ca/fc/api';
  var authUrl = fcApi + '/google_auth.php?return_to=' + encodeURIComponent(window.location.pathname || '/');
  var modalHtml = '<div id="signin-modal" style="display:none;position:fixed;inset:0;z-index:10000;background:rgba(0,0,0,0.85);backdrop-filter:blur(8px);align-items:center;justify-content:center;"><div id="signin-modal-box" style="position:relative;background:rgba(20,20,32,0.98);border:1px solid rgba(255,255,255,0.1);border-radius:24px;padding:40px;max-width:400px;width:90%;box-shadow:0 20px 60px rgba(0,0,0,0.5);"><button type="button" id="signin-modal-close" aria-label="Close" style="position:absolute;top:16px;right:16px;background:transparent;border:none;color:rgba(255,255,255,0.7);font-size:24px;cursor:pointer;padding:8px;line-height:1;">&times;</button><div id="signin-form-view"><h2 style="color:#fff;font-size:24px;font-weight:800;margin:0 0 24px;text-align:center;">Sign in</h2><p style="color:rgba(255,255,255,0.6);font-size:14px;margin:0 0 20px;text-align:center;">Same account for Toronto Events and FavCreators.</p><button type="button" id="signin-google-btn" style="width:100%;padding:14px 20px;background:#fff;color:#333;border:none;border-radius:12px;font-weight:600;cursor:pointer;font-size:15px;display:flex;align-items:center;justify-content:center;gap:10px;box-shadow:0 2px 8px rgba(0,0,0,0.15);"><svg width="20" height="20" viewBox="0 0 24 24"><path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/><path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/><path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/><path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/></svg>Continue with Google</button><div style="text-align:center;color:rgba(255,255,255,0.4);font-size:12px;margin:16px 0;">or use email</div><form id="signin-form" onsubmit="return false;" autocomplete="off"><input type="email" id="signin-email" placeholder="Email" autocomplete="email" style="width:100%;padding:12px 16px;background:rgba(255,255,255,0.06);border:1px solid rgba(255,255,255,0.15);border-radius:10px;color:#fff;margin-bottom:12px;font-size:14px;box-sizing:border-box;" /><input type="password" id="signin-password" placeholder="Password" autocomplete="current-password" style="width:100%;padding:12px 16px;background:rgba(255,255,255,0.06);border:1px solid rgba(255,255,255,0.15);border-radius:10px;color:#fff;margin-bottom:16px;font-size:14px;box-sizing:border-box;" /><button type="button" id="signin-email-btn" style="width:100%;padding:14px;background:linear-gradient(135deg,#a855f7,#8b5cf6);color:#fff;border:none;border-radius:12px;font-weight:700;cursor:pointer;font-size:14px;">Email login</button></form><div id="signin-error" style="margin-top:16px;padding:12px;background:rgba(239,68,68,0.15);border:1px solid rgba(239,68,68,0.3);border-radius:8px;color:#fca5a5;font-size:12px;display:none;"></div></div><div id="signin-signed-in-view" style="display:none;"><h2 style="color:#fff;font-size:24px;font-weight:800;margin:0 0 24px;text-align:center;">Account</h2><p id="signin-signed-in-as" style="color:rgba(255,255,255,0.8);font-size:14px;margin:0 0 20px;text-align:center;"></p><div id="signin-debug-toggle" style="display:none;margin-bottom:16px;"><label style="display:flex;align-items:center;gap:8px;color:rgba(255,255,255,0.7);font-size:12px;cursor:pointer;"><input type="checkbox" id="signin-debug-cb" /> Debug logging (database)</label></div><button type="button" id="signin-signout-btn" style="width:100%;padding:14px;background:rgba(239,68,68,0.2);color:#fca5a5;border:1px solid rgba(239,68,68,0.4);border-radius:12px;font-weight:700;cursor:pointer;font-size:14px;">Sign out</button></div></div></div>';

  function ensureSignInModal() {
    if (document.getElementById('signin-modal')) return;
    var wrap = document.createElement('div');
    wrap.innerHTML = modalHtml;
    var modal = wrap.firstElementChild;
    if (modal) {
      document.body.appendChild(modal);
      var box = document.getElementById('signin-modal-box');
      var closeBtn = document.getElementById('signin-modal-close');
      var googleBtn = document.getElementById('signin-google-btn');
      var emailBtn = document.getElementById('signin-email-btn');
      var emailInput = document.getElementById('signin-email');
      var passwordInput = document.getElementById('signin-password');
      var errorDiv = document.getElementById('signin-error');
      if (closeBtn) closeBtn.onclick = closeSignInModal;
      if (modal) modal.onclick = function(e) { if (e.target === modal) closeSignInModal(); };
      if (box) box.onclick = function(e) { e.stopPropagation(); };
      if (googleBtn) googleBtn.onclick = function() { window.location.href = authUrl; };
      if (emailBtn) emailBtn.onclick = function() {
        var email = emailInput ? emailInput.value.trim() : '';
        var password = passwordInput ? passwordInput.value : '';
        if (!email || !password) { if (errorDiv) { errorDiv.textContent = 'Please enter email and password.'; errorDiv.style.display = 'block'; } return; }
        emailBtn.disabled = true;
        if (errorDiv) errorDiv.style.display = 'none';
        fetch(fcApi + '/login.php', { method: 'POST', headers: { 'Content-Type': 'application/json' }, credentials: 'include', body: JSON.stringify({ email: email, password: password }) })
          .then(function(r) { return r.json(); })
          .then(function(data) {
            if (data.error) {
              if (window.__fc_debug_log) window.__fc_debug_log('login_failure', { reason: data.error });
              if (errorDiv) { errorDiv.textContent = data.error; errorDiv.style.display = 'block'; } emailBtn.disabled = false;
            } else {
              if (window.__fc_debug_log) window.__fc_debug_log('login_success', { user_id: data.user ? data.user.id : null, provider: 'email' });
              if (data.user) window.__fc_logged_in_user__ = data.user;
              window.location.href = 'https://findtorontoevents.ca/fc/';
            }
          })
          .catch(function() {
            if (window.__fc_debug_log) window.__fc_debug_log('login_failure', { reason: 'network' });
            if (errorDiv) { errorDiv.textContent = 'Cannot reach login. Try again.'; errorDiv.style.display = 'block'; } emailBtn.disabled = false;
          });
      };
      if (passwordInput) passwordInput.onkeydown = function(e) { if (e.key === 'Enter') emailBtn && emailBtn.click(); };
      var signoutBtn = document.getElementById('signin-signout-btn');
      if (signoutBtn) signoutBtn.onclick = signOut;
      var debugCb = document.getElementById('signin-debug-cb');
      if (debugCb) debugCb.onchange = function() {
        fetch(fcApi + '/debug_toggle.php', { method: 'POST', credentials: 'include', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({ enabled: debugCb.checked }) })
          .then(function(r) { return r.json(); })
          .then(function(d) { window.__fc_debug_log_enabled__ = !!d.debug_log_enabled; })
          .catch(function() {});
      };
    }
  }
  function closeSignInModal() {
    var m = document.getElementById('signin-modal');
    if (m) { m.style.display = 'none'; m.style.pointerEvents = 'none'; }
  }
  function signOut() {
    fetch(fcApi + '/logout.php', { method: 'POST', credentials: 'include' })
      .then(function() {
        window.__fc_logged_in_user__ = null;
        window.__fc_debug_log_enabled__ = false;
        closeSignInModal();
        try { window.dispatchEvent(new Event('fc-logout')); } catch(e) {}
      })
      .catch(function() { closeSignInModal(); });
  }
  function openSignInModal() {
    fetch(fcApi + '/get_me.php', { credentials: 'include' })
      .then(function(r) { return r.json(); })
      .then(function(data) {
        ensureSignInModal();
        var m = document.getElementById('signin-modal');
        if (m && !document.body.contains(m)) document.body.appendChild(m);
        if (!m) { ensureSignInModal(); m = document.getElementById('signin-modal'); }
        var formView = document.getElementById('signin-form-view');
        var signedInView = document.getElementById('signin-signed-in-view');
        var signedInAs = document.getElementById('signin-signed-in-as');
        var debugToggle = document.getElementById('signin-debug-toggle');
        var debugCb = document.getElementById('signin-debug-cb');
        if (data && data.user && data.user.id != null) {
          window.__fc_logged_in_user__ = data.user;
          window.__fc_debug_log_enabled__ = !!(data.debug_log_enabled);
          if (formView) formView.style.display = 'none';
          if (signedInView) { signedInView.style.display = 'block'; }
          if (signedInAs) signedInAs.textContent = 'Signed in as ' + (data.user.display_name || data.user.email || 'User');
          var isAdmin = data.user.role === 'admin';
          if (debugToggle) { debugToggle.style.display = isAdmin ? 'block' : 'none'; }
          if (debugCb) { debugCb.checked = window.__fc_debug_log_enabled__; }
        } else {
          window.__fc_logged_in_user__ = null;
          window.__fc_debug_log_enabled__ = false;
          if (formView) formView.style.display = 'block';
          if (signedInView) signedInView.style.display = 'none';
        }
        var err = document.getElementById('signin-error');
        if (m) { m.style.display = 'flex'; m.style.pointerEvents = 'auto'; m.style.alignItems = 'center'; m.style.justifyContent = 'center'; }
        if (err) { err.style.display = 'none'; err.textContent = ''; }
      })
      .catch(function() {
        ensureSignInModal();
        var m = document.getElementById('signin-modal');
        if (m && !document.body.contains(m)) document.body.appendChild(m);
        var formView = document.getElementById('signin-form-view');
        var signedInView = document.getElementById('signin-signed-in-view');
        if (formView) formView.style.display = 'block';
        if (signedInView) signedInView.style.display = 'none';
        if (m) { m.style.display = 'flex'; m.style.pointerEvents = 'auto'; m.style.alignItems = 'center'; m.style.justifyContent = 'center'; }
      });
  }
  window.openSignInModal = openSignInModal;
  window.closeSignInModal = closeSignInModal;
  function run() { ensureSignInModal(); }
  if (document.readyState === 'loading') document.addEventListener('DOMContentLoaded', run);
  else run();
  window.addEventListener('load', run);
  setInterval(ensureSignInModal, 3000);
})();
</script>
<!-- Sign-in island: button opens modal or goes to /fc/ when already logged in -->
<script>
(function(){
  var fcApi = 'https://findtorontoevents.ca/fc/api';
  var baseIslandStyle = 'position:fixed;top:1.5rem;right:calc(1.5rem + 80px);z-index:9999;display:flex !important;align-items:center;pointer-events:none;visibility:visible !important;opacity:1 !important;';
  var btnStyle = 'pointer-events:auto;display:inline-flex;align-items:center;gap:0.5rem;padding:0.75rem 1rem;background:rgba(0,0,0,0.4);backdrop-filter:blur(24px);border:1px solid rgba(255,255,255,0.1);border-radius:1rem;color:#fff;font-size:10px;font-weight:800;text-transform:uppercase;letter-spacing:0.05em;box-shadow:0 25px 50px -12px rgba(0,0,0,0.25);cursor:pointer;font-family:inherit;text-decoration:none;';
  function getIslandHtml() {
    if (window.__fc_logged_in_user__) {
      return '<div id="signin-island" style="' + baseIslandStyle + '"><a href="https://findtorontoevents.ca/fc/" style="' + btnStyle + '"><span style="font-size:1.25rem">\uD83D\uDD12</span><span>Account</span></a></div>';
    }
    return '<div id="signin-island" style="' + baseIslandStyle + '"><button type="button" style="' + btnStyle + '"><span style="font-size:1.25rem">\uD83D\uDD12</span><span>Sign in</span></button></div>';
  }
  function ensureSignInIsland() {
    var existing = document.getElementById('signin-island');
    if (existing) {
      var link = existing.querySelector('a[href*="/fc/"]');
      var btn = existing.querySelector('button');
      if (window.__fc_logged_in_user__ && btn && !link) {
        existing.parentNode.removeChild(existing);
      } else if (!window.__fc_logged_in_user__ && link) {
        existing.parentNode.removeChild(existing);
      } else return;
    }
    var wrap = document.createElement('div');
    wrap.innerHTML = getIslandHtml();
    var island = wrap.firstElementChild;
    if (island) {
      document.body.appendChild(island);
      var btn = island.querySelector('button');
      if (btn) {
        btn.onclick = function() { window.openSignInModal && window.openSignInModal(); };
        btn.onmouseover = function() { this.style.background = '#6366f1'; };
        btn.onmouseout = function() { this.style.background = 'rgba(0,0,0,0.4)'; };
      }
    }
  }
  function run() {
    ensureSignInIsland();
    setTimeout(ensureSignInIsland, 500);
    setTimeout(ensureSignInIsland, 1500);
    setTimeout(ensureSignInIsland, 3000);
    setTimeout(ensureSignInIsland, 6000);
    setTimeout(ensureSignInIsland, 10000);
  }
  function init() {
    fetch(fcApi + '/get_me.php', { credentials: 'include' })
      .then(function(r) { return r.json(); })
      .then(function(data) {
        if (data && data.user && data.user.id != null) {
          window.__fc_logged_in_user__ = data.user;
          window.__fc_debug_log_enabled__ = !!(data.debug_log_enabled);
          var uid = data.user.id;
          fetch(fcApi + '/get_my_events.php?user_id=' + uid, { credentials: 'include' })
            .then(function(r2) { return r2.json(); })
            .then(function(d) {
              var events = (d && d.events) ? d.events : [];
              function inject() {
                if (window.__fc_import_events__ && Array.isArray(events) && events.length > 0) {
                  window.__fc_import_events__(events);
                  return;
                }
                setTimeout(inject, 200);
              }
              inject();
            })
            .catch(function() {});
        } else {
          window.__fc_debug_log_enabled__ = false;
        }
        run();
      })
      .catch(function() { run(); });
  }
  window.addEventListener('fc-logout', function() { ensureSignInIsland(); });
  if (document.readyState === 'loading') document.addEventListener('DOMContentLoaded', init);
  else init();
  window.addEventListener('load', init);
  setInterval(ensureSignInIsland, 3000);
})();
</script>
<!-- Sign-in in nav (sidebar): button opens same modal -->
<script>
(function(){
  function injectNavSignIn() {
    if (document.getElementById('injected-nav-signin')) return;
    var ps = document.querySelectorAll('nav p');
    var personalHeading = null;
    for (var i = 0; i < ps.length; i++) { if (ps[i].textContent.trim() === 'PERSONAL') { personalHeading = ps[i]; break; } }
    if (!personalHeading) return;
    var section = personalHeading.closest('.space-y-1') || personalHeading.parentElement;
    var firstBtn = section ? section.querySelector('button') : null;
    if (!section || !firstBtn || section.querySelector('#injected-nav-signin')) return;
    var btn = document.createElement('button');
    btn.type = 'button';
    btn.id = 'injected-nav-signin';
    btn.className = 'w-full text-left px-4 py-3 rounded-xl flex items-center gap-3 transition-all hover:bg-blue-500/20 text-blue-200 hover:text-white border border-transparent hover:border-blue-500/30 overflow-hidden';
    btn.title = 'Sign in';
    btn.innerHTML = '<span class="text-lg">\uD83D\uDD12</span><span class="flex-1">Sign in</span>';
    btn.onclick = function() { window.openSignInModal && window.openSignInModal(); };
    section.insertBefore(btn, firstBtn);
  }
  function run() { injectNavSignIn(); setTimeout(injectNavSignIn, 1500); setTimeout(injectNavSignIn, 4000); }
  if (document.readyState === 'loading') document.addEventListener('DOMContentLoaded', run);
  else run();
  window.addEventListener('load', run);
})();
</script>
<!-- Debug logging: when admin has debug_log_enabled, send events to ejaguiar1_debuglog -->
<script>
(function(){
  var fcApi = 'https://findtorontoevents.ca/fc/api';
  window.__fc_debug_log = function(eventType, payload) {
    if (!window.__fc_debug_log_enabled__) return;
    try {
      fetch(fcApi + '/debug_log.php', { method: 'POST', credentials: 'include', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({ event_type: eventType, payload: payload || {} }) }).catch(function() {});
    } catch(e) {}
  };
  document.addEventListener('click', function(e) {
    if (!window.__fc_debug_log_enabled__) return;
    var a = e.target && (e.target.closest ? e.target.closest('a[href]') : (e.target.tagName === 'A' ? e.target : null));
    if (a && a.href && (a.href.indexOf('eventbrite') !== -1 || a.href.indexOf('/event') !== -1 || a.href.indexOf('ticket') !== -1)) {
      window.__fc_debug_log('event_clicked', { href: a.href.substring(0, 200) });
    }
  }, true);
})();
</script>
<!-- Bridge: when app dispatches toronto-event-saved we persist to server and show "Saved to DB" or error -->
<script>
(function(){
  var fcApi = 'https://findtorontoevents.ca/fc/api';
  function showToast(msg, isError) {
    var id = 'saved-events-toast';
    var el = document.getElementById(id);
    if (el) el.remove();
    el = document.createElement('div');
    el.id = id;
    el.setAttribute('style', 'position:fixed;bottom:2rem;left:50%;transform:translateX(-50%);z-index:100000;padding:0.75rem 1.5rem;border-radius:1rem;font-size:0.875rem;font-weight:700;box-shadow:0 25px 50px -12px rgba(0,0,0,0.5);' + (isError ? 'background:#dc2626;color:#fff;' : 'background:rgba(34,197,94,0.9);color:#fff;'));
    el.textContent = msg;
    document.body.appendChild(el);
    setTimeout(function() { if (el.parentNode) el.remove(); }, 3500);
  }
  window.addEventListener('toronto-event-saved', function(e) {
    var user = window.__fc_logged_in_user__;
    var event = e && e.detail && e.detail.event ? e.detail.event : (e.detail || e);
    var added = e && e.detail && typeof e.detail.added === 'boolean' ? e.detail.added : true;
    if (window.__fc_debug_log) window.__fc_debug_log('heart_click', { user_id: user ? user.id : null, event_id: event ? event.id : null, has_user: !!(user && user.id), added: added });
    if (!user || !user.id) return;
    if (!event || !event.id) return;
    if (added === false) return;
    fetch(fcApi + '/save_events.php', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      credentials: 'include',
      body: JSON.stringify({ user_id: user.id, action: 'add', event: event })
    })
    .then(function(r) { return r.json().then(function(data) { return { ok: r.ok, data: data }; }); })
    .then(function(result) {
      if (result.ok && result.data && result.data.status === 'success') {
        showToast('Saved to DB');
        if (window.__fc_debug_log) window.__fc_debug_log('save_event_success', { event_id: event.id });
      } else {
        showToast(result.data && result.data.error ? result.data.error : 'Failed to save event', true);
        if (window.__fc_debug_log) window.__fc_debug_log('save_event_failure', { event_id: event.id, error: result.data && result.data.error ? result.data.error : 'unknown' });
      }
    })
    .catch(function(err) {
      showToast('Failed to save event', true);
      if (window.__fc_debug_log) window.__fc_debug_log('save_event_failure', { event_id: event.id, error: 'network' });
    });
  });
})();
</script>
</body>

</html>