# Feature Plan ‚Äì 2026-01-28

**Purpose:** Plan and track new features. Avoid conflicts with other agents (Gemini: tests, CI, V1 refactor, frontend). Align with existing .MD docs.

---

## üìã Scanned .MD Context (No Conflicts)

| Doc | Summary | Conflict? |
|-----|---------|-----------|
| `__ANTIGRAVITY_TASK_PLAN_2026-01-28_07-19.md` | Priorities: Expand Universe, Portfolio Optimizer, Alerts, Sector Analysis, Earnings, Backtest. **Avoid:** Unit tests, CI, V1 refactor, Frontend, V2 Truth Engine, Static site. | ‚úÖ Using priorities 1‚Äì2 only; no avoided areas. |
| `SESSION_SUMMARY_2026-01-28.md` | V2 engine session summary; doc tracking. | ‚úÖ Reference only. |
| `enhancement_plan_2026_01_26.md` | Events: city filter, dedup, categories, pricing, map/calendar. | ‚úÖ Events/scraper; not touching. |
| `SPRINT_PLAN.md` | Events: dating scraper, categorization, filtering, timezone, preview panel, settings. | ‚úÖ Events; not touching. |
| `KNOWN_ISSUES.md` | Event times, missing events. | ‚úÖ Reference only. |
| `movieshows/README.md` | MovieShows app; publish steps. | ‚úÖ No conflict. |
| `.agent/workflows/how-to-run-movieshows.md` | How to run MovieShows. | ‚úÖ No conflict. |

---

## üéØ Planned Features (This Session)

### 1. Portfolio Optimizer (Priority 2 from Task Plan)

**Goal:** Turn daily picks (30) into an allocated portfolio (e.g. top 10, equal weight or capped).

**Scope (Phase 1):**
- [x] Create `scripts/lib/portfolio-optimizer.ts`: types, equal-weight allocator, max positions, max weight per name.
- [x] Create `scripts/generate-portfolio.ts`: read `data/daily-stocks.json`, run optimizer, write `data/daily-portfolio.json` (+ `public/data/daily-portfolio.json`).
- [x] Add npm script `stocks:portfolio` in root `package.json`.
- [x] Document in this file.

**Conflicts:** None. New files only; does not modify tests, CI, or V1 engine.

**Status:** Done (Phase 1). Run: `npm run stocks:portfolio` (after `npm run stocks:generate`).

---

### 2. (Optional) Expand Stock Universe

**Goal:** Add more microcap/value tickers so Penny Sniper / Value Sleeper can produce picks.

**Scope:** Add tickers in `scripts/lib/stock-universe.ts` (e.g. more PENNY_STOCKS_LIQUID or value names). No changes to test files or CI.

**Status:** Deferred this session; universe already has PENNY_STOCKS_LIQUID and value lists.

---

### 3. (Future) Alerts, Sector Analysis, Earnings, Backtest

Per task plan: Real-Time Alerts, Sector Rotation, Earnings Calendar, Backtesting Engine. Not started this session; no .MD or code changes yet.

---

## üìÅ Files Touched

| File | Action |
|------|--------|
| `.agent/FEATURE_PLAN_2026-01-28.md` | Created (this doc). |
| `scripts/lib/portfolio-optimizer.ts` | Created. |
| `scripts/generate-portfolio.ts` | Created. |
| `package.json` | Added script `stocks:portfolio`. |
| `data/daily-portfolio.json` | Generated by script. |
| `public/data/daily-portfolio.json` | Generated by script. |

---

## ‚úÖ Updates (As Work Progresses)

- **Initial:** Scanned __ANTIGRAVITY_TASK_PLAN, SESSION_SUMMARY, enhancement_plan, SPRINT_PLAN, KNOWN_ISSUES, movieshows README/workflow. No conflicts. Started Portfolio Optimizer Phase 1.
- **Portfolio Phase 1 done:** Optimizer + generator run successfully. Top 10 picks, equal weight (10% each), max 20% per name. Output: `data/daily-portfolio.json`, `public/data/daily-portfolio.json`. Use `npm run stocks:portfolio` after picks are generated.

---

## üìå Recently Updated .MD (for conflict checks)

- `__ANTIGRAVITY_TASK_PLAN_2026-01-28_07-19.md` ‚Äì task priorities; **do not** modify test files, CI, V1 refactor, frontend.
- `SESSION_SUMMARY_2026-01-28.md` ‚Äì session log; reference only.
- `enhancement_plan_2026_01_26.md` ‚Äì events enhancements; separate from stocks.
- `SPRINT_PLAN.md` ‚Äì events sprint; separate from stocks.
- **This file** ‚Äì `.agent/FEATURE_PLAN_2026-01-28.md` ‚Äì updated when adding/doing features.
